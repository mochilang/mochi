func main (regs=83)
  // let data = [
  Const        r0, [{"tag": "a", "val": 1}, {"tag": "a", "val": 2}, {"tag": "b", "val": 3}]
  // let groups = from d in data group by d.tag into g select g
  Const        r1, []
  IterPrep     r2, r0
  Len          r3, r2
  Const        r4, 0
  MakeMap      r5, 0, r0
  Const        r6, []
L2:
  Less         r7, r4, r3
  JumpIfFalse  r7, L0
  Index        r8, r2, r4
  Move         r9, r8
  Const        r10, "tag"
  Index        r11, r9, r10
  Str          r12, r11
  In           r13, r12, r5
  JumpIfTrue   r13, L1
  Const        r14, []
  Const        r15, "__group__"
  Const        r16, true
  Const        r17, "key"
  Move         r18, r11
  Const        r19, "items"
  Move         r20, r14
  MakeMap      r21, 3, r15
  SetIndex     r5, r12, r21
  Append       r6, r6, r21
L1:
  Index        r23, r5, r12
  Index        r24, r23, r19
  Append       r25, r24, r8
  SetIndex     r23, r19, r25
  Const        r26, 1
  Add          r4, r4, r26
  Jump         L2
L0:
  Const        r29, 0
  Move         r28, r29
  Len          r30, r6
L4:
  Less         r31, r28, r30
  JumpIfFalse  r31, L3
  Index        r33, r6, r28
  Append       r1, r1, r33
  Add          r28, r28, r26
  Jump         L4
L3:
  // var tmp = []
  Const        r37, []
  // for g in groups {
  IterPrep     r38, r1
  Len          r39, r38
  Const        r40, 0
L8:
  Less         r41, r40, r39
  JumpIfFalse  r41, L5
  Index        r33, r38, r40
  // var total = 0
  Move         r43, r29
  // for x in g.items {
  Const        r44, "items"
  Index        r45, r33, r44
  IterPrep     r46, r45
  Len          r47, r46
  Const        r48, 0
L7:
  Less         r49, r48, r47
  JumpIfFalse  r49, L6
  Index        r51, r46, r48
  // total = total + x.val
  Const        r52, "val"
  Index        r53, r51, r52
  Add          r43, r43, r53
  // for x in g.items {
  Const        r55, 1
  Add          r48, r48, r55
  Jump         L7
L6:
  // tmp = append(tmp, {tag: g.key, total: total})
  Const        r57, "tag"
  Const        r58, "key"
  Index        r59, r33, r58
  Const        r60, "total"
  MakeMap      r63, 2, r57
  Append       r37, r37, r63
  // for g in groups {
  Const        r65, 1
  Add          r40, r40, r65
  Jump         L8
L5:
  // let result = from r in tmp sort by r.tag select r
  Const        r67, []
  IterPrep     r68, r37
  Len          r69, r68
  Const        r70, 0
L10:
  Less         r71, r70, r69
  JumpIfFalse  r71, L9
  Index        r73, r68, r70
  Const        r74, "tag"
  Index        r76, r73, r74
  Move         r77, r73
  MakeList     r78, 2, r76
  Append       r67, r67, r78
  Const        r80, 1
  Add          r70, r70, r80
  Jump         L10
L9:
  Sort         r67, r67
  // print(result)
  Print        r67
  Return       r0
