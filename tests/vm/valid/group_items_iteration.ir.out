func main (regs=83)
  // let data = [
  Const        r0, [{"tag": "a", "val": 1}, {"tag": "a", "val": 2}, {"tag": "b", "val": 3}]
  Const        r1, [{"tag": "a", "val": 1}, {"tag": "a", "val": 2}, {"tag": "b", "val": 3}]
  // let groups = from d in data group by d.tag into g select g
  Const        r2, []
  IterPrep     r3, r1
  Len          r4, r3
  Const        r5, 0
  MakeMap      r6, 0, r0
  Const        r7, []
L2:
  Less         r8, r5, r4
  JumpIfFalse  r8, L0
  Index        r9, r3, r5
  Move         r10, r9
  Const        r11, "tag"
  Index        r12, r10, r11
  Str          r13, r12
  In           r14, r13, r6
  JumpIfTrue   r14, L1
  Const        r16, "__group__"
  Const        r17, true
  Const        r18, "key"
  Move         r19, r12
  Const        r20, "items"
  Const        r21, []
  MakeMap      r22, 3, r16
  SetIndex     r6, r13, r22
  Append       r23, r7, r22
  Move         r7, r23
L1:
  Const        r24, "items"
  Index        r25, r6, r13
  Index        r26, r25, r24
  Append       r27, r26, r9
  SetIndex     r25, r24, r27
  Const        r28, 1
  AddInt       r5, r5, r28
  Jump         L2
L0:
  Const        r29, 0
  Len          r30, r7
L4:
  Less         r31, r29, r30
  JumpIfFalse  r31, L3
  Index        r32, r7, r29
  Move         r33, r32
  Append       r34, r2, r33
  Move         r2, r34
  Const        r29, 1
  Jump         L4
L3:
  Move         r37, r2
  // var tmp = []
  Const        r39, []
  // for g in groups {
  IterPrep     r40, r37
  Len          r41, r40
  Const        r42, 0
L8:
  Less         r43, r42, r41
  JumpIfFalse  r43, L5
  Index        r44, r40, r42
  Move         r33, r44
  // var total = 0
  Const        r46, 0
  // for x in g.items {
  Const        r47, "items"
  Index        r48, r33, r47
  IterPrep     r49, r48
  Len          r50, r49
  Const        r51, 0
L7:
  Less         r52, r51, r50
  JumpIfFalse  r52, L6
  Index        r53, r49, r51
  Move         r54, r53
  // total = total + x.val
  Const        r55, "val"
  Index        r56, r54, r55
  Move         r57, r56
  Move         r46, r57
  // for x in g.items {
  AddInt       r51, r51, r28
  Jump         L7
L6:
  // tmp = append(tmp, {tag: g.key, total: total})
  Const        r59, "key"
  Index        r60, r33, r59
  Const        r62, "tag"
  Move         r63, r60
  Const        r64, "total"
  Move         r65, r46
  MakeMap      r66, 2, r62
  Append       r67, r39, r66
  Move         r39, r67
  // for g in groups {
  AddInt       r42, r42, r28
  Jump         L8
L5:
  // let result = from r in tmp sort by r.tag select r
  Const        r68, []
  IterPrep     r69, r39
  Len          r70, r69
  Const        r71, 0
L10:
  Less         r72, r71, r70
  JumpIfFalse  r72, L9
  Index        r73, r69, r71
  Move         r74, r73
  Const        r75, "tag"
  Index        r76, r74, r75
  Move         r77, r76
  Move         r78, r74
  MakeList     r79, 2, r77
  Append       r80, r68, r79
  Move         r68, r80
  AddInt       r71, r71, r28
  Jump         L10
L9:
  Sort         r81, r68
  Move         r68, r81
  Move         r82, r68
  // print(result)
  Print        r82
  Return       r0
