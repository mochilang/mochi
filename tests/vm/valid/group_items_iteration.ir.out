func main (regs=75)
  // let data = [
  Const        r0, [{"tag": "a", "val": 1}, {"tag": "a", "val": 2}, {"tag": "b", "val": 3}]
  // let groups = from d in data group by d.tag into g select g
  Const        r1, []
  Const        r2, "tag"
  IterPrep     r3, r0
  Len          r4, r3
  Const        r5, 0
  MakeMap      r6, 0, r0
  Const        r7, []
L2:
  LessInt      r8, r5, r4
  JumpIfFalse  r8, L0
  Index        r9, r3, r5
  Index        r11, r9, r2
  Str          r12, r11
  In           r13, r12, r6
  JumpIfTrue   r13, L1
  Const        r14, "__group__"
  Const        r15, true
  Const        r16, []
  Const        r17, "items"
  MakeMap      r19, 2, r14
  SetIndex     r6, r12, r19
  Append       r7, r7, r19
L1:
  Index        r21, r6, r12
  Index        r22, r21, r17
  Append       r23, r22, r9
  SetIndex     r21, r17, r23
  Const        r24, 1
  AddInt       r5, r5, r24
  Jump         L2
L0:
  Const        r26, 0
  Move         r25, r26
  Len          r27, r7
L4:
  LessInt      r28, r25, r27
  JumpIfFalse  r28, L3
  Index        r30, r7, r25
  Append       r1, r1, r30
  AddInt       r25, r25, r24
  Jump         L4
L3:
  // var tmp = []
  Const        r33, []
  // for g in groups {
  IterPrep     r34, r1
  Len          r35, r34
  Const        r36, 0
L8:
  Less         r37, r36, r35
  JumpIfFalse  r37, L5
  Index        r30, r34, r36
  // var total = 0
  Move         r39, r26
  // for x in g.items {
  Index        r40, r30, r17
  IterPrep     r41, r40
  Len          r42, r41
  Const        r43, 0
L7:
  Less         r44, r43, r42
  JumpIfFalse  r44, L6
  Index        r46, r41, r43
  // total = total + x.val
  Const        r47, "val"
  Index        r48, r46, r47
  Add          r39, r39, r48
  // for x in g.items {
  Const        r50, 1
  Add          r43, r43, r50
  Jump         L7
L6:
  // tmp = append(tmp, {tag: g.key, total: total})
  Const        r52, "tag"
  Const        r53, "key"
  Index        r54, r30, r53
  Const        r55, "total"
  MakeMap      r58, 2, r52
  Append       r33, r33, r58
  // for g in groups {
  Const        r60, 1
  Add          r36, r36, r60
  Jump         L8
L5:
  // let result = from r in tmp sort by r.tag select r
  Const        r62, []
  IterPrep     r63, r33
  Len          r64, r63
  Move         r65, r26
L10:
  LessInt      r66, r65, r64
  JumpIfFalse  r66, L9
  Index        r68, r63, r65
  Index        r70, r68, r2
  Move         r71, r68
  MakeList     r72, 2, r70
  Append       r62, r62, r72
  AddInt       r65, r65, r24
  Jump         L10
L9:
  Sort         r62, r62
  // print(result)
  Print        r62
  Return       r0
