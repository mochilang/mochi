func main (regs=63)
  // let people = [
  Const        r0, [{"city": "Paris", "name": "Alice"}, {"city": "Paris", "name": "Bob"}, {"city": "Hanoi", "name": "Charlie"}]
  Move         r1, r0
  // let stats = from p in people
  Const        r2, []
  IterPrep     r3, r1
  Len          r4, r3
  Const        r5, 0
  MakeMap      r6, 0, r0
  Const        r7, []
L2:
  Less         r8, r5, r4
  JumpIfFalse  r8, L0
  Index        r9, r3, r5
  Move         r10, r9
  // group by p.city into g
  Const        r11, "city"
  Index        r12, r10, r11
  Str          r13, r12
  In           r14, r13, r6
  JumpIfTrue   r14, L1
  // let stats = from p in people
  Const        r15, []
  Const        r16, "__group__"
  Const        r17, true
  Const        r18, "key"
  // group by p.city into g
  Move         r19, r12
  // let stats = from p in people
  Const        r20, "items"
  Move         r21, r15
  // group by p.city into g
  Const        r22, "city"
  Move         r23, r12
  // let stats = from p in people
  MakeMap      r24, 4, r16
  SetIndex     r6, r13, r24
  Append       r25, r7, r24
  Move         r7, r25
L1:
  Const        r26, "items"
  Index        r27, r6, r13
  Index        r28, r27, r26
  Append       r29, r28, r9
  SetIndex     r27, r26, r29
  Const        r30, 1
  Add          r31, r5, r30
  Move         r5, r31
  Jump         L2
L0:
  Const        r32, 0
  Len          r33, r7
L4:
  Less         r34, r32, r33
  JumpIfFalse  r34, L3
  Index        r35, r7, r32
  Move         r36, r35
  Const        r37, "city"
  Index        r38, r35, r37
  Const        r39, "city"
  Index        r40, r35, r39
  // city_from_var: city,
  Const        r41, "city_from_var"
  // city_from_field: g.city,
  Const        r42, "city_from_field"
  Const        r43, "city"
  Index        r44, r36, r43
  // city_from_key: g.key,
  Const        r45, "city_from_key"
  Const        r46, "key"
  Index        r47, r36, r46
  // count: count(g)
  Const        r48, "count"
  Count        r49, r36
  // city_from_var: city,
  Move         r50, r41
  Move         r51, r40
  // city_from_field: g.city,
  Move         r52, r42
  Move         r53, r44
  // city_from_key: g.key,
  Move         r54, r45
  Move         r55, r47
  // count: count(g)
  Move         r56, r48
  Move         r57, r49
  // select {
  MakeMap      r58, 4, r50
  // let stats = from p in people
  Append       r59, r2, r58
  Move         r2, r59
  Const        r60, 1
  Add          r61, r32, r60
  Move         r32, r61
  Jump         L4
L3:
  Move         r62, r2
  // print(stats)
  Print        r62
  Return       r0

