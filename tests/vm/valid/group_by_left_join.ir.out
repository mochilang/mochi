func main (regs=32)
  // let customers = [
  Const        r0, [{"id": 1, "name": "Alice"}, {"id": 2, "name": "Bob"}, {"id": 3, "name": "Charlie"}]
  // let orders = [
  Const        r1, [{"customerId": 1, "id": 100}, {"customerId": 1, "id": 101}, {"customerId": 2, "id": 102}]
  // let stats = from c in customers
  Const        r2, []
L10:
  // group by c.name into g
  Const        r3, "name"
  // name: g.key,
  Const        r4, "key"
  // count: count(from r in g where r.o select r)
  Const        r5, "count"
  Const        r6, "o"
  // let stats = from c in customers
  MakeMap      r7, 0, r0
  Move         r8, r2
  Const        r9, 0
  IterPrep     r10, r0
  Len          r11, r10
L11:
  Move         r12, r9
L7:
  LessInt      r13, r12, r11
  JumpIfFalse  r13, L0
L4:
  Index        r11, r10, r12
  // left join o in orders on o.customerId == c.id
  IterPrep     r10, r1
L2:
  Len          r1, r10
  Move         r14, r9
  LessInt      r15, r14, r1
  JumpIfFalse  r15, L1
L1:
  Index        r1, r10, r14
  Const        r10, false
  Const        r16, "customerId"
  Index        r17, r1, r16
  Const        r16, "id"
L5:
  Index        r18, r11, r16
  Equal        r16, r17, r18
  JumpIfFalse  r16, L2
  Const        r10, true
  // let stats = from c in customers
  Const        r16, "c"
L3:
  Move         r18, r11
  Move         r17, r1
  MakeMap      r1, 2, r16
  // group by c.name into g
  Index        r19, r11, r3
  Str          r20, r19
  In           r21, r20, r7
  JumpIfTrue   r21, L3
  // let stats = from c in customers
  Move         r21, r2
  Const        r22, "__group__"
  Move         r23, r10
  Move         r24, r4
  // group by c.name into g
  Move         r25, r19
  // let stats = from c in customers
  Const        r19, "items"
  Move         r26, r21
  Move         r27, r5
  Move         r28, r14
  Move         r29, r22
  Move         r30, r23
  Move         r23, r24
  Move         r24, r25
  Move         r25, r19
  Move         r31, r26
  Move         r26, r27
  Move         r27, r28
  MakeMap      r28, 4, r29
  SetIndex     r7, r20, r9
  Append       r8, r8, r28
  Const        r28, 1
  AddInt       r9, r9, r28
  Move         r27, r19
  Index        r26, r7, r20
  Index        r20, r8, r26
  Index        r26, r20, r27
  Append       r31, r26, r1
  SetIndex     r20, r27, r31
  Index        r31, r20, r5
  AddInt       r26, r31, r28
  SetIndex     r20, r5, r26
  // left join o in orders on o.customerId == c.id
  AddInt       r14, r14, r28
  Jump         L4
  Move         r26, r10
  JumpIfTrue   r26, L5
  // let stats = from c in customers
  MakeMap      r26, 2, r16
  // group by c.name into g
  Index        r1, r11, r3
  Str          r11, r1
  In           r17, r11, r7
  JumpIfTrue   r17, L6
  // let stats = from c in customers
  Move         r17, r21
  Move         r21, r22
  Move         r22, r10
  Move         r10, r4
  // group by c.name into g
  Move         r18, r1
  // let stats = from c in customers
  Move         r1, r19
  Move         r19, r17
  Move         r17, r5
  Const        r16, 0
  Move         r31, r21
  Move         r21, r22
  Move         r22, r10
  Move         r10, r18
  Move         r18, r1
  Move         r1, r19
  Move         r19, r17
  Move         r20, r16
  MakeMap      r15, 4, r31
  SetIndex     r7, r11, r9
  Append       r8, r8, r15
  AddInt       r9, r9, r28
L6:
  Index        r15, r7, r11
  Index        r11, r8, r15
  Index        r15, r11, r27
  Append       r7, r15, r26
  SetIndex     r11, r27, r7
  Index        r7, r11, r5
  AddInt       r15, r7, r28
  SetIndex     r11, r5, r15
  AddInt       r12, r12, r28
  Jump         L7
L0:
  Move         r15, r16
  Move         r7, r15
  Len          r11, r8
  LessInt      r13, r7, r11
  JumpIfFalse  r13, L8
  Index        r13, r8, r7
  // name: g.key,
  Move         r8, r3
  Index        r11, r13, r4
  // count: count(from r in g where r.o select r)
  Move         r4, r17
  Move         r17, r2
  IterPrep     r12, r13
  Len          r13, r12
  Move         r26, r15
  LessInt      r15, r26, r13
  JumpIfFalse  r15, L9
  Index        r15, r12, r26
  Index        r12, r15, r6
  JumpIfFalse  r12, L10
  Append       r17, r17, r15
  AddInt       r26, r26, r28
  Jump         L11
L9:
  Count        r15, r17
  // name: g.key,
  Move         r17, r8
  Move         r8, r11
  // count: count(from r in g where r.o select r)
  Move         r11, r4
  Move         r4, r15
  // select {
  MakeMap      r15, 2, r17
  // let stats = from c in customers
  Append       r2, r2, r15
  AddInt       r7, r7, r28
  Jump         L4
L8:
  // print("--- Group Left Join ---")
  Const        r15, "--- Group Left Join ---"
  Print        r15
  // for s in stats {
  IterPrep     r15, r2
  Len          r12, r15
  Move         r2, r16
L13:
  Less         r16, r2, r12
  JumpIfFalse  r16, L12
  Index        r16, r15, r2
  // print(s.name, "orders:", s.count)
  Index        r15, r16, r3
  Const        r3, "orders:"
  Index        r12, r16, r5
  PrintN       r15, 3, r15
  // for s in stats {
  Add          r2, r2, r28
  Jump         L13
L12:
  Return       r0
