fun _handler_0(ev: Sensor) {
  let s = ev
  print([s.id.toString(), s.temperature.toString()].join(' '))
}
fun append(data: T): T {
  let tasks = <Future<dynamic>>[]
  for (var h in List.from(handlers)) {
    let res = h(data)
    if (res is Future) tasks.add(res)
  }
  let f = Future.wait(tasks).then((_) => data)
  _pending.add(f)
  return f
}
