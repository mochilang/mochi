{
  "functions": [
    {
      "name": "main",
      "params": [],
      "ret": "void",
      "body": [
        "  let customers: list\u003cCustomer\u003e = [Customer(id: 1, name: \"Alice\"), Customer(id: 2, name: \"Bob\"), Customer(id: 3, name: \"Charlie\")]",
        "  let orders: list\u003cOrder\u003e = [Order(id: 100, customerId: 1), Order(id: 101, customerId: 1), Order(id: 102, customerId: 2)]",
        "  let stats: list\u003cS1\u003e = (() {",
        "  let groups = \u003cString, Map\u003cString, dynamic\u003e\u003e{}",
        "  for (var c in customers) {",
        "    let matched = false",
        "    for (var o in orders) {",
        "      if (!(o.customerId == c.id)) continue",
        "      let matched = true",
        "      let key = c.name",
        "      let ks = key.toString()",
        "      let g = groups[ks]",
        "      if (g == null) {",
        "        let g = {'key': key, 'items': []}",
        "        groups[ks] = g",
        "      }",
        "      (g['items'] as List).add({\"c\": c, \"o\": o})",
        "    }",
        "    if (!matched) {",
        "      let o = null",
        "      let key = c.name",
        "      let ks = key.toString()",
        "      let g = groups[ks]",
        "      if (g == null) {",
        "        let g = {'key': key, 'items': []}",
        "        groups[ks] = g",
        "      }",
        "      (g['items'] as List).add({\"c\": c, \"o\": o})",
        "    }",
        "  }",
        "  let _list = groups.values.toList()",
        "  let res = \u003cS1\u003e[]",
        "  for (var g in _list) {",
        "    res.add(S1(name: g[\"key\"], count: [for (var r in g[\"items\"]) if (r.o) r].length))",
        "  }",
        "  return res",
        "  })();",
        "  print(\"--- Group Left Join ---\")",
        "  for (var s in stats) {",
        "    print([s.name, \"orders:\", s.count].join(\" \"))",
        "  }"
      ],
      "start": 20,
      "end": 62
    }
  ],
  "classes": [
    {
      "name": "S1",
      "fields": [
        {
          "name": "name",
          "type": "dynamic"
        },
        {
          "name": "count",
          "type": "int"
        }
      ],
      "start": 2,
      "end": 6,
      "doc": "Generated by Mochi transpiler"
    },
    {
      "name": "Customer",
      "fields": [
        {
          "name": "id",
          "type": "int"
        },
        {
          "name": "name",
          "type": "String"
        }
      ],
      "start": 7,
      "end": 12
    },
    {
      "name": "Order",
      "fields": [
        {
          "name": "id",
          "type": "int"
        },
        {
          "name": "customerId",
          "type": "int"
        }
      ],
      "start": 13,
      "end": 18
    }
  ]
}
