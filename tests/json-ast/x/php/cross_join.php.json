{
  "root": {
    "kind": "AST_STMT_LIST",
    "flags": 0,
    "lineno": 1,
    "children": [
      {
        "kind": "AST_ASSIGN",
        "flags": 0,
        "lineno": 2,
        "children": {
          "var": {
            "kind": "AST_VAR",
            "flags": 0,
            "lineno": 2,
            "children": {
              "name": "customers"
            }
          },
          "expr": {
            "kind": "AST_ARRAY",
            "flags": 3,
            "lineno": 2,
            "children": [
              {
                "kind": "AST_ARRAY_ELEM",
                "flags": 0,
                "lineno": 2,
                "children": {
                  "value": {
                    "kind": "AST_ARRAY",
                    "flags": 3,
                    "lineno": 2,
                    "children": [
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 2,
                        "children": {
                          "value": 1,
                          "key": "id"
                        }
                      },
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 2,
                        "children": {
                          "value": "Alice",
                          "key": "name"
                        }
                      }
                    ]
                  },
                  "key": null
                }
              },
              {
                "kind": "AST_ARRAY_ELEM",
                "flags": 0,
                "lineno": 2,
                "children": {
                  "value": {
                    "kind": "AST_ARRAY",
                    "flags": 3,
                    "lineno": 2,
                    "children": [
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 2,
                        "children": {
                          "value": 2,
                          "key": "id"
                        }
                      },
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 2,
                        "children": {
                          "value": "Bob",
                          "key": "name"
                        }
                      }
                    ]
                  },
                  "key": null
                }
              },
              {
                "kind": "AST_ARRAY_ELEM",
                "flags": 0,
                "lineno": 2,
                "children": {
                  "value": {
                    "kind": "AST_ARRAY",
                    "flags": 3,
                    "lineno": 2,
                    "children": [
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 2,
                        "children": {
                          "value": 3,
                          "key": "id"
                        }
                      },
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 2,
                        "children": {
                          "value": "Charlie",
                          "key": "name"
                        }
                      }
                    ]
                  },
                  "key": null
                }
              }
            ]
          }
        }
      },
      {
        "kind": "AST_ASSIGN",
        "flags": 0,
        "lineno": 3,
        "children": {
          "var": {
            "kind": "AST_VAR",
            "flags": 0,
            "lineno": 3,
            "children": {
              "name": "orders"
            }
          },
          "expr": {
            "kind": "AST_ARRAY",
            "flags": 3,
            "lineno": 3,
            "children": [
              {
                "kind": "AST_ARRAY_ELEM",
                "flags": 0,
                "lineno": 3,
                "children": {
                  "value": {
                    "kind": "AST_ARRAY",
                    "flags": 3,
                    "lineno": 3,
                    "children": [
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 3,
                        "children": {
                          "value": 100,
                          "key": "id"
                        }
                      },
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 3,
                        "children": {
                          "value": 1,
                          "key": "customerId"
                        }
                      },
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 3,
                        "children": {
                          "value": 250,
                          "key": "total"
                        }
                      }
                    ]
                  },
                  "key": null
                }
              },
              {
                "kind": "AST_ARRAY_ELEM",
                "flags": 0,
                "lineno": 3,
                "children": {
                  "value": {
                    "kind": "AST_ARRAY",
                    "flags": 3,
                    "lineno": 3,
                    "children": [
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 3,
                        "children": {
                          "value": 101,
                          "key": "id"
                        }
                      },
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 3,
                        "children": {
                          "value": 2,
                          "key": "customerId"
                        }
                      },
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 3,
                        "children": {
                          "value": 125,
                          "key": "total"
                        }
                      }
                    ]
                  },
                  "key": null
                }
              },
              {
                "kind": "AST_ARRAY_ELEM",
                "flags": 0,
                "lineno": 3,
                "children": {
                  "value": {
                    "kind": "AST_ARRAY",
                    "flags": 3,
                    "lineno": 3,
                    "children": [
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 3,
                        "children": {
                          "value": 102,
                          "key": "id"
                        }
                      },
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 3,
                        "children": {
                          "value": 1,
                          "key": "customerId"
                        }
                      },
                      {
                        "kind": "AST_ARRAY_ELEM",
                        "flags": 0,
                        "lineno": 3,
                        "children": {
                          "value": 300,
                          "key": "total"
                        }
                      }
                    ]
                  },
                  "key": null
                }
              }
            ]
          }
        }
      },
      {
        "kind": "AST_ASSIGN",
        "flags": 0,
        "lineno": 4,
        "children": {
          "var": {
            "kind": "AST_VAR",
            "flags": 0,
            "lineno": 4,
            "children": {
              "name": "result"
            }
          },
          "expr": {
            "kind": "AST_ARRAY",
            "flags": 3,
            "lineno": 4
          }
        }
      },
      {
        "kind": "AST_FOREACH",
        "flags": 0,
        "lineno": 5,
        "children": {
          "expr": {
            "kind": "AST_VAR",
            "flags": 0,
            "lineno": 5,
            "children": {
              "name": "orders"
            }
          },
          "value": {
            "kind": "AST_VAR",
            "flags": 0,
            "lineno": 5,
            "children": {
              "name": "o"
            }
          },
          "key": null,
          "stmts": {
            "kind": "AST_STMT_LIST",
            "flags": 0,
            "lineno": 5,
            "children": [
              {
                "kind": "AST_FOREACH",
                "flags": 0,
                "lineno": 6,
                "children": {
                  "expr": {
                    "kind": "AST_VAR",
                    "flags": 0,
                    "lineno": 6,
                    "children": {
                      "name": "customers"
                    }
                  },
                  "value": {
                    "kind": "AST_VAR",
                    "flags": 0,
                    "lineno": 6,
                    "children": {
                      "name": "c"
                    }
                  },
                  "key": null,
                  "stmts": {
                    "kind": "AST_STMT_LIST",
                    "flags": 0,
                    "lineno": 6,
                    "children": [
                      {
                        "kind": "AST_ASSIGN",
                        "flags": 0,
                        "lineno": 7,
                        "children": {
                          "var": {
                            "kind": "AST_DIM",
                            "flags": 0,
                            "lineno": 7,
                            "children": {
                              "expr": {
                                "kind": "AST_VAR",
                                "flags": 0,
                                "lineno": 7,
                                "children": {
                                  "name": "result"
                                }
                              },
                              "dim": null
                            }
                          },
                          "expr": {
                            "kind": "AST_ARRAY",
                            "flags": 3,
                            "lineno": 7,
                            "children": [
                              {
                                "kind": "AST_ARRAY_ELEM",
                                "flags": 0,
                                "lineno": 7,
                                "children": {
                                  "value": {
                                    "kind": "AST_DIM",
                                    "flags": 0,
                                    "lineno": 7,
                                    "children": {
                                      "expr": {
                                        "kind": "AST_VAR",
                                        "flags": 0,
                                        "lineno": 7,
                                        "children": {
                                          "name": "o"
                                        }
                                      },
                                      "dim": "id"
                                    }
                                  },
                                  "key": "orderId"
                                }
                              },
                              {
                                "kind": "AST_ARRAY_ELEM",
                                "flags": 0,
                                "lineno": 7,
                                "children": {
                                  "value": {
                                    "kind": "AST_DIM",
                                    "flags": 0,
                                    "lineno": 7,
                                    "children": {
                                      "expr": {
                                        "kind": "AST_VAR",
                                        "flags": 0,
                                        "lineno": 7,
                                        "children": {
                                          "name": "o"
                                        }
                                      },
                                      "dim": "customerId"
                                    }
                                  },
                                  "key": "orderCustomerId"
                                }
                              },
                              {
                                "kind": "AST_ARRAY_ELEM",
                                "flags": 0,
                                "lineno": 7,
                                "children": {
                                  "value": {
                                    "kind": "AST_DIM",
                                    "flags": 0,
                                    "lineno": 7,
                                    "children": {
                                      "expr": {
                                        "kind": "AST_VAR",
                                        "flags": 0,
                                        "lineno": 7,
                                        "children": {
                                          "name": "c"
                                        }
                                      },
                                      "dim": "name"
                                    }
                                  },
                                  "key": "pairedCustomerName"
                                }
                              },
                              {
                                "kind": "AST_ARRAY_ELEM",
                                "flags": 0,
                                "lineno": 7,
                                "children": {
                                  "value": {
                                    "kind": "AST_DIM",
                                    "flags": 0,
                                    "lineno": 7,
                                    "children": {
                                      "expr": {
                                        "kind": "AST_VAR",
                                        "flags": 0,
                                        "lineno": 7,
                                        "children": {
                                          "name": "o"
                                        }
                                      },
                                      "dim": "total"
                                    }
                                  },
                                  "key": "orderTotal"
                                }
                              }
                            ]
                          }
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "kind": "AST_ECHO",
        "flags": 0,
        "lineno": 11,
        "children": {
          "expr": "--- Cross Join: All order-customer pairs ---"
        }
      },
      {
        "kind": "AST_ECHO",
        "flags": 0,
        "lineno": 11,
        "children": {
          "expr": {
            "kind": "AST_CONST",
            "flags": 0,
            "lineno": 11,
            "children": {
              "name": {
                "kind": "AST_NAME",
                "flags": 1,
                "lineno": 11,
                "children": {
                  "name": "PHP_EOL"
                }
              }
            }
          }
        }
      },
      {
        "kind": "AST_FOREACH",
        "flags": 0,
        "lineno": 12,
        "children": {
          "expr": {
            "kind": "AST_VAR",
            "flags": 0,
            "lineno": 12,
            "children": {
              "name": "result"
            }
          },
          "value": {
            "kind": "AST_VAR",
            "flags": 0,
            "lineno": 12,
            "children": {
              "name": "entry"
            }
          },
          "key": null,
          "stmts": {
            "kind": "AST_STMT_LIST",
            "flags": 0,
            "lineno": 12,
            "children": [
              {
                "kind": "AST_ECHO",
                "flags": 0,
                "lineno": 13,
                "children": {
                  "expr": {
                    "kind": "AST_BINARY_OP",
                    "flags": 8,
                    "lineno": 13,
                    "children": {
                      "left": {
                        "kind": "AST_BINARY_OP",
                        "flags": 8,
                        "lineno": 13,
                        "children": {
                          "left": {
                            "kind": "AST_BINARY_OP",
                            "flags": 8,
                            "lineno": 13,
                            "children": {
                              "left": {
                                "kind": "AST_BINARY_OP",
                                "flags": 8,
                                "lineno": 13,
                                "children": {
                                  "left": {
                                    "kind": "AST_BINARY_OP",
                                    "flags": 8,
                                    "lineno": 13,
                                    "children": {
                                      "left": {
                                        "kind": "AST_BINARY_OP",
                                        "flags": 8,
                                        "lineno": 13,
                                        "children": {
                                          "left": {
                                            "kind": "AST_BINARY_OP",
                                            "flags": 8,
                                            "lineno": 13,
                                            "children": {
                                              "left": {
                                                "kind": "AST_BINARY_OP",
                                                "flags": 8,
                                                "lineno": 13,
                                                "children": {
                                                  "left": {
                                                    "kind": "AST_BINARY_OP",
                                                    "flags": 8,
                                                    "lineno": 13,
                                                    "children": {
                                                      "left": {
                                                        "kind": "AST_BINARY_OP",
                                                        "flags": 8,
                                                        "lineno": 13,
                                                        "children": {
                                                          "left": {
                                                            "kind": "AST_BINARY_OP",
                                                            "flags": 8,
                                                            "lineno": 13,
                                                            "children": {
                                                              "left": {
                                                                "kind": "AST_BINARY_OP",
                                                                "flags": 8,
                                                                "lineno": 13,
                                                                "children": {
                                                                  "left": {
                                                                    "kind": "AST_BINARY_OP",
                                                                    "flags": 8,
                                                                    "lineno": 13,
                                                                    "children": {
                                                                      "left": "Order ",
                                                                      "right": {
                                                                        "kind": "AST_CONDITIONAL",
                                                                        "flags": 1,
                                                                        "lineno": 13,
                                                                        "children": {
                                                                          "cond": {
                                                                            "kind": "AST_CALL",
                                                                            "flags": 0,
                                                                            "lineno": 13,
                                                                            "children": {
                                                                              "expr": {
                                                                                "kind": "AST_NAME",
                                                                                "flags": 1,
                                                                                "lineno": 13,
                                                                                "children": {
                                                                                  "name": "is_float"
                                                                                }
                                                                              },
                                                                              "args": {
                                                                                "kind": "AST_ARG_LIST",
                                                                                "flags": 0,
                                                                                "lineno": 13,
                                                                                "children": [
                                                                                  {
                                                                                    "kind": "AST_DIM",
                                                                                    "flags": 0,
                                                                                    "lineno": 13,
                                                                                    "children": {
                                                                                      "expr": {
                                                                                        "kind": "AST_VAR",
                                                                                        "flags": 0,
                                                                                        "lineno": 13,
                                                                                        "children": {
                                                                                          "name": "entry"
                                                                                        }
                                                                                      },
                                                                                      "dim": "orderId"
                                                                                    }
                                                                                  }
                                                                                ]
                                                                              }
                                                                            }
                                                                          },
                                                                          "true": {
                                                                            "kind": "AST_CALL",
                                                                            "flags": 0,
                                                                            "lineno": 13,
                                                                            "children": {
                                                                              "expr": {
                                                                                "kind": "AST_NAME",
                                                                                "flags": 1,
                                                                                "lineno": 13,
                                                                                "children": {
                                                                                  "name": "json_encode"
                                                                                }
                                                                              },
                                                                              "args": {
                                                                                "kind": "AST_ARG_LIST",
                                                                                "flags": 0,
                                                                                "lineno": 13,
                                                                                "children": [
                                                                                  {
                                                                                    "kind": "AST_DIM",
                                                                                    "flags": 0,
                                                                                    "lineno": 13,
                                                                                    "children": {
                                                                                      "expr": {
                                                                                        "kind": "AST_VAR",
                                                                                        "flags": 0,
                                                                                        "lineno": 13,
                                                                                        "children": {
                                                                                          "name": "entry"
                                                                                        }
                                                                                      },
                                                                                      "dim": "orderId"
                                                                                    }
                                                                                  },
                                                                                  1344
                                                                                ]
                                                                              }
                                                                            }
                                                                          },
                                                                          "false": {
                                                                            "kind": "AST_DIM",
                                                                            "flags": 0,
                                                                            "lineno": 13,
                                                                            "children": {
                                                                              "expr": {
                                                                                "kind": "AST_VAR",
                                                                                "flags": 0,
                                                                                "lineno": 13,
                                                                                "children": {
                                                                                  "name": "entry"
                                                                                }
                                                                              },
                                                                              "dim": "orderId"
                                                                            }
                                                                          }
                                                                        }
                                                                      }
                                                                    }
                                                                  },
                                                                  "right": " "
                                                                }
                                                              },
                                                              "right": "(customerId:"
                                                            }
                                                          },
                                                          "right": " "
                                                        }
                                                      },
                                                      "right": {
                                                        "kind": "AST_CONDITIONAL",
                                                        "flags": 1,
                                                        "lineno": 13,
                                                        "children": {
                                                          "cond": {
                                                            "kind": "AST_CALL",
                                                            "flags": 0,
                                                            "lineno": 13,
                                                            "children": {
                                                              "expr": {
                                                                "kind": "AST_NAME",
                                                                "flags": 1,
                                                                "lineno": 13,
                                                                "children": {
                                                                  "name": "is_float"
                                                                }
                                                              },
                                                              "args": {
                                                                "kind": "AST_ARG_LIST",
                                                                "flags": 0,
                                                                "lineno": 13,
                                                                "children": [
                                                                  {
                                                                    "kind": "AST_DIM",
                                                                    "flags": 0,
                                                                    "lineno": 13,
                                                                    "children": {
                                                                      "expr": {
                                                                        "kind": "AST_VAR",
                                                                        "flags": 0,
                                                                        "lineno": 13,
                                                                        "children": {
                                                                          "name": "entry"
                                                                        }
                                                                      },
                                                                      "dim": "orderCustomerId"
                                                                    }
                                                                  }
                                                                ]
                                                              }
                                                            }
                                                          },
                                                          "true": {
                                                            "kind": "AST_CALL",
                                                            "flags": 0,
                                                            "lineno": 13,
                                                            "children": {
                                                              "expr": {
                                                                "kind": "AST_NAME",
                                                                "flags": 1,
                                                                "lineno": 13,
                                                                "children": {
                                                                  "name": "json_encode"
                                                                }
                                                              },
                                                              "args": {
                                                                "kind": "AST_ARG_LIST",
                                                                "flags": 0,
                                                                "lineno": 13,
                                                                "children": [
                                                                  {
                                                                    "kind": "AST_DIM",
                                                                    "flags": 0,
                                                                    "lineno": 13,
                                                                    "children": {
                                                                      "expr": {
                                                                        "kind": "AST_VAR",
                                                                        "flags": 0,
                                                                        "lineno": 13,
                                                                        "children": {
                                                                          "name": "entry"
                                                                        }
                                                                      },
                                                                      "dim": "orderCustomerId"
                                                                    }
                                                                  },
                                                                  1344
                                                                ]
                                                              }
                                                            }
                                                          },
                                                          "false": {
                                                            "kind": "AST_DIM",
                                                            "flags": 0,
                                                            "lineno": 13,
                                                            "children": {
                                                              "expr": {
                                                                "kind": "AST_VAR",
                                                                "flags": 0,
                                                                "lineno": 13,
                                                                "children": {
                                                                  "name": "entry"
                                                                }
                                                              },
                                                              "dim": "orderCustomerId"
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  },
                                                  "right": " "
                                                }
                                              },
                                              "right": ", total: $"
                                            }
                                          },
                                          "right": " "
                                        }
                                      },
                                      "right": {
                                        "kind": "AST_CONDITIONAL",
                                        "flags": 1,
                                        "lineno": 13,
                                        "children": {
                                          "cond": {
                                            "kind": "AST_CALL",
                                            "flags": 0,
                                            "lineno": 13,
                                            "children": {
                                              "expr": {
                                                "kind": "AST_NAME",
                                                "flags": 1,
                                                "lineno": 13,
                                                "children": {
                                                  "name": "is_float"
                                                }
                                              },
                                              "args": {
                                                "kind": "AST_ARG_LIST",
                                                "flags": 0,
                                                "lineno": 13,
                                                "children": [
                                                  {
                                                    "kind": "AST_DIM",
                                                    "flags": 0,
                                                    "lineno": 13,
                                                    "children": {
                                                      "expr": {
                                                        "kind": "AST_VAR",
                                                        "flags": 0,
                                                        "lineno": 13,
                                                        "children": {
                                                          "name": "entry"
                                                        }
                                                      },
                                                      "dim": "orderTotal"
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          },
                                          "true": {
                                            "kind": "AST_CALL",
                                            "flags": 0,
                                            "lineno": 13,
                                            "children": {
                                              "expr": {
                                                "kind": "AST_NAME",
                                                "flags": 1,
                                                "lineno": 13,
                                                "children": {
                                                  "name": "json_encode"
                                                }
                                              },
                                              "args": {
                                                "kind": "AST_ARG_LIST",
                                                "flags": 0,
                                                "lineno": 13,
                                                "children": [
                                                  {
                                                    "kind": "AST_DIM",
                                                    "flags": 0,
                                                    "lineno": 13,
                                                    "children": {
                                                      "expr": {
                                                        "kind": "AST_VAR",
                                                        "flags": 0,
                                                        "lineno": 13,
                                                        "children": {
                                                          "name": "entry"
                                                        }
                                                      },
                                                      "dim": "orderTotal"
                                                    }
                                                  },
                                                  1344
                                                ]
                                              }
                                            }
                                          },
                                          "false": {
                                            "kind": "AST_DIM",
                                            "flags": 0,
                                            "lineno": 13,
                                            "children": {
                                              "expr": {
                                                "kind": "AST_VAR",
                                                "flags": 0,
                                                "lineno": 13,
                                                "children": {
                                                  "name": "entry"
                                                }
                                              },
                                              "dim": "orderTotal"
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "right": " "
                                }
                              },
                              "right": ") paired with"
                            }
                          },
                          "right": " "
                        }
                      },
                      "right": {
                        "kind": "AST_CONDITIONAL",
                        "flags": 1,
                        "lineno": 13,
                        "children": {
                          "cond": {
                            "kind": "AST_CALL",
                            "flags": 0,
                            "lineno": 13,
                            "children": {
                              "expr": {
                                "kind": "AST_NAME",
                                "flags": 1,
                                "lineno": 13,
                                "children": {
                                  "name": "is_float"
                                }
                              },
                              "args": {
                                "kind": "AST_ARG_LIST",
                                "flags": 0,
                                "lineno": 13,
                                "children": [
                                  {
                                    "kind": "AST_DIM",
                                    "flags": 0,
                                    "lineno": 13,
                                    "children": {
                                      "expr": {
                                        "kind": "AST_VAR",
                                        "flags": 0,
                                        "lineno": 13,
                                        "children": {
                                          "name": "entry"
                                        }
                                      },
                                      "dim": "pairedCustomerName"
                                    }
                                  }
                                ]
                              }
                            }
                          },
                          "true": {
                            "kind": "AST_CALL",
                            "flags": 0,
                            "lineno": 13,
                            "children": {
                              "expr": {
                                "kind": "AST_NAME",
                                "flags": 1,
                                "lineno": 13,
                                "children": {
                                  "name": "json_encode"
                                }
                              },
                              "args": {
                                "kind": "AST_ARG_LIST",
                                "flags": 0,
                                "lineno": 13,
                                "children": [
                                  {
                                    "kind": "AST_DIM",
                                    "flags": 0,
                                    "lineno": 13,
                                    "children": {
                                      "expr": {
                                        "kind": "AST_VAR",
                                        "flags": 0,
                                        "lineno": 13,
                                        "children": {
                                          "name": "entry"
                                        }
                                      },
                                      "dim": "pairedCustomerName"
                                    }
                                  },
                                  1344
                                ]
                              }
                            }
                          },
                          "false": {
                            "kind": "AST_DIM",
                            "flags": 0,
                            "lineno": 13,
                            "children": {
                              "expr": {
                                "kind": "AST_VAR",
                                "flags": 0,
                                "lineno": 13,
                                "children": {
                                  "name": "entry"
                                }
                              },
                              "dim": "pairedCustomerName"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              },
              {
                "kind": "AST_ECHO",
                "flags": 0,
                "lineno": 13,
                "children": {
                  "expr": {
                    "kind": "AST_CONST",
                    "flags": 0,
                    "lineno": 13,
                    "children": {
                      "name": {
                        "kind": "AST_NAME",
                        "flags": 1,
                        "lineno": 13,
                        "children": {
                          "name": "PHP_EOL"
                        }
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }
    ]
  }
}
