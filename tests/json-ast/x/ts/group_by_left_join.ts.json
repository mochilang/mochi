{
  "nodes": [
    {
      "kind": "type",
      "name": "Result",
      "node": "InterfaceDeclaration",
      "fields": [
        {
          "name": "id",
          "typ": "number"
        },
        {
          "name": "name",
          "typ": "string"
        }
      ],
      "start": 3,
      "end": 3,
      "endCol": 52,
      "snippet": "export interface Result { id: number; name: string }",
      "startOff": 61,
      "endOff": 113,
      "doc": "// Generated by Mochi v0.10.35 on 2025-07-22 14:07:04 GMT+7"
    },
    {
      "kind": "type",
      "name": "Customer",
      "node": "InterfaceDeclaration",
      "fields": [
        {
          "name": "id",
          "typ": "number"
        },
        {
          "name": "name",
          "typ": "string"
        }
      ],
      "start": 4,
      "end": 4,
      "endCol": 54,
      "snippet": "export interface Customer { id: number; name: string }",
      "startOff": 114,
      "endOff": 168
    },
    {
      "kind": "type",
      "name": "Order",
      "node": "InterfaceDeclaration",
      "fields": [
        {
          "name": "id",
          "typ": "number"
        },
        {
          "name": "customerId",
          "typ": "number"
        }
      ],
      "start": 5,
      "end": 5,
      "endCol": 57,
      "snippet": "export interface Order { id: number; customerId: number }",
      "startOff": 169,
      "endOff": 226
    },
    {
      "kind": "var",
      "name": "customers",
      "node": "VariableDeclaration",
      "ret": "Customer[]",
      "value": "[{id: 1, name: \"Alice\"}, {id: 2, name: \"Bob\"}, {id: 3, name: \"Charlie\"}]",
      "start": 6,
      "end": 6,
      "endCol": 103,
      "snippet": "const customers: Customer[] = [{id: 1, name: \"Alice\"}, {id: 2, name: \"Bob\"}, {id: 3, name: \"Charlie\"}];",
      "startOff": 227,
      "endOff": 330
    },
    {
      "kind": "var",
      "name": "orders",
      "node": "VariableDeclaration",
      "ret": "Order[]",
      "value": "[{id: 100, customerId: 1}, {id: 101, customerId: 1}, {id: 102, customerId: 2}]",
      "start": 7,
      "end": 7,
      "endCol": 103,
      "snippet": "const orders: Order[] = [{id: 100, customerId: 1}, {id: 101, customerId: 1}, {id: 102, customerId: 2}];",
      "startOff": 331,
      "endOff": 434
    },
    {
      "kind": "var",
      "name": "stats",
      "node": "VariableDeclaration",
      "ret": "Record\u003cstring, any\u003e[]",
      "value": "(() =\u003e {\n  const groups = new Map\u003cstring, {key: any; items: any[]}\u003e()\n  let rows = customers.map(v =\u003e [v])\n  { const joined = []\n    const arr = orders\n    for (const left of rows) {\n      const [c] = left;\n      let m = false;\n      for (let ri=0; ri \u003c arr.length; ri++) {\n        const o = arr[ri];\n        if (!((o[\"customerId\"] == c[\"id\"]))) continue;\n        m = true; joined.push([...left, o]) }\n      if (!m) joined.push([...left, null])\n    }\n    rows = joined;\n  }\n  for (const it of rows) {\n    const [c, o] = it;\n    const k = c[\"name\"]\n    const ks = JSON.stringify(k)\n    let g = groups.get(ks)\n    if (!g) { g = {key: k, items: []}; groups.set(ks, g) }\n    g.items.push({c, o})\n  }\n  let ordered = Array.from(groups.values())\n  const result: Result[] = []\n  for (const g of ordered) {\n    result.push({name: g[\"key\"], count: (Array.isArray((() =\u003e {\n  const result = []\n  for (const r of g[\"items\"]) {\n    if (r[\"o\"]) {\n      result.push(r)\n    }\n  }\n  const out = result\n  return out\n})()) || typeof (() =\u003e {\n  const result = []\n  for (const r of g[\"items\"]) {\n    if (r[\"o\"]) {\n      result.push(r)\n    }\n  }\n  const out = result\n  return out\n})() === 'string' ? (() =\u003e {\n  const result = []\n  for (const r of g[\"items\"]) {\n    if (r[\"o\"]) {\n      result.push(r)\n    }\n  }\n  const out = result\n  return out\n})().length : Object.keys((() =\u003e {\n  const result = []\n  for (const r of g[\"items\"]) {\n    if (r[\"o\"]) {\n      result.push(r)\n    }\n  }\n  const out = result\n  return out\n})() ?? {}).length)})\n  }\n  return result\n})()",
      "start": 8,
      "end": 74,
      "endCol": 5,
      "snippet": "const stats: Record\u003cstring, any\u003e[] = (() =\u003e {\n  const groups = new Map\u003cstring, {key: any; items: any[]}\u003e()\n  let rows = customers.map(v =\u003e [v])\n  { const joined = []\n    const arr = orders\n    for (const left of rows) {\n      const [c] = left;\n      let m = false;\n      for (let ri=0; ri \u003c arr.length; ri++) {\n        const o = arr[ri];\n        if (!((o[\"customerId\"] == c[\"id\"]))) continue;\n        m = true; joined.push([...left, o]) }\n      if (!m) joined.push([...left, null])\n    }\n    rows = joined;\n  }\n  for (const it of rows) {\n    const [c, o] = it;\n    const k = c[\"name\"]\n    const ks = JSON.stringify(k)\n    let g = groups.get(ks)\n    if (!g) { g = {key: k, items: []}; groups.set(ks, g) }\n    g.items.push({c, o})\n  }\n  let ordered = Array.from(groups.values())\n  const result: Result[] = []\n  for (const g of ordered) {\n    result.push({name: g[\"key\"], count: (Array.isArray((() =\u003e {\n  const result = []\n  for (const r of g[\"items\"]) {\n    if (r[\"o\"]) {\n      result.push(r)\n    }\n  }\n  const out = result\n  return out\n})()) || typeof (() =\u003e {\n  const result = []\n  for (const r of g[\"items\"]) {\n    if (r[\"o\"]) {\n      result.push(r)\n    }\n  }\n  const out = result\n  return out\n})() === 'string' ? (() =\u003e {\n  const result = []\n  for (const r of g[\"items\"]) {\n    if (r[\"o\"]) {\n      result.push(r)\n    }\n  }\n  const out = result\n  return out\n})().length : Object.keys((() =\u003e {\n  const result = []\n  for (const r of g[\"items\"]) {\n    if (r[\"o\"]) {\n      result.push(r)\n    }\n  }\n  const out = result\n  return out\n})() ?? {}).length)})\n  }\n  return result\n})();",
      "startOff": 435,
      "endOff": 2011
    },
    {
      "kind": "expr",
      "name": "",
      "node": "ExpressionStatement",
      "expr": "console.log(String(\"--- Group Left Join ---\"))",
      "start": 75,
      "end": 75,
      "endCol": 47,
      "snippet": "console.log(String(\"--- Group Left Join ---\"));",
      "startOff": 2012,
      "endOff": 2059
    },
    {
      "kind": "forof",
      "name": "",
      "node": "ForOfStatement",
      "body": "\n  console.log((String(s[\"name\"]) + \" \" + String(\"orders:\") + \" \" + String(s[\"count\"])).trim());\n",
      "iter": "s",
      "list": "stats",
      "bodyNodes": [
        {
          "kind": "expr",
          "name": "",
          "node": "ExpressionStatement",
          "expr": "console.log((String(s[\"name\"]) + \" \" + String(\"orders:\") + \" \" + String(s[\"count\"])).trim())",
          "start": 2,
          "startCol": 2,
          "end": 2,
          "endCol": 95,
          "snippet": "console.log((String(s[\"name\"]) + \" \" + String(\"orders:\") + \" \" + String(s[\"count\"])).trim());",
          "startOff": 3,
          "endOff": 96
        }
      ],
      "start": 76,
      "end": 78,
      "endCol": 1,
      "snippet": "for (const s of stats) {\n  console.log((String(s[\"name\"]) + \" \" + String(\"orders:\") + \" \" + String(s[\"count\"])).trim());\n}",
      "startOff": 2060,
      "endOff": 2182
    }
  ]
}
