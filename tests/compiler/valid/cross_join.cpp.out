// Original Mochi source:
// // cross_join.mochi
// type Customer {
//   id: int
//   name: string
// }
// 
// type Order {
//   id: int
//   customerId: int
//   total: int
// }
// 
// type PairInfo {
//   orderId: int
//   orderCustomerId: int
//   pairedCustomerName: string
//   orderTotal: int
// }
// 
// let customers = [
//   Customer { id: 1, name: "Alice" },
//   Customer { id: 2, name: "Bob" },
//   Customer { id: 3, name: "Charlie" }
// ]
// let orders = [
//   Order { id: 100, customerId: 1, total: 250 },
//   Order { id: 101, customerId: 2, total: 125 },
//   Order { id: 102, customerId: 1, total: 300 }
// ]
// let result = from o in orders
//              from c in customers
//              select PairInfo {
//                orderId: o.id,
//                orderCustomerId: o.customerId,
//                pairedCustomerName: c.name,
//                orderTotal: o.total
//              }
// print("--- Cross Join: All order-customer pairs ---")
// for entry in result {
//   print("Order", entry.orderId,
//         "(customerId:", entry.orderCustomerId,
//         ", total: $", entry.orderTotal,
//         ") paired with", entry.pairedCustomerName)
// }
// 

#include <bits/stdc++.h>
using namespace std;

// type Customer {
struct Customer {
    int id;
    string name;
};

// type Order {
struct Order {
    int id;
    int customerId;
    int total;
};

// type PairInfo {
struct PairInfo {
    int orderId;
    int orderCustomerId;
    string pairedCustomerName;
    int orderTotal;
};

int main() {
    // type Customer {
    // type Order {
    // type PairInfo {
    // let customers = [
    auto customers = vector<Customer>{Customer{1, string("Alice")}, Customer{2, string("Bob")}, Customer{3, string("Charlie")}};
    // let orders = [
    auto orders = vector<Order>{Order{100, 1, 250}, Order{101, 2, 125}, Order{102, 1, 300}};
    // let result = from o in orders
    auto result = ([&]() -> vector<PairInfo> {
    vector<PairInfo> _res;
    for (auto& o : orders) {
        for (auto& c : customers) {
            _res.push_back(PairInfo{o.id, o.customerId, c.name, o.total});
        }
    }
    return _res;
})();
    // print("--- Cross Join: All order-customer pairs ---")
    std::cout << (string("--- Cross Join: All order-customer pairs ---")) << std::endl;
    // for entry in result {
    for (const PairInfo& entry : result) {
        //   print("Order", entry.orderId,
        std::cout << (string("Order")) << " " << (entry.orderId) << " " << (string("(customerId:")) << " " << (entry.orderCustomerId) << " " << (string(", total: $")) << " " << (entry.orderTotal) << " " << (string(") paired with")) << " " << (entry.pairedCustomerName) << std::endl;
    }
    return 0;
}
