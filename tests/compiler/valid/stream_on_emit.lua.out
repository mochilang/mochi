-- Generated by Mochi Lua compiler

function main()
	local sensorStream = Stream.new("Sensor")
	local function _handler_0(ev)
		local s = ev
		print(s.id .. " " .. s.temperature)
	end
	sensorStream:register(_handler_0)
	sensorStream:append({id="sensor-1", temperature=22.500000})
end

Stream = {}
Stream.__index = Stream
function Stream.new(name) return setmetatable({name=name,handlers={}}, Stream) end
function Stream:append(data) for _,h in ipairs(self.handlers) do h(data) end end
function Stream:register(h) table.insert(self.handlers, h) end
if ... == nil then
	main()
end
