#!/usr/bin/env escript
-module(main).
-export([main/1]).
main(_) ->
  Code = "# Generated by Mochi Python compiler\nfrom __future__ import annotations\n\nimport dataclasses\nimport typing\n\n@dataclasses.dataclass\nclass Person:\n	name: str\n	age: int\n\npeople = [Person(name=\"Alice\", age=30), Person(name=\"Bob\", age=15), Person(name=\"Charlie\", age=65)]\nnames = None\n\ndef main():\n	people = [Person(name=\"Alice\", age=30), Person(name=\"Bob\", age=15), Person(name=\"Charlie\", age=65)]\n	names = [ p.name for p in people if (p.age >= 18) ]\n	for n in names:\n		print(n)\n\nif __name__ == \"__main__\":\n	main()\n",
  file:write_file('prog.py', Code),
  Out = os:cmd("python3 prog.py"),
  io:format("~s", [Out]).
