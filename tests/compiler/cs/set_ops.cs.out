// Generated by Mochi C# compiler
using System;
using System.Collections.Generic;
using System.IO;
using System.Net.Http;
using System.Text;
using System.Web;

public class Program {
	public static void Main() {
		long[] a = new [] { 1L, 2L, 3L };
		long[] b = new [] { 3L, 4L };
		Console.WriteLine(_union(a, b));
		Console.WriteLine(_except(a, b));
		Console.WriteLine(_intersect(a, b));
		Console.WriteLine(_union(new [] { 1L, 2L }, new [] { 2L, 3L }));
	}
	static List<dynamic> _union(IEnumerable<dynamic> a, IEnumerable<dynamic> b) {
		var res = new List<dynamic>();
		if (a != null) foreach (var it in a) if (!_in(it, res)) res.Add(it);
		if (b != null) foreach (var it in b) if (!_in(it, res)) res.Add(it);
		return res;
	}
	
	static bool _in(dynamic item, dynamic col) {
		if (col is string s && item is string sub) {
			return s.Contains(sub);
		}
		if (col is System.Collections.IDictionary d) {
			return d.Contains(item);
		}
		if (col is System.Collections.IEnumerable e) {
			foreach (var it in e) {
				if (Equals(it, item)) return true;
			}
			return false;
		}
		return false;
	}
	
	static List<dynamic> _except(IEnumerable<dynamic> a, IEnumerable<dynamic> b) {
		var res = new List<dynamic>();
		if (a != null) foreach (var it in a) if (!_in(it, b)) res.Add(it);
		return res;
	}
	
	static List<dynamic> _intersect(IEnumerable<dynamic> a, IEnumerable<dynamic> b) {
		var res = new List<dynamic>();
		if (a != null) foreach (var it in a) if (_in(it, b) && !_in(it, res)) res.Add(it);
		return res;
	}
	
}
