let customers = [alist->hash-table([cons("id", 1), cons("name", "Alice")]), alist->hash-table([cons("id", 2), cons("name", "Bob")])]
let orders = [alist->hash-table([cons("id", 100), cons("customerId", 1)]), alist->hash-table([cons("id", 101), cons("customerId", 1)]), alist->hash-table([cons("id", 102), cons("customerId", 2)])]
let stats = let(begin(for-each(lambda(o(), for-each(lambda(c(), if((hash-table-ref(o, "customerId") == hash-table-ref(c, "id")), let*(begin(if(not(g20), begin(set!(g20, alist->hash-table([cons("key", k21), cons("items", [])])), hash-table-set!(groups19, k21, g20)), quote(nil)), hash-table-set!(g20, "items", append(hash-table-ref(g20, "items"), [alist->hash-table([cons("o", o), cons("c", c)])])))), quote(nil))), customers)), orders), for-each(lambda(g(), set!(res22, append(res22, [alist->hash-table([cons("name", hash-table-ref(g, "key")), cons("count", length(hash-table-ref(g, "items")))])]))), hash-table-values(groups19)), res22))
print("--- Orders per customer ---")
print("")
