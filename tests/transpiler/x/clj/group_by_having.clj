;; Generated by Mochi v0.10.32 on 2025-07-21 11:12:29 GMT+7
(ns main)

(require 'clojure.set)

(defrecord Anon1 [name city])

(def people [{:name "Alice" :city "Paris"} {:name "Bob" :city "Hanoi"} {:name "Charlie" :city "Paris"} {:name "Diana" :city "Hanoi"} {:name "Eve" :city "Paris"} {:name "Frank" :city "Hanoi"} {:name "George" :city "Paris"}])

(def big (for [[k rows] (group-by :key (for [p people :let [k (:city p)]] {:key k :item p})) :let [g {:key k :items (map :item rows)}] :when (>= (count g) 4)] {:city (:key g) :num (count g)}))

(defn -main []
  (println ((fn [m] (str "{" (clojure.string/join "," (map (fn [[k v]] (str "\"" (name k) "\":" v)) m)) "}")) big)))

(-main)
