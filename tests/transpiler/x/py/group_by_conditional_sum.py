# Code generated by Mochi transpiler.
# Version 0.10.35, generated on 2025-07-22 07:44 +0000
from __future__ import annotations
from dataclasses import dataclass
from typing import List, Dict
import dataclasses

@dataclass
class Item:
    cat: str
    val: int
    flag: bool

items = [Item("a", 10, True), Item("a", 5, False), Item("b", 20, True)]
@dataclass
class ResultGroup:
    key: str
    items: list

_result_groups = {}
for i in items:
    _g = _result_groups.setdefault(i.cat, ResultGroup(i.cat, []))
    _g.items.append(i)
@dataclass
class Result:
    cat: str
    share: any

result = [Result(g.key, sum([(x.val if x.flag else 0) for x in g.items]) // sum([x.val for x in g.items])) for g in sorted(_result_groups.values(), key=lambda g: g.key)]
print([dataclasses.asdict(_x) for _x in result])
