# Generated by Mochi transpiler v0.10.34 on 2025-07-22 06:16 +0700
from dataclasses import dataclass
from typing import List, Dict
import json

@dataclass
class Item:
    cat: str
    val: int
    flag: bool

items = [Item("a", 10, True), Item("a", 5, False), Item("b", 20, True)]
@dataclass
class ResultGroup:
    key: str
    items: list

_result_groups = {}
for i in items:
    _g = _result_groups.setdefault(i.cat, ResultGroup(i.cat, []))
    _g.items.append(i)
@dataclass
class Result:
    cat: str
    share: any

result = [Result(g.key, sum([(x.val if x.flag else 0) for x in g.items]) // sum([x.val for x in g.items])) for g in _result_groups.values()]
print(json.dumps(result))
