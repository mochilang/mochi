# Generated by Mochi transpiler v0.10.31 on 2025-07-20 11:50 +0700
import json

items = [{"cat": "a", "val": 10, "flag": True}, {"cat": "a", "val": 5, "flag": False}, {"cat": "b", "val": 20, "flag": True}]
_result_groups = {}
for i in items:
    _g = _result_groups.setdefault(i["cat"], [])
    _g.append(i)
result = []
for k, items in _result_groups.items():
    g = {"key": k, "items": items}
    result.append({"cat": g["key"], "share": sum([(x["val"] if x["flag"] else 0) for x in g["items"]]) // sum([x["val"] for x in g["items"]])})
print(" ".join([(json.dumps(_v) if isinstance(_v, dict) else str(_v)) for _v in result]))
