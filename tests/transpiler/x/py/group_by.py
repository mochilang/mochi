# Code generated by Mochi v0.10.34 - DO NOT EDIT
from dataclasses import dataclass
from typing import List, Dict

people = [{"name": "Alice", "age": 30, "city": "Paris"}, {"name": "Bob", "age": 15, "city": "Hanoi"}, {"name": "Charlie", "age": 65, "city": "Paris"}, {"name": "Diana", "age": 45, "city": "Hanoi"}, {"name": "Eve", "age": 70, "city": "Paris"}, {"name": "Frank", "age": 22, "city": "Hanoi"}]
_stats_groups = {}
for person in people:
    if person["city"] not in _stats_groups:
        _stats_groups[person["city"]] = {"key": person["city"], "items": []}
    _stats_groups[person["city"]]["items"].append(person)
@dataclass
class Stat:
    city: any
    count: any
    avg_age: any

stats = []
for g in _stats_groups.values():
    stats.append(Stat(g["key"], len(g["items"]), (sum([p["age"] for p in g["items"]]) / len([p["age"] for p in g["items"]]) if [p["age"] for p in g["items"]] else 0.0)))
print("--- People grouped by city ---")
for s in stats:
    print(" ".join(str(x) for x in [s.city, ": count =", s.count, ", avg_age =", s.avg_age]).rstrip())
