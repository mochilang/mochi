# Generated by Mochi transpiler v0.10.31 on 2025-07-20 10:38 +0700
people = [{"name": "Alice", "age": 30, "city": "Paris"}, {"name": "Bob", "age": 15, "city": "Hanoi"}, {"name": "Charlie", "age": 65, "city": "Paris"}, {"name": "Diana", "age": 45, "city": "Hanoi"}, {"name": "Eve", "age": 70, "city": "Paris"}, {"name": "Frank", "age": 22, "city": "Hanoi"}]
_stats_groups = {}
for person in people:
    _g = _stats_groups.setdefault(person["city"], [])
    _g.append(person)
stats = []
for k, items in _stats_groups.items():
    g = {"key": k, "items": items}
    stats.append({"city": g["key"], "count": len(g["items"]), "avg_age": ((int(sum([p["age"] for p in g["items"]]) / len([p["age"] for p in g["items"]])) if sum([p["age"] for p in g["items"]]) / len([p["age"] for p in g["items"]]) == int(sum([p["age"] for p in g["items"]]) / len([p["age"] for p in g["items"]])) else sum([p["age"] for p in g["items"]]) / len([p["age"] for p in g["items"]])) if [p["age"] for p in g["items"]] else 0)})
print("--- People grouped by city ---")
for s in stats:
    print(s["city"], ": count =", s["count"], ", avg_age =", s["avg_age"])
