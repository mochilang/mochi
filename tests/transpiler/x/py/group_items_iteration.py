# Generated by Mochi transpiler v0.10.31 on 2025-07-20 11:00 +0700
data = [{"tag": "a", "val": 1}, {"tag": "a", "val": 2}, {"tag": "b", "val": 3}]
_groups_groups = {}
for d in data:
    _g = _groups_groups.setdefault(d["tag"], [])
    _g.append(d)
groups = []
for k, items in _groups_groups.items():
    g = {"key": k, "items": items}
    groups.append(g)
tmp = []
for g in groups:
    total = 0
    for x in g["items"]:
        total = total + x["val"]
    tmp = tmp + [{"tag": g["key"], "total": total}]
result = sorted([r for r in tmp], key=lambda r: r["tag"])
print(result)
