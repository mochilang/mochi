# Code generated by Mochi transpiler.
# Version 0.10.36, generated on 2025-07-22 17:46 +0700
from __future__ import annotations
from dataclasses import dataclass
from typing import List, Dict

@dataclass
class Customer:
    id: int
    name: str

customers = [Customer(1, "Alice"), Customer(2, "Bob")]
@dataclass
class Order:
    id: int
    customerId: int

orders = [Order(100, 1), Order(101, 1), Order(102, 2)]
@dataclass
class StatsGroup:
    key: str
    items: list

@dataclass
class StatsRow:
    o: any
    c: any

_stats_groups = {}
for o in orders:
    for c in [c for c in customers if o.customerId == c.id]:
        _g = _stats_groups.setdefault(c.name, StatsGroup(c.name, []))
        _g.items.append(StatsRow(o, c))
@dataclass
class Stat:
    name: str
    count: int

stats = [Stat(g.key, len(g.items)) for g in _stats_groups.values()]
print("--- Orders per customer ---")
for s in stats:
    print(s.name, "orders:", s.count)
