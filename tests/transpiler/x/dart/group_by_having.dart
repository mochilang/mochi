// Generated by Mochi transpiler
class People {
  final String name;
  final String city;
  const People({required this.name, required this.city});
}

class Big {
  final dynamic city;
  final int num;
  const Big({required this.city, required this.num});
}

void main() {
  final List<People> people = [People(name: "Alice", city: "Paris"), People(name: "Bob", city: "Hanoi"), People(name: "Charlie", city: "Paris"), People(name: "Diana", city: "Hanoi"), People(name: "Eve", city: "Paris"), People(name: "Frank", city: "Hanoi"), People(name: "George", city: "Paris")];
  final List<Big> big = (() {
  var groups = <String, Map<String, dynamic>>{};
  for (var p in people) {
    var key = p.city;
    var ks = key.toString();
    var g = groups[ks];
    if (g == null) {
      g = {'key': key, 'items': []};
      groups[ks] = g;
    }
    (g['items'] as List).add(p);
  }
  var _list = groups.values.toList();
  var res = <dynamic>[];
  for (var g in _list) {
    if (g.items.length >= 4) {
      res.add(Big(city: g.key, num: g.items.length));
    }
  }
  return res;
})();;
  json(big);
}
