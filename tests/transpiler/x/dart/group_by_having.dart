// Generated by Mochi transpiler
import 'dart:convert';

void json(dynamic v) {
  var e = const JsonEncoder.withIndent('  ');
  print(e.convert(v));
}

class People {
  final String name;
  final String city;
  const People({required this.name, required this.city});
  Map<String, dynamic> toJson() => {"name": name, "city": city};
}

class Big {
  final dynamic city;
  final int num;
  const Big({required this.city, required this.num});
  Map<String, dynamic> toJson() => {"city": city, "num": num};
}

void main() {
  final List<People> people = [People(name: "Alice", city: "Paris"), People(name: "Bob", city: "Hanoi"), People(name: "Charlie", city: "Paris"), People(name: "Diana", city: "Hanoi"), People(name: "Eve", city: "Paris"), People(name: "Frank", city: "Hanoi"), People(name: "George", city: "Paris")];
  final List<Big> big = (() {
  var _groups = <String, Map<String, dynamic>>{};
  var _order = <String>[];
  for (var p in people) {
    var _key = p.city;
    var _ks = _key.toString();
    var _g = _groups[_ks];
    if (_g == null) {
      _g = {'key': _key, 'items': []};
      _groups[_ks] = _g;
      _order.add(_ks);
    }
    (_g['items'] as List).add(p);
  }
  var _res = <Big>[];
  for (var ks in _order) {
    var g = _groups[ks]!;
    if ((g["items"].length >= 4)) {
      _res.add(Big(city: g["key"], num: g["items"].length));
    }
  }
  return _res;
})();;
  json(big);
}
