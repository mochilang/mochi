#!/usr/bin/env escript
-module(main).
-export([main/1, sum_tree/1]).

% Generated by Mochi transpiler v0.10.35 (49a578848) on 2025-07-22 07:14 UTC

sum_tree(T) ->
    try
        (case T of
    #{"tag" := "leaf"} -> 0;
    #{"tag" := "node", "left" := Left, "value" := Value, "right" := Right} -> ((sum_tree(Left) + Value) + sum_tree(Right))
end)
    catch {return, V} -> V end.

main(_) ->
    T = #{"tag" => "node", "left" => #{"tag" => "leaf"}, "value" => 1, "right" => #{"tag" => "node", "left" => #{"tag" => "leaf"}, "value" => 2, "right" => #{"tag" => "leaf"}}},
    io:format("~p~n", [sum_tree(T)]).
