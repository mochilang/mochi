# Generated by Mochi transpiler on 2025-07-21 19:10 +0700
people = [%{name: "Alice", city: "Paris"}, %{name: "Bob", city: "Hanoi"}, %{name: "Charlie", city: "Paris"}, %{name: "Diana", city: "Hanoi"}, %{name: "Eve", city: "Paris"}, %{name: "Frank", city: "Hanoi"}, %{name: "George", city: "Paris"}]
big = Enum.group_by(people, fn p -> p.city end) |> Enum.map(fn {key, items} -> %{key: key, items: items} end) |> Enum.filter(fn g -> Enum.count(g.items) >= 4 end) |> Enum.map(fn g ->
  g = g
  %{city: g.key, num: Enum.count(g.items)}
end)
IO.puts(Jason.encode!(big))
