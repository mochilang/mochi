# Generated by Mochi transpiler on 2025-07-21 11:21 +0000
customers = [%{id: 1, name: "Alice"}, %{id: 2, name: "Bob"}, %{id: 3, name: "Charlie"}]
orders = [%{id: 100, customerId: 1}, %{id: 101, customerId: 1}, %{id: 102, customerId: 2}]
stats = Enum.map(Enum.group_by(Enum.flat_map(customers, fn c ->
  matches = Enum.filter(orders, fn o -> o.customerId == c.id end)
  list = if Enum.empty?(matches), do: [nil], else: matches
  Enum.map(list, fn o -> %{c: c, o: o} end)
end), fn %{c: c, o: o} -> c.name end), fn {key, items} ->
  g = %{key: key, items: items}
  %{name: g.key, count: Enum.count(for r <- g.items, r.o do
  r
end)}
end)
IO.puts("--- Group Left Join ---")
Enum.each(stats, fn s ->
  IO.puts("#{Kernel.inspect(s.name)} orders: #{Kernel.inspect(s.count)}")
end)
