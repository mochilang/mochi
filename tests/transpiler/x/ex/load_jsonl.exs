# Code generated by Mochi transpiler 2025-07-22 10:07 +0700
people = (fn ->
  File.stream!("/workspace/mochi/tests/interpreter/valid/people.jsonl")
  |> Stream.map(&String.trim/1)
  |> Stream.reject(&(&1 == ""))
  |> Enum.map(fn line ->
    line = line |> String.trim_leading("{") |> String.trim_trailing("}")
    parts = String.split(line, ",")
    Enum.reduce(parts, %{}, fn item, acc ->
      [k, v] = String.split(item, ":", parts: 2)
      k = k |> String.trim() |> String.trim("\"") |> String.to_atom()
      v = String.trim(v)
      val = case Integer.parse(v) do
        {n, ""} -> n
        _ -> String.trim(v, "\"")
      end
      Map.put(acc, k, val)
    end)
  end)
end).()
adults = for p <- people, p.age >= 18 do
  %{
    name: p.name,
    email: p.email
  }
end
Enum.each(adults, fn a ->
  IO.puts("#{Kernel.to_string(a.name)} #{Kernel.to_string(a.email)}")
end)
