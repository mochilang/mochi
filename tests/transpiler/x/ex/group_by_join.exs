# Generated by Mochi transpiler on 2025-07-21 16:27 +0700
customers = [%{id: 1, name: "Alice"}, %{id: 2, name: "Bob"}]
orders = [%{id: 100, customerId: 1}, %{id: 101, customerId: 1}, %{id: 102, customerId: 2}]
stats = Enum.map(Enum.group_by(for o <- orders, c <- customers, o.customerId == c.id do
  %{
    o: o,
    c: c
  }
end, fn %{o: o, c: c} -> c.name end), fn {key, items} ->
  g = %{key: key, items: items}
  %{name: g.key, count: Enum.count(g.items)}
end)
IO.puts("--- Orders per customer ---")
Enum.each(stats, fn s ->
  IO.puts("#{Kernel.inspect(s.name)} orders: #{Kernel.inspect(s.count)}")
end)
