# Generated by Mochi transpiler on 2025-07-21 21:55 +0700
customers = [%{id: 1, name: "Alice"}, %{id: 2, name: "Bob"}]
orders = [%{id: 100, customerId: 1}, %{id: 101, customerId: 2}]
items = [%{orderId: 100, sku: "a"}]
result = Enum.flat_map(orders, fn o ->
  Enum.flat_map(Enum.filter(customers, fn c ->
  o.customerId == c.id
end), fn c ->
  matches = Enum.filter(items, fn i ->
  o.id == i.orderId
end)
  list = if Enum.empty?(matches), do: [nil], else: matches
  Enum.map(list, fn i ->
  %{orderId: o.id, name: c.name, item: i}
end)
end)
end)
IO.puts("--- Left Join Multi ---")
Enum.each(result, fn r ->
  IO.puts("#{Kernel.inspect(r.orderId)} #{Kernel.inspect(r.name)} #{Kernel.inspect(r.item)}")
end)
