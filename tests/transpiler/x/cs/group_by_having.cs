// Generated by Mochi 0.10.33 on 2025-07-21 18:06 +0700
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.Json;

struct People {
    public string name;
    public string city;
    public override string ToString() => $"{{\"name\": \"{name}\", \"city\": \"{city}\"}}";
}
struct GGroup {
    public string key;
    public People[] items;
    public override string ToString() => $"{{\"key\": \"{key}\", \"items\": {items}}}";
}
struct GResult {
    public string city;
    public int num;
    public override string ToString() => $"{{\"city\": \"{city}\", \"num\": {num}}}";
}
class Program {
    static People[] people = new People[]{new People{name = "Alice", city = "Paris"}, new People{name = "Bob", city = "Hanoi"}, new People{name = "Charlie", city = "Paris"}, new People{name = "Diana", city = "Hanoi"}, new People{name = "Eve", city = "Paris"}, new People{name = "Frank", city = "Hanoi"}, new People{name = "George", city = "Paris"}};
    static GResult[] big = (from p in people group p by p.city into gTmp let g = new GGroup{ key = gTmp.Key, items = gTmp.ToArray() } where (g.items.Length >= 4) select new GResult{city = g.key, num = g.items.Length}).ToArray();
    static void Main() {
        Console.WriteLine(JsonSerializer.Serialize(big));
    }
}
