// Generated by Mochi 0.10.33 on 2025-07-21 18:06 +0700
using System;
using System.Collections.Generic;
using System.Linq;

struct Data {
    public string tag;
    public int val;
    public override string ToString() => $"{{\"tag\": \"{tag}\", \"val\": {val}}}";
}
struct GGroup {
    public string key;
    public Data[] items;
    public override string ToString() => $"{{\"key\": \"{key}\", \"items\": {items}}}";
}
class Program {
    static Data[] data = new Data[]{new Data{tag = "a", val = 1}, new Data{tag = "a", val = 2}, new Data{tag = "b", val = 3}};
    static GGroup[] groups = (from d in data group d by d.tag into gTmp let g = new GGroup{ key = gTmp.Key, items = gTmp.ToArray() } select g).ToArray();
    static object[] tmp = new object[]{};
    static int total = 0;
    static object[] result = (from r in tmp orderby r.tag select r).ToArray();
    static void Main() {
        foreach (var g in groups) {
    foreach (var x in g.items) {
    total = (total + x.val);
}
    tmp = (tmp.Append(new Dictionary<string, object>{{"tag", g.key}, {"total", total}}).ToArray());
}
        Console.WriteLine(string.Join(" ", result).TrimEnd());
    }
}
