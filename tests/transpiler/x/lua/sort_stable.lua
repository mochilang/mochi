-- Generated by Mochi v0.10.34 on 2025-07-22 10:00 GMT+7
items = {{n = 1, v = "a"}, {n = 1, v = "b"}, {n = 2, v = "c"}};

result = (function()
local __tmp = {}
local _res = {}
local _idx = 0
for _, i in ipairs(items) do
  _idx = _idx + 1
  table.insert(__tmp, {i = _idx, k = i.n, v = i.v})
end
table.sort(__tmp, function(a,b) if a.k == b.k then return a.i < b.i end return a.k < b.k end)
for i,p in ipairs(__tmp) do _res[i] = p.v end
return _res
end)()
;

print(
(function(v)
local function encode(x)
if type(x) == "table" then
  if #x > 0 then
    local parts = {"["}
    for i, val in ipairs(x) do
      parts[#parts+1] = encode(val)
      if i < #x then parts[#parts+1] = ", " end
    end
    parts[#parts+1] = "]"
    return table.concat(parts)
  else
    local keys = {}
    for k in pairs(x) do table.insert(keys, k) end
    table.sort(keys, function(a,b) return tostring(a) > tostring(b) end)
    local parts = {"{"}
    for i, k in ipairs(keys) do
      parts[#parts+1] = "'" .. tostring(k) .. "': " .. encode(x[k])
      if i < #keys then parts[#parts+1] = ", " end
    end
    parts[#parts+1] = "}"
    return table.concat(parts)
  end
elseif type(x) == "string" then
    return "'" .. x .. "'"
  else
    return tostring(x)
  end
end
return encode(v)
end)(result));
