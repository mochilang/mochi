/*
Convert a string to all lowercase letters.

Given an input string `word`, each uppercase ASCII letter ('A'-'Z') is
replaced with its lowercase counterpart. The algorithm maintains strings of
uppercase and lowercase alphabets and scans the input one character at a
 time. For each character, it finds its index in the uppercase string; if
found, the corresponding lowercase letter is appended to the result. Other
characters are copied unchanged. This runs in O(n) time for n characters of
the input.
*/

fun index_of(s: string, ch: string): int {
  var i = 0
  while i < len(s) {
    if s[i] == ch { return i }
    i = i + 1
  }
  return -1
}

fun lower(word: string): string {
  let upper = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
  let lower_chars = "abcdefghijklmnopqrstuvwxyz"
  var result = ""
  var i = 0
  while i < len(word) {
    let c = word[i]
    let idx = index_of(upper, c)
    if idx >= 0 {
      result = result + lower_chars[idx:idx+1]
    } else {
      result = result + c
    }
    i = i + 1
  }
  return result
}

print(lower("wow"))
print(lower("HellZo"))
print(lower("WHAT"))
print(lower("wh[]32"))
print(lower("whAT"))
