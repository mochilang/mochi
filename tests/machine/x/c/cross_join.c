// Generated by Mochi compiler v0.10.25 on 2025-07-14T01:29:04Z
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct {
  int id;
  char *name;
} customer_t;

typedef struct {
  int id;
  int customer_id;
  int total;
} order_t;

typedef struct {
  int order_id;
  int order_customer_id;
  char *paired_customer_name;
  int order_total;
} result_t;

typedef struct {
  int len;
  result_t *data;
} result_list_t;

static result_list_t create_result_list(int len) {
  result_list_t l;
  l.len = len;
  l.data = calloc(len, sizeof(result_t));
  if (!l.data && len > 0) {
    fprintf(stderr, "alloc failed\n");
    exit(1);
  }
  return l;
}

int main() {
  customer_t customers[] = {
      {1, "Alice"},
      {2, "Bob"},
      {3, "Charlie"},
  };
  int num_customers = sizeof(customers) / sizeof(customers[0]);

  order_t orders[] = {
      {100, 1, 250},
      {101, 2, 125},
      {102, 1, 300},
  };
  int num_orders = sizeof(orders) / sizeof(orders[0]);

  result_list_t result = create_result_list(num_orders * num_customers);

  int idx = 0;
  for (int i = 0; i < num_orders; i++) {
    for (int j = 0; j < num_customers; j++) {
      result.data[idx].order_id = orders[i].id;
      result.data[idx].order_customer_id = orders[i].customer_id;
      result.data[idx].paired_customer_name = customers[j].name;
      result.data[idx].order_total = orders[i].total;
      idx++;
    }
  }

  printf("--- Cross Join: All order-customer pairs ---\n");
  for (int i = 0; i < result.len; i++) {
    result_t entry = result.data[i];
    printf("Order %d (customerId: %d, total: $%d) paired with %s\n",
           entry.order_id, entry.order_customer_id, entry.order_total,
           entry.paired_customer_name);
  }

  free(result.data);
  return 0;
}
