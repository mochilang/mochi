# Generated by Mochi compiler v0.10.26 on 2025-07-16T18:44:50Z
defmodule Todo do
  @type t :: %__MODULE__{title: String.t()}
  defstruct title: nil
end

defmodule Main do
  def main do
    # todo :: Todo
    todo = _structify(Todo, %{"title" => "hi"})
    IO.puts(todo.title)
  end

  defp _structify(mod, v) do
    cond do
      is_struct(v) ->
        v

      is_map(v) ->
        m =
          Enum.reduce(v, %{}, fn {k, val}, acc ->
            Map.put(acc, String.to_atom(to_string(k)), _structify(nil, val))
          end)

        if mod, do: struct(mod, m), else: m

      is_list(v) ->
        Enum.map(v, &_structify(nil, &1))

      true ->
        v
    end
  end
end

Main.main()
