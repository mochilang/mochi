# [Count maximum matrices](https://www.spoj.com/problems/MATRIX/)

## Problem Summary
Given an `M × N` matrix of 0s and 1s, for every subrectangle define its *value* as the number of ones on its border minus the number of zeros on its border. Let `W` be the maximum value over all subrectangles and `S` the number of subrectangles achieving that value. Determine `W` and `S`.

## Algorithm
1. Precompute prefix sums for each row and column so that the number of ones on any horizontal or vertical segment can be obtained in O(1).
2. Enumerate all rectangles by choosing their top-left and bottom-right corners.
   - Using the prefix sums, count how many ones lie on the rectangle's border (top and bottom rows plus left and right columns, excluding corners twice).
   - Compute the perimeter size `P` based on its height and width and evaluate `value = 2 * ones - P`.
   - Track the best value `W` and the count `S` of rectangles reaching it.

The loops inspect O(M²·N²) rectangles and each uses constant time thanks to the prefix sums, which is feasible for M, N ≤ 200.
