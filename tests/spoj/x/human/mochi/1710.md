# [Two Ends](https://www.spoj.com/problems/TWENDS/)

## Problem Summary
Given an even number of cards laid in a row with positive integers, two players remove one card from either end on their turns. The second player always plays greedily by taking the larger available end (breaking ties to the left). Determine the maximum possible loss for the greedy strategy when the first player plays optimally against it.

## Algorithm
1. Let `dp[l][r]` be the maximum difference `first - second` achievable for the subarray from index `l` to `r` before the first player's move.
2. For the first player's move choose left or right card:
   - If taking left `a[l]`, the greedy second player examines `a[l+1]` and `a[r]` and removes the larger. This results in either subarray `[l+2, r]` or `[l+1, r-1]` and corresponding score difference adjustment.
   - If taking right `a[r]`, perform the symmetric greedy step for the second player, leading to `[l+1, r-1]` or `[l, r-2]`.
3. Recursively compute both options and store the larger in `dp[l][r]` with memoization.
4. The answer for the game is `dp[0][n-1]`.

The state space is `O(n^2)` (at most 1000Ã—1000), and each state is computed in constant time, giving an overall `O(n^2)` algorithm per test case with `O(n^2)` memory.
