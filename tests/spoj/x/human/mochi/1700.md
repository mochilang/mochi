# Traveling by Stagecoach (TRSTAGE)

We are given up to eight stagecoach tickets. Each ticket `t_i` specifies the number of horses and can be used at most once.  A ride along a road of length `d` using ticket `t_i` takes `d / t_i` time units.  Starting from city `a`, we must reach city `b` in minimum total time.

## Algorithm

Use dynamic programming over subsets of tickets.  Let `dp[mask][c]` be the minimum time to reach city `c` after using the set of tickets represented by `mask` (bit `i` is set if ticket `i` has been used).  Initialize `dp[0][a] = 0` and all other states to infinity.

Process masks in increasing order.  For each state `(mask, c)` with finite cost:

1. For every unused ticket `i` (bit `i` not set in `mask`), and
2. For every road `(c -> v, dist)` from city `c`,

update `dp[mask | (1<<i)][v]` with `dp[mask][c] + dist / t_i` if this is smaller.

Since every transition uses one additional ticket, masks only increase, so simple nested loops suffice.

The answer is the minimum `dp[mask][b]` over all masks.  If it remains infinity, the destination is unreachable and we print `Impossible`.

## Complexity

Let `n` be the number of tickets (≤ 8) and `m` the number of cities (≤ 30).  There are `2^n * m` states and each transition considers up to `n` tickets and the outgoing edges of a city.  The total time is `O(2^n * m * n * deg)` which is below a few million operations for the given bounds.
