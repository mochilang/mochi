# [Accomodate the palace](https://www.spoj.com/problems/PALACE/)

## Problem Summary
For a palace arranged as an \(N \times N\) grid of rooms, place people so that each row and each column contains an odd number of people. Each room can contain at most one person. For multiple test cases output the number of valid arrangements modulo 98777.

## Algorithm
An arrangement corresponds to an \(N \times N\) binary matrix whose row and column sums are all odd. Choose the first \((N-1) \times (N-1)\) cells arbitrarily. For each of the first \(N-1\) rows, the cell in the last column is then determined uniquely to make that row's sum odd. Similarly, for each of the first \(N-1\) columns, the cell in the last row is fixed to make that column's sum odd. After these adjustments the parity of the last row and last column coincide, so the bottom-right cell is forced as well. Therefore the total number of valid matrices is
\[
2^{(N-1)^2}.
\]
We compute this value using fast modular exponentiation with modulus 98777.

## Complexity
Each test case requires \(O(\log N)\) time for exponentiation and constant extra space.
