# [Search in XML](https://www.spoj.com/problems/PT07H/)

## Problem Summary
Given an XML document whose siblings have distinct tag names and a pattern XML tree, find all nodes in the document whose subtrees contain the pattern. Elements in the document are numbered by preorder (start-tag order). Output the count and the ids of nodes where the pattern matches.

## Algorithm
1. Read the entire input and strip whitespace. Parse the first XML tree (the document) while assigning increasing ids to nodes as their start tags appear. Each node stores its tag and a map of children keyed by tag name.
2. Parse the remaining input into the pattern tree without ids.
3. For each node in the document, recursively check if it matches the pattern:
   - Tags must be identical.
   - Every child in the pattern must exist in the node's children and recursively match. Extra children in the document are allowed.
4. Collect ids of matching nodes (already in ascending order) and print the count followed by each id on its own line.

The parsing and matching together run in linear time in the size of the document.
