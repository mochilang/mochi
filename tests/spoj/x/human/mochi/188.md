# SPOJ Rectangles solution (Mochi)

We are given up to 7000 axis-aligned rectangles. Two rectangles belong to the same block if they share a common line segment. Sharing a single point is not enough. Blocks can connect transitively through other rectangles.

To solve this we model rectangles as nodes of a graph and connect two nodes when their rectangles overlap with positive area or touch along a vertical or horizontal segment. The number of blocks is then the number of connected components in this graph.

The algorithm:

1. Read all rectangles.
2. For every pair of rectangles check if they are connected. Two rectangles connect if either:
   - Their projections on both axes overlap with positive length (they overlap by area).
   - One's right edge equals the other's left edge and their `y` intervals overlap with positive length.
   - One's top edge equals the other's bottom edge and their `x` intervals overlap with positive length.
3. Use a Unionâ€“Find (disjoint set) structure to merge rectangles that are connected.
4. After processing all pairs, count distinct parents to obtain the number of blocks.

This has quadratic pair checking but works for the problem limits.
