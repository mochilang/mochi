# [The Imp](https://www.spoj.com/problems/IMP/)

## Problem Summary
Given two vectors `(a, b)` and `(c, d)` describing the Imp's moves on an infinite chessboard (both directions allowed), find the smallest positive value of `|x| + |y|` for any reachable square `(x, y)` starting from `(0,0)`.

## Algorithm
1. The set of reachable squares forms a lattice spanned by the two move vectors.
2. **Collinear case (`ad = bc`):**
   - All moves lie on one line. The primitive step along this line has components
     `g1 = gcd(|a|, |c|)` and `g2 = gcd(|b|, |d|)` (using a single gcd when the
     other coordinate is zero).
   - The answer is `|g1| + |g2|`.
3. **General case:**
   - Perform Gauss lattice reduction on the two vectors using the Euclidean norm.
     Replace the longer vector by `v2 - round((v1·v2)/(v1·v1)) * v1` until the
     rounding coefficient becomes zero; the remaining pair is a reduced basis.
   - Candidate short vectors are `v1`, `v2`, `v1+v2`, and `v1-v2`. The minimum
     Manhattan norm over these non-zero vectors is the required value.

This approach runs in constant time per test case.
