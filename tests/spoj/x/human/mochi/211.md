# [PRIMIT - Primitivus recurencis](https://www.spoj.com/problems/PRIMIT/)

We are given directed pairs `(l, r)` that must appear consecutively in a sequence of
natural numbers (the genetic code). Each pair is a directed edge in a graph
with vertices `1..1000`. We must find the minimum length of a sequence whose
adjacent pairs contain all given edges at least once.

For a walk that covers every edge at least once, the minimum number of edge
traversals is the number of edges plus the extra edges required to balance the
degrees of the graph. In a directed graph, a vertex may have more outgoing than
incoming edges. Let `out[v]` and `in[v]` denote these counts. The total number
of additional edges needed is

```
extra = max(0, sum_{v}(max(0, out[v] - in[v])) - 1)
```

The final sequence length equals the original number of edges plus the number of
extra edges, and we add one for the last vertex. This simplifies to:

```
answer = n + max(1, sum_{v} max(0, out[v] - in[v]))
```

We compute in/out-degrees for all vertices, sum the positive imbalances, apply
the formula above, and output the result.

Complexity: `O(n + V)` where `V â‰¤ 1000`.
