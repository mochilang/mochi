# HEXAGON

[Problem link](https://www.spoj.com/problems/HEXAGON/)

We are given three distinct numbers for each of the three primary directions of a hexagonal board of radius 2 (19 cells). Each piece corresponds to a triple of numbers—one per direction—and every possible combination of the three numbers is available once. We must select 19 pieces and place them on the board (without rotation) so that in each of the 15 board rows (5 per direction) all pieces in that row share the same number for that direction. Under this constraint we want the maximum possible total row score, where a row’s score is its common number multiplied by the number of cells in that row.

## Algorithm

The board consists of five rows in each direction with lengths `3,4,5,4,3`. Assigning a number to a row fixes that value for all cells belonging to it. For any cell we look at the three rows crossing it (one per direction); the corresponding piece must carry the three chosen numbers for these rows. A piece type can be used at most once, so these triples must be unique for every cell.

We pre–compute all valid assignments of the three numbers (`0,1,2` as indices) to the 15 rows such that every cell receives a distinct triple. This is done with backtracking:

1. Enumerate the rows one by one, trying each of the three numbers.
2. When a row is assigned, check any cell that now has all three numbers fixed. If its triple was used before, backtrack.
3. Whenever all 15 rows are assigned we record the pattern of numbers (there are 1296 valid patterns in total).

For every test case we map the input numbers to the indices `0,1,2` and for each pre‑computed pattern compute the score:

```
score = sum(len[i] * A[pattern[i]])
      + sum(len[i] * B[pattern[5+i]])
      + sum(len[i] * C[pattern[10+i]])
```

where `len = [3,4,5,4,3]` are the row lengths and `A,B,C` are the three numbers for the corresponding direction. The maximum score over all patterns is printed.

The precomputation is done once and reused for all test cases, keeping the solution fast.
