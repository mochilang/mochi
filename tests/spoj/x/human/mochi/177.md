# ABWORDS - AB-words

[Problem statement](https://www.spoj.com/problems/ABWORDS/)

## Problem Summary
Given a set of nice ab-words (balanced strings of `a` and `b` with every prefix having at least as many `a`'s as `b`'s), find the level of diversity of the set. The level of diversity is the maximum number of words that can be chosen so that no two are similar under the recursive similarity rules.

## Algorithm
1. **Canonical form**: For each word, compute a canonical representation.
   - Split the word into top-level balanced segments using a balance counter.
   - For each segment of form `a ... b`, recursively canonicalize the inner substring, wrap it with `a` and `b`.
   - Sort all segment forms lexicographically and concatenate them. This handles the allowed swapping of subwords.
2. **Count classes**: Insert each canonical form into a set. The level of diversity is the number of unique canonical forms.

Two nice ab-words are similar if and only if their canonical forms are identical.

## Complexity Analysis
Let `L` be the length of a word (`L \le 200`). Splitting and canonicalizing a word takes `O(L log L)` time due to sorting of segments and `O(L)` space. Processing `n` words (`n \le 1000`) runs in `O(n Â· L log L)` time overall.
