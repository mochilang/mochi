# [Ordering the Soldiers](https://www.spoj.com/problems/ORDERS/)

## Problem Summary
Each test case gives the number of soldiers `n` and an array `w` where `w[i]` is how many positions the `i`-th soldier moved to the left when sorting the line using Msgt Johnny's procedure. Ranks range from 1 (lowest) to `n` (highest). We must reconstruct the initial ordering of ranks from left to right.

## Algorithm
Observing the process, `w[i]` equals the number of higher ranked soldiers originally standing to the left of the `i`-th soldier. This is exactly the inversion count for each position, meaning `w` is the inversion vector of the initial permutation.

To recover the permutation from its inversion vector:

1. Maintain the set of available ranks `1..n` using a Fenwick tree (binary indexed tree) storing 1 for each unused rank.
2. Process soldiers from right to left.
   - When handling position `i`, there are `i+1` ranks remaining. The soldier's rank must be the `(w[i]+1)`‑th largest among them, which is equivalent to the `(i+1 - w[i])`‑th smallest.
   - Use the Fenwick tree to find this k‑th smallest rank in `O(log n)` time and mark it as used.
3. After processing all positions, the array contains the ranks from left to right in the original line.

The Fenwick tree supports updates and prefix‑sum searches in logarithmic time, so the entire reconstruction runs in `O(n log n)` per test case with `O(n)` memory.
