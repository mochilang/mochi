# [Calls](https://www.spoj.com/problems/CALLS/)

## Problem Summary
For each test case we know the cheapest cost of a phone call between every pair of N cities and the total number of phone lines K operated by a company. Each line connects two cities bidirectionally and has a positive cost. Determine whether it is possible to assign costs to exactly K lines so that the shortest path cost between every pair of cities equals the given matrix.

## Algorithm
1. Reconstruct the symmetric distance matrix D from the upper triangular values.
2. Check the triangle inequality for all triples of cities: if for any i, j, k we have D[i][j] > D[i][k] + D[k][j], the flyer is a forgery.
3. For every pair (i, j) count it as a required edge unless there exists some k with D[i][j] = D[i][k] + D[k][j]. This computes the minimal number of lines needed.
4. The flyer is valid iff the matrix passes the triangle checks and `needed <= K <= N*(N-1)/2`. Extra lines can always be added with sufficiently large cost without affecting shortest paths.

The nested loops run in O(N^3) time, which is feasible for N up to 300.
