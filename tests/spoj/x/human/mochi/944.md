# [Free Tour](https://www.spoj.com/problems/FTOUR/)

## Problem Summary
Given up to five undirected graphs with up to 8000 vertices and 10000 edges, find a simple cycle with an even number of edges and the minimum possible length. If no such cycle exists, output `-1`. Otherwise, output the length of the cycle and the list of vertices starting and ending at the same vertex.

## Algorithm
1. For each vertex `s`, run Breadth-First Search to build a shortest-path tree.
2. During BFS, whenever we traverse an edge `(v, w)` where `w` was already visited and `w` is not the parent of `v`, a cycle is found with length `dist[v] + dist[w] + 1`.
3. If this cycle length is even and smaller than any previously found, reconstruct the cycle:
   - Move `v` and `w` upward through their parent pointers until they meet at a common ancestor (LCA).
   - The cycle is formed by the path from `v` to the LCA, followed by the path from the LCA to `w`, and finally the edge back to `v`.
4. Among all such cycles, keep the shortest even one. If none exist, answer `-1`.

This approach performs a BFS from every vertex, which is `O(N*(N+M))` (about 80 million edge relaxations in the worst case), within the given constraints.
