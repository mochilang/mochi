# [PANIC](https://www.spoj.com/problems/PANIC/)

## Problem Summary
The capital of Byteland is modelled as up to 50,000 plazas joined by up to 250,000 bidirectional streets. Each street has a travel time in both directions. At noon, bombs explode in `k` plazas and panic spreads along streets. When panic reaches a plaza the crowd immediately runs along all other streets, splitting and continuing at constant speed. If two crowds meet on a street or a crowd gets trapped in a plaza with no exits, everyone there dies. From which plazas can a person survive the longest?

## Algorithm
1. **Multi-source Dijkstra** – run Dijkstra from all bombed plazas to compute the earliest time `dist[v]` when panic reaches each plaza. Unreached plazas have infinite survival time.
2. **Edge meeting times** – for every street `(u,v)` with travel times `t_uv` and `t_vu`, compute when crowds from both ends meet:
   `meet = (dist[u]*t_vu + dist[v]*t_uv + t_uv*t_vu) / (t_uv + t_vu)`
   Track the maximum over all `dist` values and `meet` values.
3. **Backwards search on shortest-path DAG** – build a reverse graph of edges that lie on some shortest path (`dist[v] == dist[u] + w_uv`). Starting from all plazas that attain the maximum time (either directly via `dist` or as endpoints of a max-time street), traverse this reverse graph to collect every plaza that can reach one of them along increasing `dist` edges.
4. Sort the collected plazas and output them in increasing order.

The Dijkstra pass is `O((n+m) log n)` and the remaining scans are linear, fitting comfortably within the limits.
