# SPOJ 1726 - Exchange

We hold two quantities during the iteration over days:

- `r` – the maximum Rpin we can have at the start of a day.
- `m` – the value in Rpin of the Mone/Luck portfolio if it were
  exchanged back to Rpin at the current day's rates.

When investing on day *i* we convert all Rpin into Mone and Luck with
ratio `Rate_i`.  An amount `x` Rpin becomes:

```
M = x * Rate_i / (Rate_i * a_i + b_i)
L = x / (Rate_i * a_i + b_i)
```

If these holdings are converted back to Rpin on day *i+1*, their value is:

```
M * a_{i+1} + L * b_{i+1} = x * (Rate_i * a_{i+1} + b_{i+1}) / (Rate_i * a_i + b_i)
```

Thus, for each day except the last we update:

```
r = max(r, m)
coeff = (Rate_i * a_{i+1} + b_{i+1}) / (Rate_i * a_i + b_i)
m = r * coeff
```

After the final day we again set `r = max(r, m)` and output `r` with
three decimal places.

The algorithm runs in `O(n)` time and uses `O(1)` extra space.
