# SAM - Toy Cars

[SPOJ problem](https://www.spoj.com/problems/SAM/)

## Algorithm

1. Read the sequence of `p` car requests.
2. Precompute for each position the next occurrence index of the same car (or a large sentinel if it never appears again).
3. Simulate the requests while maintaining:
   - a map of cars currently on the floor with their next use,
   - a max-heap of these cars keyed by next use.
4. When a requested car is already on the floor, update its next use and push the new value into the heap.
5. Otherwise increment the answer. If the floor already holds `k` cars, repeatedly pop from the heap until a valid entry is found and remove that car from the floor.
6. Insert the new car with its next use into both structures.

## Correctness

- The heap always stores every car on the floor along with when it will be needed again.
- Evicting the car whose next use is farthest in the future (or never) is optimal: any other choice would force an earlier additional retrieval.
- At each step the structures reflect future demands, so the algorithm performs the minimum number of shelf pickups.

## Complexity

Precomputing next uses takes `O(p)` time. Each request performs at most one heap push and pop, giving `O(p log k)` time and `O(k + n)` memory.
