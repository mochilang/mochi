# [Ticket to Ride](https://www.spoj.com/problems/TICKET/)

## Problem Summary
Given up to 30 cities and up to 1000 undirected railway routes with costs, and four assignments each specifying two cities that must be connected, find the minimum total cost of claimed routes so that every pair of assigned cities becomes connected. Routes may be shared between different assignments.

## Algorithm
1. Map each city name to an index and store the cheapest route between every pair of cities.
2. Use Floyd–Warshall to compute all-pairs shortest path distances between cities.
3. Perform dynamic programming over subsets of the eight terminal cities (two per assignment):
   - `dp[mask][v]` is the minimal cost to connect the terminals in `mask` with the resulting subgraph ending at city `v`.
   - Combine smaller submasks to build larger masks and relax using precomputed shortest path distances.
4. For any subset containing whole assignments (both endpoints of each pair or none), take the best cost over all end cities.
5. Run a second DP over masks to partition the four assignments into components, combining their costs. The answer is `F[(1<<8)-1]`.

This examines at most 256 subsets and runs in `O(2^8 * n^2 + n^3)` time, which is feasible for `n ≤ 30`.
