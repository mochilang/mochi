# [Billiard](https://www.spoj.com/problems/BALL/)

## Problem Summary
On an \(x\times y\) board a ball is released from field \((a,b)\) and rolls at
45Â° angles, reflecting off the borders. Each time the ball passes through a
field we mark it. The process stops when the starting field is hit again. For
each test case, output how many fields are marked an odd number of times.

## Algorithm
Reflect the board across its edges. The ball's diagonal path is equivalent to a
straight line in the tiled plane. Let
\(g = \gcd(x-1, y-1)\).

If both \(a-1\) and \(b-1\) are divisible by \(g\), the line passes through an
opposite corner and only the starting and opposite fields have odd counts, so
the answer is 2.

Otherwise the ball cycles through other fields. In this case let
\(s = \frac{x-1}{g} + \frac{y-1}{g}\). The number of fields with odd counts is
`4*s` plus 2 more when \(s\) is odd.

This computation is \(O(1)\) per test case.
