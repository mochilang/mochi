# Containers

Problem: [CTAIN - Containers](https://www.spoj.com/problems/CTAIN/)

We are given up to four containers. Initially each container is full. In one move we may:

1. pour all water from one container into another if the second has enough free space,
2. pour just enough water from one container to fill another to the top, or
3. empty a container into the drain.

For each test case we must determine the minimum number of moves to reach a specified final configuration of water levels or report that it is impossible.

## Algorithm

Treat a configuration as a vector of current volumes. Starting state is the list of capacities; goal state is the desired list.

Perform breadth‑first search over configurations. Encode a state to a unique integer using mixed radix with bases `capacity[i] + 1` so it can be stored in a map for constant‑time visited checks.

From each state generate neighbours:

- Empty container `i`.
- For every pair of containers `i` and `j`, if all water from `i` fits in `j`, move it.
- If container `i` has enough water to fill `j` to capacity, transfer only the required amount.

The first time the goal state is dequeued we have the minimum number of moves. If the BFS queue is exhausted without visiting the goal, output `NO`.

## Complexity

Let `C` be the product of `(capacity[i] + 1)` for all containers. At most `C` states are explored. Each state generates `O(n^2)` transitions for `n ≤ 4`, so the worst‑case time complexity is `O(C * n^2)` and memory usage is `O(C)`. With `C ≤ 50^4`, this is under about 6.25 million states.
