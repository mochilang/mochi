# HANOI07 - Building the Tower

[Link to problem](https://www.spoj.com/problems/HANOI07/)

## Algorithm

We are given `N` cubes and want to build a tower of `H` levels. The bottom
level uses `M` cubes. Each level above must have exactly one cube more or less
than the level directly below it. All cube counts must be positive and the
total number of cubes used may not exceed `N`.

Dynamic programming is used. Let `dp[j][s]` be the number of ways to reach a
level with `j` cubes using exactly `s` cubes in total. Initially
`dp[M][M] = 1` for the bottom level. For each additional level we build a new
table `next` and for every state `(j, s)` we transition to `j-1` and `j+1`
(levels differing by one cube) while increasing the sum by the new level's
cube count. Sums above `N` are discarded. After processing all `H` levels we
sum all `dp[j][s]` to obtain the answer.

`maxCube = M + H - 1` bounds the cube count at any level, and the total sum is
bounded by `H*M + (H-1)*H/2`. Therefore the DP table fits in
`O(H * maxCube * limit)` where `limit` is the smaller of `N` and the maximum
possible sum.

## Complexity

- Time: `O(H * maxCube * limit)`
- Space: `O(maxCube * limit)`

`maxCube = M + H - 1` and `limit = min(N, H*M + (H-1)*H/2)`.
