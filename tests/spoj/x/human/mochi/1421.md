# [Goods](https://www.spoj.com/problems/FIRM/)

## Problem Summary
We are given a permutation describing which dealer wants the goods of each other dealer. Each day dealers may exchange goods in disjoint pairs and each dealer participates in at most one swap per day. The goal is to find the minimum number of days for every dealer to obtain the desired goods and to output one possible schedule.

## Algorithm
1. Build permutation `p` where `p[j]` is the dealer who wants the goods of dealer `j`.
2. Decompose `p` into disjoint cycles.
3. For each cycle of length `k`:
   - If `k = 1`, no action is needed.
   - If `k = 2`, the two dealers swap on day one.
   - If `k â‰¥ 3`, factor the cycle into two matchings:
     - **Day 1:** pair `c[i]` with `c[k-2-i]` for `i = 0 .. (k-3)/2`.
     - **Day 2:** pair `c[i]` with `c[k-1-i]` for `i = 0 .. k/2 - 1`.
4. Combine pairs from all cycles. If day two has no pairs, only one (or zero) day is needed; otherwise two days suffice.

## Complexity
The cycle decomposition and schedule construction run in `O(n)` time and `O(n)` space.
