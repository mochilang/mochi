# [SCRAPER - Skyscraper Floors](https://www.spoj.com/problems/SCRAPER/)

## Algorithm

- Each elevator stops on floors `Y + k*X` (for `k \ge 0`).
- For floor `A` and `B`, determine which elevators service these floors.
- Build a graph where nodes are elevators. Two elevators share an edge if their
  stopping sequences intersect on some floor `< F`. The intersection is detected
  by solving the system of congruences using the extended Euclidean algorithm and
  modular inverses.
- Run BFS from all elevators that stop on floor `A`. If any elevator reachable
  via BFS also stops on floor `B`, then movement is possible.

The input size is small (`E < 100`), so the graph is tiny and BFS is efficient.

## Correctness Proof

Let `S_i` denote the set of floors that elevator `i` can reach. Our algorithm
connects two elevators `i` and `j` with an edge exactly when `S_i ∩ S_j` contains
at least one floor `< F`. This is equivalent to the possibility of transferring
between these elevators, because both can stop at some common floor.

The BFS explores all elevators reachable from any elevator servicing floor `A`.
A path in this graph corresponds to a sequence of elevator rides where adjacent
rides share a common floor. Therefore, if BFS reaches any elevator that services
floor `B`, there exists a sequence of elevator transfers from floor `A` to `B`.
Conversely, any feasible sequence of elevator rides yields a path in our graph,
so if BFS cannot reach an elevator servicing `B`, moving the furniture is
impossible. Hence, the algorithm is correct.

## Complexity Analysis

Let `E` be the number of elevators (≤ 100).

- Checking intersection for all pairs takes `O(E^2)` time.
- BFS on the resulting graph also takes `O(E^2)` time in the worst case.

Overall complexity is `O(E^2)`, which is easily fast for the given limits.

## References

- [Chinese Remainder Theorem](https://en.wikipedia.org/wiki/Chinese_remainder_theorem)
