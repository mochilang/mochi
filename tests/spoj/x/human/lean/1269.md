# CNHARD - CN Tower (Hard)

Christy stands in the rotating 360° restaurant of the CN Tower.  The
restaurant turns once every 72 minutes, i.e. one degree every 12 seconds.
For each landmark at a given compass angle she can take exactly one photo
whenever that angle points straight ahead.  Taking a picture uses a flash
that needs `F` seconds to recharge; the flash is initially charged and she
must also wait for one final recharge after the last picture.  Multiple
landmarks may share the same angle, in which case they must be shot on
different rotations of the restaurant.  The visit must finish before the
restaurant closes 2 hours 24 minutes (8640 s) after she arrives.

## Algorithm

1.  Read all angles and convert them to integers of hundredths of a degree.
    Using hundredths avoids floating point error.  We also work in time units
    of `1/25` seconds so that `angle * 12 s = angle * 3 / 25` becomes simply
    `angle * 3` in these units.
2.  Sort the angles.  For every angle choose it as the starting direction
    of Christy and rotate the list so that this angle is zero.  This considers
    all possible initial positions.
3.  For the rotated list, process the angles in increasing order:

       * Base time for an angle is `angle * 3` units.
       * If this time is earlier than the flash recharge moment, increase the
         time by whole multiples of a full rotation (`108000` units = 4320 s)
         until it is reachable when the angle appears again.
       * Record the shot time and continue.

4.  The total time for a starting angle is the last shot time plus the final
    recharge.  Take the minimum over all starting positions.
5.  If the minimum exceeds the closing time (`216000` units = 8640 s), output
    `not possible`.  Otherwise convert the minimum back to seconds, rounding up
    by `(time + 24) / 25`.

The complexity is `O(n^2)` for `n ≤ 1000`, which is easily fast enough.
