# [BRCKGAME - A Game of Toy Bricks](https://www.spoj.com/problems/BRCKGAME/)

## Algorithm

1. Each cuboid may be rotated.  For every cuboid generate the three
   possible orientations where one side is the height and the other two
   (sorted so `length ≥ width`) form the base.
2. Precompute `seg[l][r]` – the maximum stack height obtainable using
   only cuboids with ids in `[l, r]`.
   For a fixed `r` process indices from `r` down to `0` and for every
   orientation try to place higher cuboids on top.  Dynamic programming
   over orientations allows computing all `seg[l][r]` values for this `r`
   in `O(r^2)` time.
3. Let `dp[i][k]` be the best total height using the first `i` cuboids
   split into exactly `k` piles.  Transition:
   `dp[i][k] = max_{j < i} dp[j][k-1] + seg[j][i-1]`.
4. Answer is `dp[N][M]`.

The complexity is `O(N^3)` with `N ≤ 100`.

## Correctness

- All orientations are considered, hence every allowed rotation is
  explored.  Within a segment `[l, r]` the dynamic program only stacks
  cuboids whose base fits on the current one and whose ids increase, so
  every valid pile height is tested and the maximum is stored in
  `seg[l][r]`.
- The partition DP tries every possible split of the ids into `M`
  ordered piles.  Each candidate uses the precomputed optimal height for
  its segment, so no better arrangement exists.
- Therefore `dp[N][M]` equals the maximum achievable total height.

## Complexity Analysis

Let `N` be the number of cuboids and `M` the number of piles.
- Computing all `seg[l][r]` values is `O(N^3)`.
- The partition DP is `O(N^2 * M)` which is at most `O(N^3)`.

Hence the overall complexity is `O(N^3)` and fits easily within the
constraints.

## References

- Dynamic programming over intervals.
