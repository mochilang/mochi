# [HEXAGON](https://www.spoj.com/problems/HEXAGON/)

To maximize the score we consider the board as a hexagon of radius two.  The
19 cells can be addressed by the indices of the three families of parallel
lines (we call them *x*, *y* and *z*).  Each family has five lines with lengths
`3,4,5,4,3`.

For every line we have to choose one of the three numbers given for its
orientation.  The total score is the sum over every line of `length * number`.
The chosen pieces must be unique: the triple of numbers at each cell must be
all different.

There are only `3^5 = 243` possible assignments for one direction.  We
pre-compute all such assignments together with their partial scores.  We then
iterate over every combination of assignments for the three directions
(`243^3 ≈ 14M`).  For a fixed combination we check the 19 cells.  Using a
27‑bit mask (because we have 3×3×3 different pieces) we verify that all triples
are distinct.  When the check passes we update the maximum score.

The method is fast because the search space is tiny and the uniqueness test is
pure bit arithmetic.
