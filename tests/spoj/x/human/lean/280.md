# [Lifts](https://www.spoj.com/problems/LIFTS)

## Problem Summary
A hero must cross a chasm using a sequence of vertically moving lifts.  Each lift moves
between heights `li` and `ui` at speed 1 m/s, starting at height `si` and moving in
direction `di` (`1` for up, `-1` for down).  The hero stands 2 m before the first edge and
moves at 2 m/s.  To step from one platform to the next he must start running exactly one
second before they are at the same height; each transfer takes 2 seconds.  Determine the
minimum time to reach the opposite side or output `-1` if it is impossible.

## Algorithm
1. Model the start and the opposite edge as stationary platforms at height `0`.
2. For each pair of consecutive platforms `i` and `i+1` we must find the earliest time `S`
   not earlier than `current + 1` when their heights are equal.  The hero begins running at
   `S − 1` and reaches the centre of platform `i+1` at `S + 1`.
3. Each lift's motion is periodic with period `4(ui − li)` when measured in half-second
   units.  Heights can only match at multiples of `0.5` seconds, so times and positions are
   scaled by two to work with integers.
4. Search for the smallest `S` by iterating `t` from `S_min` up to `S_min + lcm(period_i,
   period_{i+1})`, checking equality of the two heights at each half-second.
   If no equality occurs within one period the crossing is impossible.
5. Accumulate the arrival time `current := S + 1` and repeat for the next pair.

The total complexity is `O(n * L)` where `n ≤ 100` and `L` is the least common multiple of
adjacent periods (at most about 640,000 iterations per pair).
