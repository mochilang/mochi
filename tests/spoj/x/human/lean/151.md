# COURIER - The Courier

[Problem link](https://www.spoj.com/problems/COURIER/)

The courier must deliver several parcels between cities connected by weighted undirected roads. He starts and ends at home city `b` and can carry only one parcel at a time. For each parcel he must ride from his current location to the sender city, then to the recipient city. We must find the minimal total distance to complete all deliveries.

## Algorithm

1. **All-pairs shortest paths**: the graph has at most 100 nodes, so Floyd–Warshall computes the minimum distance between every pair of cities in `O(n^3)`.
2. **Expand requests**: each order `u v b` represents `b` identical parcels from `u` to `v`. Expand them into a list of at most 12 individual tasks.
3. **DP over subsets**: let `dp[mask][i]` be the minimal cost to perform the set of tasks encoded by `mask` and finish at city `i`. Initialize `dp[0][b] = 0`.
   For each state, try delivering any remaining parcel `k`:
   - travel to its sender `u`, then to recipient `v` using precomputed distances,
   - update `dp[mask ∪ {k}][v]`.
4. The answer is `min_i dp[full][i] + dist[i][b]`, returning to home.

`2^p * p * n` with `p ≤ 12` and `n ≤ 100` is easily fast.
