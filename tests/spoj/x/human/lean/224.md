# [Vonny and her dominos](https://www.spoj.com/problems/VONNY)

## Problem Summary
Given a 7×8 grid filled with numbers 0–6 and a standard double-six domino set
containing one tile for every unordered pair of numbers `(a,b)` with
`0 ≤ a ≤ b ≤ 6`, count the number of tilings of the grid using each domino
exactly once. A domino may cover two adjacent cells only when its numbers match
the numbers written in those cells.

## Algorithm
1. **Bitmasks**
   - Represent the board cells by a 56‑bit mask where bit `i` indicates whether
     the cell at index `i` (row-major order) is already covered.
   - Represent the 28 domino types by another mask; each unordered pair
     `(a,b)` maps to a unique index `0..27` using a simple triangular formula.
2. **Depth‑First Search**
   - Scan for the first uncovered cell `pos`. Try placing a domino horizontally
     to the right and vertically downward when the neighbor is free.
   - For each placement, compute the corresponding domino index. If the domino
     is still unused, set the appropriate bits in both masks and recurse on the
     next position.
3. **Termination**
   - When all 56 cells are covered the recursion contributes one valid tiling.
   - The total number of tilings is the sum over all recursive branches.

## Correctness Proof
We prove by induction on the recursion depth that the algorithm counts every
valid tiling exactly once.

- **Base Case:** When all cells are marked used, the board is fully covered and
  exactly one tiling has been constructed. The algorithm returns `1`.
- **Induction Step:** Assume that for a given partial placement the recursive
  calls return the number of tilings extending that placement. The algorithm
  selects the first uncovered cell and explores all legal domino placements that
  include it. Each legal placement corresponds to a unique domino and set of
  two cells. After marking them, the recursive call explores all extensions. By
  the induction hypothesis, each extension is counted exactly once. Since the
  first uncovered cell must belong to some domino in every tiling, all tilings
  are generated and none are repeated.

Therefore the algorithm outputs exactly the number of tilings of the board with
all dominos.

## Complexity Analysis
The search depth is 28 (number of dominos). Each step considers at most two
placements, so the worst‑case time is `O(2^28)`; however the domino mask prunes
many branches, and this bound is far smaller in practice. Memory usage is
`O(1)` apart from recursion stack.
