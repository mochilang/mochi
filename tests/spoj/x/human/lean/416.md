# Solution for [DIV15 - Divisibility by 15](https://www.spoj.com/problems/DIV15/)

We are given a string of digits (length up to 1000). From these digits we must build the largest
possible number that is divisible by **15**. Digits may be rearranged and any subset can be used at
most once.

A number divisible by 15 must satisfy two conditions:

1. The last digit is either `0` or `5` (divisible by 5).
2. The sum of digits is divisible by `3`.

For each test case we count occurrences of each digit `0â€¥9` and compute the total sum of digits.
Then we try both possible last digits `0` and `5` (if present). For a chosen last digit we reserve
one occurrence of it and attempt to delete the minimal amount of other digits so that the remaining
sum of digits becomes divisible by `3`.

To adjust divisibility by 3 we remove the smallest possible digits:

- If the total sum modulo 3 is `1`, remove one digit from `{1,4,7}` if possible, otherwise remove two
  digits from `{2,5,8}`.
- If the total sum modulo 3 is `2`, remove one digit from `{2,5,8}` if possible, otherwise remove two
  digits from `{1,4,7}`.

After adjusting, the remaining digits are arranged in descending order and the chosen last digit is
appended. Leading zeros are stripped; if all digits are zeros the result is `0`.
Among both candidates we output the numerically largest; if no candidate exists we output
`impossible`.
