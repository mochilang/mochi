# [Phony Primes](https://www.spoj.com/problems/PHONY)

## Problem Summary
Find all numbers `N` in a given range `[Nmin, Nmax]` such that:
- `N` is odd and square-free with at least three distinct prime factors `p₁ … p_k`.
- For every prime factor `pᵢ`, `(pᵢ - 1)` divides `(N - 1)`.
These numbers are known as **Carmichael numbers**.

## Algorithm
1. **Prime sieve** – precompute all primes up to `√(2³¹) ≈ 46340` once using the Sieve of Eratosthenes.
2. **Check each candidate** in the query range:
   - Skip even numbers.
   - Factor `N` using the prime list while verifying:
     - Every prime factor divides `N` only once (square-free).
     - `(N−1) mod (p−1) = 0` for each factor `p`.
   - Include the remaining factor if `N` still has a prime part `> 1` and verify the same condition.
   - Accept `N` if all tests pass and at least three prime factors were found.
3. Output all accepted numbers or `none` if none were found.

## Correctness
- The sieve generates exactly all primes needed for trial division, so every prime factor of `N` is considered.
- The algorithm verifies the defining properties of Carmichael numbers: odd, square-free, and for each prime factor `p`, `p − 1` divides `N − 1`.
- Requiring at least three distinct factors ensures `N` is composite with enough factors, matching the problem definition.

## Complexity
Let `L = Nmax − Nmin ≤ 10⁶`. Trial division uses at most the primes up to `√N` (`≈ 4800` primes) for each number. The overall time is `O(L · π(√N))`, which is fast enough for the given limits.
