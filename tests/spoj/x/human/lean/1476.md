# [Maximum Profit](https://www.spoj.com/problems/PROFIT)

## Problem Summary
Given `n` candidate service stations with setup costs `Pi` and `m` user groups.  Each group `i` uses stations `Ai` and `Bi` and yields profit `Ci` only when **both** stations are built.  Choose which stations to build to maximise total profit minus setup cost.

## Algorithm
1. Model the problem as a *maximum weight closure*.
   - For every station `i` create a node with weight `-Pi`.
   - For every user group create a node with weight `Ci` and add directed edges from it to its two stations.  Selecting the profit node requires selecting both stations.
2. Build a flow network:
   - Source connects to all positive weight nodes with capacity equal to the weight.
   - Negative weight nodes connect to the sink with capacity equal to `-weight`.
   - Dependency edges use very large capacity.
3. Run a max‑flow (Edmonds–Karp) on this network.  The maximum profit is `totalPositiveWeight - maxFlow`.

This construction chooses the most profitable subset in polynomial time.
