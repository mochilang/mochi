# SPOJ BOOKCASE - The Bookcase

We need to divide `N` books into three non-empty shelves.  Each book has
height `h_i` and thickness `t_i`.  For a shelf the height is the maximum
`h_i` among the books placed there, while the bookcase width is the maximum
of the three sums of thickness.  The goal is to minimise

```
(total shelf heights) × (maximum shelf width)
```

## Algorithm

1. Sort the books in non-increasing order of height.  When we process the
   books in that order, the first book assigned to a shelf determines its
   height because all later books are no taller.
2. Dynamic programming over the current widths of the first two shelves and
a bitmask telling which shelves are already used.
   - State `(w1,w2,mask)` stores the minimum sum of heights for the shelves
     already used.  `w3` is implicit from the total processed thickness.
3. For every book we update the DP by trying to put it on shelf 1, 2 or 3.
   When a shelf receives its first book, its height is added to the
   cumulative height sum.
4. After all books are processed, among states where all three shelves are
   used (mask `111`) we compute the third width
   `w3 = totalThickness − w1 − w2`, width `= max(w1,w2,w3)` and area
   `= heightSum × width`.  The minimum area is the answer.

The total thickness is at most `70 × 30 = 2100`, therefore the number of
reachable `(w1,w2)` pairs is manageable and the hash map based DP remains
small.

## Complexity

`O(N × S)` states where `S` is the number of reachable `(w1,w2)` pairs
(about two million in the worst case).  Each transition is `O(1)` so the
solution easily fits within limits.
