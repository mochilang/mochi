# SPOJ CHAIN – Strange Food Chain

We maintain a disjoint-set union structure that tracks, for every animal, its relation to the representative of its set.  The array `parent` stores the parent indices, while `rel[x]` keeps `(type[x] - type[parent[x]]) mod 3`, with values:

* `0` – same species
* `1` – `x` eats its parent
* `2` – `x` is eaten by its parent

For each statement we find the roots of `x` and `y`, updating relations by path compression.  If the roots coincide we verify that the implied relation between `x` and `y` matches the statement; otherwise the statement is false.  If the roots differ we merge the sets and set the relation of the root of `x` so that the required difference holds.

Statements with invalid indices or of the form `2 x x` are immediately counted as false.  The disjoint-set operations run in near-constant amortized time, so processing up to `k` statements over `n` animals is overall almost linear.
