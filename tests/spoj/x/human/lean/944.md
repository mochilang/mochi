# FTOUR - Free Tour

[Problem statement](https://www.spoj.com/problems/FTOUR/)

We are given up to five undirected graphs (\(1 \le N \le 8000\), \(0 \le M \le 10000\)).
A tour is a simple cycle whose number of edges must be even. The task is to find such a
cycle with the minimum possible number of edges and output its vertices in order,
or report `-1` if none exists.

## Algorithm

For each vertex of the graph we perform a breadth‑first search (BFS).
During BFS we keep distance and parent arrays.
Whenever we process an edge \((v, w)\):

1. If `w` is unvisited, we set its distance and parent and enqueue it.
2. If `w` has already been visited and `w ≠ parent[v]`, we discovered a cycle.
   The length of this cycle is `dist[v] + dist[w] + 1`.
   If this length is even and smaller than the best found so far, we rebuild the cycle:
   - Build ancestor chains from `v` and `w` back to the root.
   - Find their lowest common ancestor.
   - The cycle is the path from `v` up to the LCA, down to `w`, and finally edge `(w, v)`.

We keep the shortest even cycle over all BFS runs and output it if found.

## Complexity

Each BFS takes `O(N + M)` time. Running BFS from every vertex yields a worst‑case
complexity of `O(N·(N + M))`, which is acceptable for the given constraints.
Memory usage is `O(N + M)`.
