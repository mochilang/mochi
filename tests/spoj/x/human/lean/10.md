# [CMEXPR - Complicated Expressions](https://www.spoj.com/problems/CMEXPR/)

We must remove every pair of parentheses that does not change the meaning of
an arithmetic expression.  Operators `*` and `/` have higher precedence than
`+` and `-` and all operators are left-associative.  Parentheses may also be
removed when the operations are associative:

* `a+(b-c)` → `a+b-c`
* `a*(b/c)` → `a*b/c`

The algorithm parses the expression into a syntax tree using the grammar

```
Expr  ::= Term ((+|-) Term)*
Term  ::= Factor ((*|/) Factor)*
Factor ::= variable | '(' Expr ')'
```

When printing the tree we add parentheses only when they are required:

* a child with lower precedence than its parent must be parenthesized;
* the right child of `-` must be in parentheses when it is `+` or `-`;
* the right child of `/` must be in parentheses when it is `*` or `/`.

This yields the minimal equivalent expression.
