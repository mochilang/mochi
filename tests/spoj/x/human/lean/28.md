# [Help the Military Recruitment Office!](https://www.spoj.com/problems/HMRO/)

## Problem Summary
Each recruit has a PESEL identifier and is initially assigned to a regional Military Recruitment Office (MRO). Some MROs close and their recruits are transferred to other offices, possibly through chains of closures. For a given list of recruits we must output their final MRO codes.

## Algorithm
1. Read the initial mapping from PESEL numbers to MRO codes.
2. Read all closure relations `old -> new` into a hash map.
3. To determine the final code for an office, follow the `old -> new` links until a code that is not closed is reached. Memoise results so each code is resolved once.
4. For each queried PESEL, output the PESEL together with the resolved MRO code.

This pathâ€‘compression approach runs in linear time with respect to the input size.
