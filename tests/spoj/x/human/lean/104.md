# [HIGHWAYS](https://www.spoj.com/problems/HIGHWAYS/)

Given up to 12 cities and a list of potential two-way roads, count how many different highway networks can be built so that there is exactly one simple path between every pair of cities. Two networks differ if some pair of cities is directly connected in one network but not in the other.

## Algorithm

We need the number of spanning trees in an undirected graph.  For a graph with `n` vertices the matrix-tree theorem (Kirchhoff's theorem) states that this count equals the determinant of any `(n-1)×(n-1)` cofactor of the Laplacian matrix `L`:

* `L[i][i]` – degree of vertex `i`.
* `L[i][j]` for `i ≠ j` – `-1` if an edge `i–j` exists, otherwise `0`.

Steps for each test case:

1. Build the `n×n` Laplacian matrix from the given edges.
2. Delete the last row and column to obtain a minor of size `(n-1)×(n-1)`.
3. Compute its determinant using Gaussian elimination with rational arithmetic to avoid precision loss.
4. The resulting integer is the number of spanning trees.

The constraints are small (`n ≤ 12`), so an `O(n³)` elimination is easily fast enough.  When `n = 1` the answer is defined to be `1`.
