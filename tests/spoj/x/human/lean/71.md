# [Tree](https://www.spoj.com/problems/TREE1)

## Problem Summary
Given a binary search tree with keys `1..n` described by its preorder sequence, determine how many permutations of `1..n` yield exactly this tree when inserted into an empty BST.

## Algorithm
1. Recursively process the preorder sequence.
2. The first element is the root. In the remaining sequence all elements smaller than the root form the preorder of the left subtree and appear first. The rest form the right subtree.
3. Let `L` and `R` be the lengths of the left and right subsequences. The number of insertion orders for this node is `C(L+R, L)` times the counts for the left and right subtrees.
4. Compute binomial coefficients using factorials of `Nat` (arbitrary precision integers).

The recursion visits each node once. With `n â‰¤ 30` this approach easily fits within time and uses big integers to handle large results.
