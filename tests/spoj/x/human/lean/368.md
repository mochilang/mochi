# [CSTREET - Cobbled streets](https://www.spoj.com/problems/CSTREET/)

## Algorithm

- For each test case, read the price `p`, number of buildings `n`, and number of streets `m`.
- Store each street as an edge `(u, v, w)` where `w` is its length.
- Sort all edges by increasing length and run Kruskal's algorithm:
  - maintain a disjoint-set union (DSU) of the buildings;
  - for each edge in order, if its endpoints are in different sets, merge the sets
    and add `w` to the total length.
- Multiply the total length of the resulting minimum spanning tree by `p` to obtain
  the minimal paving cost.

## Correctness Proof

Kruskal's algorithm processes edges in nondecreasing order of length and adds an
edge only when it connects two previously disconnected components. Each added
edge is the cheapest possible connection between two components, hence every edge
is part of some minimum spanning tree (MST). The algorithm never forms a cycle,
so the set of added edges is acyclic and connects all buildings; therefore it is
an MST.

The paved cost equals the sum of the lengths of the MST's edges multiplied by the
price `p`. Any other set of paved streets that connects all buildings must have
total length at least that of the MST, so its cost is not smaller. Thus our
output is the minimal possible cost.

## Complexity Analysis

Let `n` be the number of buildings (≤ 1000) and `m` the number of streets
(≤ 300000). Sorting the edges dominates the running time and takes
`O(m log m)`. DSU operations are nearly constant, so the overall complexity is
`O(m log m)` per test case.
