# [ICAMPSEQ - IOICamp Sequence](https://www.spoj.com/problems/ICAMPSEQ/)

## Problem Summary
Given $N$ points each described by four real numbers $(A_i,B_i,C_i,D_i)$, find the maximum value of
\(|A_i-A_j| + |B_i-B_j| + |C_i-C_j| + |D_i-D_j|\) over all pairs of points. Coordinates may be as large as $10^9$ and $N$ is up to $10^5$.

## Algorithm
The Manhattan distance between two 4-D points `p` and `q` can be written as
`max_{s in {±1}^4} (s·p - s·q)`, where each `s` is a 4-dimensional vector whose
components are either `+1` or `-1`. For a fixed sign pattern `s`, the quantity
`max_i (s·p_i) - min_i (s·p_i)` equals the maximum distance between any two
points whose optimal sign pattern is `s`.

We iterate over all 16 sign combinations. While reading each point, we compute
its dot product with each sign vector, updating the minimum and maximum values
seen so far. After processing all points, the answer is the largest difference
`max_i (s·p_i) - min_i (s·p_i)` across the 16 combinations.

## Correctness
For any pair of points `p` and `q`, the choice `s_j = 1` if `p_j >= q_j` and `-1`
otherwise yields `s·p - s·q = |p_1-q_1| + |p_2-q_2| + |p_3-q_3| + |p_4-q_4|`.
Thus the maximum Manhattan distance over all pairs is exactly the maximum over
sign patterns of the difference between the largest and smallest projection
values. Since the algorithm considers all sign patterns and tracks the extrema
for each, it computes this maximum correctly.

## Complexity Analysis
There are only $2^4 = 16$ sign patterns. Processing each of the $N$ points
updates all 16 projections, giving a time complexity of $O(16N) = O(N)$ and
constant additional memory.

## Reference Implementation (Lean)
```lean
-- implementation from tests/spoj/human/x/lean/1784.lean
```
