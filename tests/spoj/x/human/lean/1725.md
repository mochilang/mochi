# [The Importance](https://www.spoj.com/problems/IMPORT1/)

## Problem Summary
Given an undirected weighted graph, for each node *v* we define its importance as

\[I(v) = \sum_{s \ne v \ne t} \frac{C_{s,t}(v)}{C_{s,t}}\]

where $C_{s,t}$ is the number of shortest paths from $s$ to $t$ and $C_{s,t}(v)$
counts those passing through $v$. We must output $I(v)$ for every node with
three decimals.

## Algorithm
We use Brandes' algorithm for betweenness centrality adapted to weighted graphs.
For every source vertex $s$:

1. Run Dijkstra's algorithm to compute the shortest distance from $s$ to all
   vertices while also counting how many shortest paths reach each vertex
   (`sigma`). During relaxation we store predecessor lists for each vertex along
   shortest paths and record the order in which vertices are finalized.
2. Process the vertices in reverse order of their finalization to accumulate a
   dependency value `delta`. For every predecessor `v` of a vertex `w` we add
   `(sigma[v]/sigma[w]) * (1 + delta[w])` to `delta[v]`.
3. After processing all predecessors of `w`, add `delta[w]` to the importance of
   `w` (except when `w = s`).

Processing every node as a source yields the total importance for all vertices.
The complexity is $O(n^2 + nm)$ which is acceptable for $n \le 100$.
