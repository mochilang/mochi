# NAPTIME

[NAPTIME - Naptime](https://www.spoj.com/problems/NAPTIME/) asks us to choose exactly `B` periods in a circular day of `N` periods to sleep.  Each chosen period gives utility `Ui`, except that the first period of every consecutive block spent in bed yields no utility.

## Algorithm

We treat the day as circular, so there is at least one period that is not in bed.  Rotating the day so that this period comes first turns the problem into a linear sequence.  Dynamic programming over the periods and number of used bed slots then solves the task.

For the linear sequence we consider two initial states:

* **Start outside the bed.** The previous period is not chosen.
* **Start inside the bed.** The previous period is chosen; period 1 may continue an ongoing block.

For each case we run the same DP.  Let `dp0[j]` be the best utility after processing some prefix while currently out of bed having used `j` periods.  `dp1[j]` is the best utility while in bed after using `j` periods.  At each period `i` with utility `u[i]` we update:

* From `dp0[j]` we may stay out of bed (`dp0[j]`) or start a new block (`dp1[j+1]`, adding no utility).
* From `dp1[j]` we may leave bed (`dp0[j]`) or continue sleeping (`dp1[j+1]` with `+u[i]`).

The answer for a case is `max(dp0[B], dp1[B])`.  We take the maximum between the two starting scenarios.

## Correctness

By rotating the circular schedule we can assume the sequence begins either at a period not slept in or in the middle of a sleeping block.  These correspond exactly to the two starting states considered.  The DP transitions exhaustively model all possibilities for staying, entering or exiting bed at each period while tracking how many periods have been spent in bed.  Therefore every valid selection of `B` periods is considered, and the maximal total utility is returned.

## Complexity

Let `N` be the number of periods and `B` the number of periods spent in bed.  The DP processes each period with `O(B)` work, giving `O(N*B)` time and `O(B)` memory, well within the constraints (`N â‰¤ 3830`).

