# [Direct Visibility](https://www.spoj.com/problems/DIRVS)

## Problem Summary
Given a grid of size `P x Q` with terrain heights and two BTS locations, find the shortest path from the first BTS to the second. Movement is allowed only to orthogonally adjacent cells where the destination height is at most one metre higher and at least three metres lower than the current cell. After each step, at least one of the BTS must be directly visible from the technician's position.

## Algorithm
1. For every cell compute visibility to each BTS. Treat the technician and BTS as points half a metre above their cells and perform a 3D grid traversal (DDA) along the segment connecting them. If any terrain cube intersects the ray, the BTS is not visible from that cell.
2. Run a breadth-first search starting from the first BTS. A move to a neighbour is valid when the height restriction holds and the destination cell has visibility to at least one BTS. Record distances as steps.
3. When the target BTS is dequeued the distance is the length of the shortest valid path; if it is never reached, report that the mission is impossible.

## Complexity
Let `L` be the maximum of `P`, `Q` and the height range. Visibility computation is `O(P * Q * L)` and BFS is `O(P * Q)`.
