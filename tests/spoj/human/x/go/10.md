# [Complicated Expressions](https://www.spoj.com/problems/CMEXPR)

## Problem Summary
Given up to 10,000 algebraic expressions containing lowercase variables, operators `+`, `-`, `*`, `/` and parentheses, output each expression with all unnecessary parentheses removed while preserving the original evaluation order.

## Algorithm
1. **Parsing**: Use recursive descent to build an abstract syntax tree (AST) for each expression with the grammar
   - `expr -> term {(+|-) term}`
   - `term -> factor {(*|/) factor}`
   - `factor -> variable | '(' expr ')'`
   This respects the standard precedence of `*` and `/` over `+` and `-` and treats all operators as left-associative.
2. **Formatting**: Traverse the AST and emit the expression in infix form.
   - Compute precedence for each operator.
   - Parentheses are inserted around a child node only when the child's precedence is lower than its parent's, or when the parent is `-` or `/` and the child is the right operand (since these operators are not right-associative).
   - In all other cases parentheses are omitted.

This approach removes every redundant pair of parentheses while ensuring the resulting expression evaluates identically. The algorithm runs in linear time in the length of the expression and uses linear memory for the AST.
