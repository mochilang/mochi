# CARD - Cardsharper

Source: https://www.spoj.com/problems/CARD/

## Algorithm

1. Parse the shuffle `a` on `n` cards and the list of target shuffles `c_i`.
2. Enumerate every permutation `b` of `n` cards (there are `n!` possibilities).
3. For each candidate `b` perform a breadth‑first search over the group generated by
   `a` and `b`.
   - A state of the search is a permutation.
   - From each state we can apply shuffle `a` or shuffle `b`.
   - The search records for every reached permutation the sequence of used shuffles.
4. Count how many targets `c_i` are reachable with the current `b` and remember the
   best candidate.
5. For the chosen `b`, output:
   - its permutation in one line;
   - for every target `c_i`, either `-1` if it was not reached or the encoded
     sequence of alternating blocks of `a` and `b` powers that reproduces `c_i`.

The run‑length encoding starts with the number of leading `a` applications (which may
be zero) and alternates between blocks of `a` and `b`.

## Complexity

Let `n` be the number of cards and `k` the number of target shuffles.  The algorithm
enumerates `n!` candidates for `b` and for each performs a BFS over at most `n!`
permutations, resulting in a complexity of `O(n!^2 + n! * k)` which is feasible for
small `n`.
