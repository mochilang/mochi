# [Cutting out](https://www.spoj.com/problems/CUTOUT/)

## Problem Summary
Given an `n × n` square and up to `r` axis‑aligned rectangles already cut out, each defined by its left, right, bottom, and top offsets, find the maximum possible area of a new axis‑aligned rectangle that fits entirely in the remaining paper.

## Algorithm
1. **Coordinate Compression**: collect all unique `x` and `y` coordinates from rectangle edges together with `0` and `n`. Sort them to form a grid whose cells cover every possible maximal rectangle.
2. **Mark Removed Cells**: build a `rows × cols` boolean grid where a cell is marked if it is inside any removed rectangle. Widths of columns and heights of rows are stored separately.
3. **Largest Empty Rectangle**: scan each row while maintaining for every column the consecutive free height above it. For each row treat the heights array as a histogram with varying column widths and, using a quadratic scan, compute the largest rectangle area.
4. Track the maximum area over all rows and output it.

## Correctness Proof
- Every potential maximal rectangle's sides must coincide with existing rectangle edges or the square's border. After coordinate compression, every candidate rectangle aligns with grid lines, so checking combinations of grid cells suffices.
- The height accumulation turns each row into a histogram where every rectangle ending at the current row corresponds to a contiguous range in the histogram. The inner quadratic scan evaluates every such range and thus every possible rectangle.
- Therefore, the algorithm considers all axis‑aligned rectangles in the remaining area and returns the one with maximal area.

## Complexity Analysis
Let `k` be the number of unique coordinates (`k ≤ 2r + 2 ≤ 202`). The grid has at most `(k-1)²` cells. The algorithm performs `O(k³)` operations in the worst case, well within the given limits.
