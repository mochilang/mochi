# [Secret Code](https://www.spoj.com/problems/CODE1)

## Problem Summary
Given complex integers `X = Xr + i·Xi` and `B = Br + i·Bi`, express `X` in base `B` with digits `0 ≤ a_i < |B|`.  Find digits `a_n … a_0` such that `X = Σ a_i B^i` or report that it is impossible.

## Algorithm
1. Compute the base norm `N = Br² + Bi²` and the digit limit `L = ceil(sqrt(N))` because `|B| = sqrt(N)`.
2. Repeat up to 100 times:
   - Search for a digit `r` from `0` to `L-1` such that `X - r` is divisible by `B`.
     To test divisibility, multiply `(X - r)` by the conjugate of `B` and check that
     both real and imaginary numerators are multiples of `N`.
   - If such a digit exists, append `r` and update `X := (X - r) / B`.
   - If no digit works, the code cannot be decrypted.
3. Once `X` becomes `0`, output the collected digits in reverse order (most significant first).

## Correctness Proof
- At each step we choose `r` so that `X - r = q·B` for some Gaussian integer `q`, hence
  `X = q·B + r` with `0 ≤ r < |B|`.
- Repeating the process on `q` gives digits `a_0, a_1, …, a_n` with
  `X = a_0 + a_1 B + ⋯ + a_n B^n` by induction.
- The norm of `X` decreases after each division because `|B| > 1`,
  so the loop terminates after finitely many steps. If termination fails within 100 steps,
  no valid representation exists and we correctly output failure.

## Complexity Analysis
Each step checks at most `L ≤ 23` digits and performs constant‑time arithmetic.
The algorithm performs at most 100 steps, so one test case runs in `O(L)` time.

