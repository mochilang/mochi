# Assembler circuits

The program contains assignments of the form `Op xyz` where `Op` is one of `A..D` and `x,y,z` are registers.
Each instruction replaces register `z` with the result of applying the operation to registers `x` and `y`.
We want the minimal number of gates in a circuit producing the same final register values.

## Algorithm

* Treat every initial register value as a unique variable (IDs `0..25`).
* Process each instruction in order and build expression IDs:
  * For inputs `a` and `b` with current IDs `id1` and `id2`, check if the triple `(op,id1,id2)` already has a node in a hash map.
  * If it exists reuse its node ID; otherwise create a new node, remember its children `(id1,id2)` and assign a fresh ID.
  * Register `z` now stores that node ID.
* After all instructions, the ID stored in each register describes its final expression tree.
* Starting from all register IDs perform a DFS/BFS through the stored child pairs to mark reachable nodes (ignore the initial 26 variables).
* The number of visited nodes is the minimal gate count.

## Correctness

Because the map ensures that structurally identical operations share one node, all common subexpressions are computed once. Registers hold expression IDs forming a DAG. Traversing from all registers collects exactly the nodes required to produce every final value, hence the count equals the smallest circuit.

## Complexity

Let `n` be the number of instructions (â‰¤ 1000). Each instruction performs constant-time map operations. Traversal visits each node once. Overall time `O(n)` and memory `O(n)`.
