# [Building the Tower](https://www.spoj.com/problems/HANOI07/)

## Problem Summary
Given N cubes, build a tower of exactly H levels. The bottom level has M cubes.
Each higher level must contain exactly one more or one less cube than the level
below it, and every level must use at least one cube. A tower is valid if the
sum of cubes used by all levels does not exceed N. Count the number of distinct
valid towers.

## Algorithm
- Represent a tower as a sequence `a₁ … a_H` where `a₁ = M` and
  `|aᵢ - aᵢ₋₁| = 1` for `i > 1`.
- Use depth‑first search with memoization on state `(level, last, sum)`
  where `level` is the next level to fill, `last` is the cube count of the
  previous level, and `sum` is the total cubes used so far.
- Prune states with `sum > N` and finish when `level = H`.
- From each state, recurse to `last - 1` (if `last > 1`) and to `last + 1`
  (if the new sum is ≤ N).  Cache results for each state to avoid recomputation.

The maximum height is 60 and the total cubes are at most 32767, so the number of
reachable states is modest.  The memoized DFS runs quickly for the given
constraints.
