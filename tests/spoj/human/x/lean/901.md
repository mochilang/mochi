# Index Generation

[Problem link](https://www.spoj.com/problems/INDEXGEN/)

We scan each document character by character while tracking the current page.
Markers delimited by `{` and `}` may span lines; newlines inside markers become
spaces.  Spaces directly inside the braces or next to `%` and `$` are removed.

After cleaning a marker we parse optional primary (`%`) and secondary (`$`)
entries.  If `$` appears without `%`, the text before `$` is the primary entry.
A marker adds the current page to either the primary or the secondary entry.

Page numbers are stored in sets to avoid duplicates.  For each primary we keep a
map of its secondary entries and their page sets.  When a document is processed
we print primary entries sorted case-insensitively; secondaries under each
primary are sorted similarly.  Page lists are output in ascending order.
