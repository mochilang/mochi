# The Sum

[Problem link](https://www.spoj.com/problems/KPSUM/)

We write the digits of the sequence `1,2,3,...,N` and alternate `+` and `-`
starting with `+`.  The task is to evaluate this alternating sum.

## Algorithm

Let `alt(n)` be the alternating sum of the digits of a single number `n`,
starting with `+` for its most significant digit.  When numbers are written in
sequence the sign for the first digit of each number depends only on the parity
of the total number of digits written so far.

For a range of numbers with `k` digits we need either the plain prefix sum
`S0(x) = Σ alt(n)` or the alternating prefix sum
`S1(x) = Σ (-1)^n alt(n)`.  Both are computed with a digit dynamic program
that processes the decimal representation of `x`.  The DP keeps track of:

- position in the digit string,
- whether the current prefix is already smaller than `x` (`tight`),
- whether we have started the number (to ignore leading zeros),
- the sign for the next digit within the current number,
- the parity of the number built so far.

The DP returns for each state the sum of `alt(n)` and counts for even and odd
numbers; these values let us obtain both `S0` and `S1`.

To evaluate the expression for a given `N` we iterate over digit lengths from 1
up to `len(N)`.  For each block `[10^{k-1}, 10^k-1]` (clipped by `N`) we use
`S0` or `S1` depending on whether `k` is even or odd and adjust the overall
sign according to the number of digits written so far.  The total is updated and
the parity of the digit stream is maintained for the next block.

The maximum number of digits is only 16, so the DP runs quickly.
