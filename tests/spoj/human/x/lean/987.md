# MOBILE - Mobile

The input matrix stores for every pair of CDs the height of the lowest bar that carries them both.  All CDs hang at the same height, so valid matrices describe an *ultrametric*: a symmetric matrix with zero diagonal where for every triple of CDs the two largest pairwise values are equal.

To validate a matrix we bucket all off-diagonal pairs according to their height (values are below 2048).  We then scan the buckets in increasing order while maintaining a disjoint-set union of CDs.
For every height `h` we first check that no pair in the `h` bucket already belongs to the same setâ€”otherwise there exists a path using only smaller heights that contradicts the ultrametric condition.  After this verification we merge all pairs of height `h`.
If all buckets pass these checks, the matrix represents a feasible mobile; otherwise it does not.

The union-find operations make the algorithm almost linear in the number of pairs, i.e. `O(N^2)` for a matrix of size `N`.
