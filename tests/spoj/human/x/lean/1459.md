# AEROLITE - The Secret of an Aerolite

The task asks for the number of well formed bracket expressions with
`L1` pairs of `{}`, `L2` pairs of `[]` and `L3` pairs of `()` whose
depth is exactly `D`. Depth is the maximum number of simultaneously open
brackets.  The result is required modulo `11380`.

Let `F[a][b][c][d]` denote the number of expressions using `a` pairs of
`{}`, `b` pairs of `[]`, `c` pairs of `()` and having depth at most `d`.
The grammar of valid expressions allows concatenation and enclosing a
subexpression by any of the three bracket types.  This yields the
recurrence

```
F[a][b][c][d] =
  Σ F[ai][bi][ci][d-1] * F[a-1-ai][b-bi][c-ci][d]   (use `{}` outside)
  + Σ F[ai][bi][ci][d-1] * F[a-ai][b-1-bi][c-ci][d] (use `[]` outside)
  + Σ F[ai][bi][ci][d-1] * F[a-ai][b-bi][c-1-ci][d] (use `()` outside)
```

where the sums iterate over all splits of the available pairs between the
inner part and the remaining suffix.  The base cases are
`F[0][0][0][d] = 1` for any `d` and `F[a][b][c][0] = 0` when the counts
are non‑zero.  Because `L1`, `L2`, `L3 ≤ 10` and `D ≤ 30` the table has
only around forty thousand states and is computed with memoisation.

The number of expressions of depth exactly `D` is obtained by
`F[L1][L2][L3][D] - F[L1][L2][L3][D-1] (mod 11380)`.
