# [Two Ends](https://www.spoj.com/problems/TWENDS)

## Problem Summary
Two players alternately take one card from either end of a row of cards. The
second player always follows a greedy strategy: she removes the larger end (with
ties resolved to the left). The first player may play optimally. For a given
sequence of card values we must compute the maximum possible difference between
the first player's score and the second player's score when the second player
uses the greedy strategy.

## Algorithm
Let `dp[l][r]` denote the maximum score difference `P1 - P2` achievable from the
subarray `a[l..r]` when it is the first player's turn. Because the second player
immediately follows every move with a greedy choice, the subproblem always has
an even number of remaining cards.

For a state `(l, r)` the first player has two options:
1. **Pick left `a[l]`.** The second player greedily picks from the new ends of
   `a[l+1..r]`, leaving either `a[l+2..r]` or `a[l+1..r-1]` depending on which
   end was larger. The resulting difference is `a[l] - picked + dp[new_l][new_r]`.
2. **Pick right `a[r]`.** Similar reasoning applies.

`dp[l][r]` is the maximum of these two options. We compute the values with
memoised recursion (top‑down dynamic programming). The answer for a game with
`n` cards is `dp[0][n-1]`.

The complexity is `O(n^2)` per test case, which is feasible for `n ≤ 1000`.
