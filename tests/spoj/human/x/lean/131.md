# [Square dance](https://www.spoj.com/problems/SQDANCE/)

This problem simulates rounds of eliminations on a grid of dancers. Each dancer has a skill value and interacts with the nearest dancer in each of the four cardinal directions. In every round we:

1. Compute the sum of skills of all currently active dancers and add it to the final score.
2. Mark dancers whose skill is strictly less than the average skill of their available neighbors.
3. Remove the marked dancers and update neighbor links so that the next surviving dancer in each direction becomes adjacent.
4. Repeat until no dancer is removed in a round.

The algorithm maintains for every cell the indices of its nearest neighbors. When a dancer is eliminated we reconnect its neighbors directly. Only dancers affected by removals are reconsidered in subsequent rounds. The process runs in near linear time with respect to the number of cells.
