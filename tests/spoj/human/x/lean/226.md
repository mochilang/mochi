# [Jewelry and Fashion](https://www.spoj.com/problems/JEWELS/)

## Problem Summary
Given a string of lowercase letters representing a necklace, cut it once so that
the two resulting parts can each be turned into an earring.  After cutting we may
remove any number of stones from both parts so that the remaining stones in each
earring have identical colour sequences.  The second part may also be rotated by
180°, which corresponds to reversing its sequence.  For every test case we must
output the maximum total number of stones used in the pair of earrings and the
leftmost cut position achieving it.

## Algorithm
For every possible cut position `k` (1 ≤ k < n):
1. Split the string into prefix `L = s[0:k]` and suffix `R = s[k:n]`.
2. Compute the length of the longest common subsequence (LCS) between `L` and `R`.
3. Compute the LCS between `L` and the reversed suffix `reverse(R)`.
4. Take the larger of the two LCS lengths.  If it exceeds the best length seen
   so far, update the answer to `(2 * LCS, k)`.

The LCS between two sequences is computed with the classic dynamic programming
approach using two rows of size `|R| + 1`.

## Correctness Proof
We consider a fixed cut position `k`.
- Any pair of earrings obtainable from this cut must correspond to choosing
  subsequences of `L` and `R` that are equal, or subsequences of `L` and
  `reverse(R)` when the second part is flipped.  Therefore the longest possible
  earring length for this cut is exactly twice the maximum LCS value computed in
  steps (2) and (3).
- By enumerating all possible cut positions, we examine every feasible division
  of the string.  The algorithm stores the leftmost cut achieving the maximal
  length, satisfying the problem's tie-breaking rule.

Hence the algorithm outputs the maximum total length of earrings and a suitable
cut position.

## Complexity Analysis
Let `n` be the length of the string.  Computing the LCS for one cut takes
`O(n^2)` time.  We perform this for each of the `n − 1` cut positions, leading to
`O(n^3)` time in the worst case and `O(n^2)` memory for the LCS computation.
This is sufficient for the sample tests.
