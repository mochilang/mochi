# [Timetable](https://www.spoj.com/problems/TTABLE)

## Problem Summary
You are given departure timetables for n cities. Each entry provides a
departure time, an arrival time and a destination city. Passengers may
change trains instantly but cannot board a train that leaves before they
arrive at a station. For city 1 we must list all optimal connections to
city n. A connection starting at time A and arriving at time B is optimal
if there is no other connection that starts not earlier than A, ends not
later than B and has strictly shorter travel time.

## Algorithm
1. Convert all times to minutes.
2. Start a search from every train leaving city 1. Each state stores the
   current city, the time of arrival there and the initial departure time
   from city 1.
3. Maintain a map of the earliest arrival time for every pair of current
   city and starting time; states that do not improve this map are ignored.
4. When a state reaches city n, record its starting and arrival times.
5. Otherwise, enqueue every outgoing train whose departure is at least the
   current time, keeping the original starting time.
6. After exploring all states, remove dominated connections (a later start
   with an equal or earlier arrival and shorter duration) and output the
   remaining pairs sorted by departure time.

## Complexity
Let m be the total number of timetable entries. Each state corresponds to
following one train, so at most m states are processed. For each state we
inspect the outgoing trains of its city, giving a worstâ€‘case time
complexity of O(m). Memory usage is O(m) for storing the timetable and
visited states.
