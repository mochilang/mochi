# ACS - A concrete simulation

We maintain permutations for rows and columns of the $1234 \times 5678$ matrix.
Initially `rowPerm[i] = i+1` and `colPerm[j] = j+1`.  We also keep the inverse
arrays `rowIndex` and `colIndex` that map original indices to their current
positions.

Operations are handled in $O(1)$ time:

- `R x y`: swap `rowPerm[x-1]` with `rowPerm[y-1]` and update the inverse arrays.
- `C x y`: analogous for columns.
- `Q x y`: value at `(x, y)` comes from original row `rowPerm[x-1]` and column
  `colPerm[y-1]`, so it equals `(row-1) * 5678 + col`.
- `W z`: reverse the formula to obtain original row and column of value `z`, then
  look up their current positions using `rowIndex` and `colIndex`.

Because we only store permutations, memory usage is small and every command is
processed in constant time.
