# [Card Trick](https://www.spoj.com/problems/CTRICK/)

## Problem Summary
Given an integer `n` (1 ≤ n ≤ 20000), determine the initial ordering of the cards 1…n so that performing the following trick reveals cards in increasing order:

1. Move `i` cards from the top to the bottom of the deck, one at a time.
2. Deal the next card face up; it must be the `i`-th card.
3. Repeat for `i = 1` to `n`.

## Algorithm
We simulate the placement of the numbers using a queue of positions:

1. Initialise a queue with values `1..n` representing card positions.
2. For each `i` from `1` to `n`:
   - Rotate the queue by moving the front element to the back `i` times.
   - Pop the next position `p` from the queue and place card `i` at index `p` of the answer array.
3. After processing all numbers, output the answer array from position `1` to `n`.

This uses a circular array to implement the queue so all operations are O(1).

## Correctness
At step `i`, the queue front represents the current top card position. Rotating `i` times mimics moving `i` cards from the top to the bottom. Removing the next element gives the position where card `i` must initially be placed so that when the magician reaches step `i`, that card is dealt. Repeating this for all `i` ensures that the sequence `1..n` is produced.

## Complexity
The outer loop runs `n` times and the inner rotation loop runs `i` times. Thus the algorithm performs `O(n^2)` queue operations. Each operation is constant time, so the total time is `O(n^2)` and the space usage is `O(n)`.
