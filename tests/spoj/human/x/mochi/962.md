# [Intergalactic Map](https://www.spoj.com/problems/IM/)

## Problem Summary
Given an undirected graph where vertices represent planets and edges represent bidirectional routes, determine for each test case whether there exists a simple path starting at Naboo (1), passing through Tatooine (2), and ending at Coruscant (3) without visiting any planet more than once.

## Algorithm
1. **Vertex Splitting:** To enforce that no planet (except Tatooine) is visited more than once, each planet `v` (other than 1 and 3) is split into `v_in` and `v_out` with an edge of capacity 1 between them. For Tatooine, this capacity is 2, allowing two paths to leave it.
2. **Edge Construction:** For each undirected route `(u, v)`:
   - Add an edge from `u_out` to `v_in` unless `v` is planet 2.
   - Add an edge from `v_out` to `u_in` unless `u` is planet 2.
   - Planets 1 and 3 only receive edges (they do not send any) to ensure they are endpoints.
3. **Super Sink:** Connect planets 1 and 3 to a super sink with capacity 1 each. The source is `2_out`.
4. **Dinic's Max Flow:** Run Dinic's algorithm on this network. If the maximum flow from the source to the super sink is at least 2, two vertex‑disjoint paths from Tatooine to Naboo and to Coruscant exist, forming the required route.

This approach runs in `O(E√V)` time and handles up to `n ≤ 30011` and `m ≤ 50011` efficiently.
