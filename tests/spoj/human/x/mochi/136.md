# TRANS - Transformation
https://www.spoj.com/problems/TRANS/

## Algorithm
1. Parse the sequences \(X\) and \(Y\) and the replacement rules.  Each rule
   replaces a number with two or three numbers, so the length of the
   sequence only increases.
2. Build a table `dp[a][l][r]` â€“ the minimal number of steps to transform the
   single value `a` into the subsequence `Y[l..r]`.
   * Base case: `dp[val][i][i] = 0` when `Y[i] = val`.
   * For longer segments consider every rule:
     * `a -> b c`: split the segment at every position `k` and try
       `dp[b][l][k] + dp[c][k+1][r] + 1`.
     * `a -> b c d`: split the segment at two positions `i < j` and try
       `dp[b][l][i] + dp[c][i+1][j] + dp[d][j+1][r] + 1`.
   * The table is filled for increasing segment lengths.
3. Let `dp2[i][j]` be the minimal cost to transform the first `i` elements of
   `X` into the first `j` elements of `Y`.  For every possible split `k` of
   the prefix of `Y`, update
   `dp2[i][j] = min(dp2[i-1][k] + dp[X[i-1]][k][j-1])`.
4. The answer is `dp2[N][M]`.  If it remains infinite, output `-1`.

## Complexity
Let \(M\) be the length of \(Y\) (\(\le 50\)) and numbers take values up to 30.
The table for single-value expansions has size \(O(30 M^2)\).  Filling it
requires \(O(30 M^3)\) operations.  The second DP adds another
\(O(N M^2)\) (with \(N \le M\)).  Overall complexity fits easily within the
constraints.
