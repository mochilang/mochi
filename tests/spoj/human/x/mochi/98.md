# DFLOOR - Dance Floor

This problem is a variant of the classic *Lights Out* puzzle.  The stage is a
rectangular grid of tiles that are either lit (`1`) or dark (`0`).  Stepping on a
tile toggles its own state and the states of its four neighbours (up, down, left
and right).  The goal is to find a sequence of steps that turns on every tile.

Because pressing the same tile twice cancels the effect, each tile only needs to
be considered at most once.  The key observation for a grid whose width is `x`
and height is `y` is that once the presses on the first row are fixed, the
necessary presses on every subsequent row are determined greedily:

1. Enumerate all `2^x` subsets of the first row and press those tiles.
2. For row `r` from `2` to `y`, examine the row above (`r-1`).  Whenever a tile
   there is off, press the tile directly below it in row `r` to fix it.
3. After processing all rows, if the last row is entirely lit, the collected
   presses form a valid solution.  Any solution suffices; the algorithm stops at
the first one found.  If no configuration of the first row works, the puzzle is
unsolvable.

The algorithm runs in `O(2^x * x * y)` time, which is practical here because
`x, y ≤ 15` so at most `2^15` configurations (≈32k) are checked.
