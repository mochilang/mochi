# [Sort fractions](https://www.spoj.com/problems/FRACTION/)

## Problem Summary
Given N, consider all reduced fractions x/y such that 0 ≤ x/y ≤ 1 and y ≤ N. They are sorted in increasing order (the Farey sequence of order N). For each query i, return the i-th fraction in this ordered set.

## Algorithm
1. Read all query positions and sort them while keeping their original order.
2. Generate the Farey sequence of order N iteratively:
   - Start with `a/b = 0/1` and `c/d = 1/N`.
   - Repeatedly compute the next fraction using
     `k = floor((N + b) / d)`
     `e/f = k*(c/d) - a/b`.
   - Move to `a/b = c/d`, `c/d = e/f`, counting positions.
3. Whenever the current position matches a query, record the corresponding `a/b`.
4. Output all recorded fractions in the original query order.

This generates only as many fractions as needed for the largest query. The Farey generation runs in linear time relative to the number of produced fractions.
