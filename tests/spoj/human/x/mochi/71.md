# [Tree](https://www.spoj.com/problems/TREE1/)

## Problem Summary
Given a binary search tree on keys `1..n` described by its preorder
sequence, compute how many permutations of the keys produce the same tree when
inserted into an empty BST.

## Algorithm
1. Reconstruct the tree from the preorder sequence.  The first element is the
   root; the following elements smaller than the root belong to the left
   subtree and the rest form the right subtree.  Recurse on each part.
2. Let `L` and `R` be the sizes of the left and right subtrees.  Their
   permutations can be interleaved in `C(L+R, L)` ways while preserving
   relative order.  Multiply this binomial coefficient by the counts for the
   left and right subtrees.
3. Precompute binomial coefficients up to `30` using Pascal's triangle with
   big integers to avoid overflow.

The recursion processes each node once and splits its sequence by scanning the
subarray, yielding `O(n^2)` time in the worst case for `n â‰¤ 30`.
