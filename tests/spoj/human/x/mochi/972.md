# [Birthday](https://www.spoj.com/problems/BIRTHDAY)

## Problem Summary
Given \(n\) children initially seated around a circular table in order \(1,2,\ldots,n\), reseat them so that the order around the table becomes the permutation \(p_1,p_2,\ldots,p_n\). Each child moves simultaneously to some seat, either left or right, and the "mess" is the total number of seats moved by all children. Determine the minimum possible mess.

## Algorithm
1. For each child \(k\), compute its ideal rotation offset \(t_k = (k-1 - \text{pos}[k]) \bmod n\), where `pos[k]` is the index of \(k\) in the permutation.  If the final arrangement is rotated by \(s\) seats, child \(k\) moves a distance equal to the circular distance between \(s\) and \(t_k\).
2. Sort the offsets \(t_k\) and duplicate the array with each value plus \(n\) to conveniently handle wrapâ€‘around.
3. Build prefix sums over the duplicated array.
4. For each candidate rotation \(s\) taken from the first \(n\) sorted offsets:
   - Use binary search to find how many offsets lie within half a circle of \(s\) and how many lie outside.
   - Using prefix sums, compute the total movement cost if rotation \(s\) is chosen.
5. Track the minimum cost over all candidates and output it.

Sorting and prefix sum computations take \(O(n \log n)\) time, while each candidate rotation is evaluated in \(O(\log n)\), giving an overall \(O(n \log n)\) algorithm.
