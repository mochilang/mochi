# SQCOUNT - Square Count

We are given up to 1000 axis-aligned rectangular rooms.  Rooms do not overlap but may share a side.
If two rooms share a side of length `m > 2`, a door of length `m-2` is centered in that side, allowing
squares to cross from one room to the other.  We must count all axis-aligned squares composed of unit
tiles that lie entirely within the union of rooms.

## Algorithm
1. For each room with width `w` and height `h`, the number of squares completely inside the room is
   
   \[
   \sum_{k=1}^{\min(w,h)} (w-k+1)(h-k+1)
   = mAB - (A+B)\frac{m(m+1)}{2} + \frac{m(m+1)(2m+1)}{6}
   \]
   where `m = min(w,h)`, `A = w+1` and `B = h+1`.
2. For each pair of rooms that share a side we count squares that span both rooms through the door.
   Let the door length be `d = overlap - 2`, the widths/heights of the two rooms away from the shared
   edge be `wL` and `wR`.  A square of side `L` crossing the door splits into `w_left` tiles in the left
   room and `L - w_left` tiles in the right room.  Valid `L` satisfy `2 \le L \le min(d, wL + wR)` and
   `1 \le w_left \le wL`, `1 \le L - w_left \le wR`.  For each `L` there are

   \[
   \max(0, \min(wL, L-1) - \max(1, L - wR) + 1)
   \]
   possible splits and `d - L + 1` vertical (or horizontal) positions.  Summing these counts over `L`
   gives the number of cross-room squares.  This sum can be evaluated in closed form by splitting the
   ranges of `L` where the expression is linear.
3. Sum the internal and cross-room counts.  Output `Case i: count` for each test case until a line `0`
   terminates input.

This method runs in \(O(n^2)\) over the number of rooms and uses only integer arithmetic.
