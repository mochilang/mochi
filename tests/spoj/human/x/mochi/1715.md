# [Another Necklace Problem](https://www.spoj.com/problems/NCKLCE/)

## Problem Summary
Simulate a circular necklace of \(N\) beads with colors 1..C and support operations:
rotate (R), flip (F), swap (S), paint a range (P), count total color segments (C), and
count segments between two positions (CS).
A segment is a maximal consecutive run of beads with the same color.

## Algorithm
Maintain the beads in an array together with:
* `offset` – index that currently represents position 1.
* `rev` – whether the necklace is flipped (clockwise order reversed).

For each position query we translate the logical position to the array index
using these two values.  Operations then become:
- **R k** – adjust `offset` by `±k` depending on `rev`.
- **F** – toggle `rev`.
- **S i j** – swap colors at the translated indices.
- **P i j x** – walk from `i` to `j` clockwise and set each bead to `x`.
- **C** – iterate through all beads, counting color changes and subtracting one
  if the last color equals the first.
- **CS i j** – walk from `i` to `j` clockwise counting color changes.

Each operation runs in O(length of the affected range), sufficient for the sample tests.
