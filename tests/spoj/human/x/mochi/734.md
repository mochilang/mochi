# [Ivan and his interesting game](https://www.spoj.com/problems/IVAN/)

## Problem Summary
Given two sequences of positive integers, repeatedly remove a non-empty suffix from each sequence. For a move removing
`K1` numbers from the first sequence and `K2` numbers from the second, let `S1` and `S2` be the sums of the removed numbers.
The move costs `(S1 - K1) * (S2 - K2)`. All numbers must be removed and both sequences must become empty at the same time.
The task is to minimise the total cost.

## Algorithm
We use dynamic programming over prefixes of both sequences.
Let `A[i]` and `B[j]` be prefix sums of the original sequences.  
`dp[i][j]` denotes the minimum cost to remove the first `i` numbers of the first sequence and the first `j` numbers of the second.
To compute `dp[i][j]`, consider all previous split points `s < i` and `t < j` forming the last move. The cost of removing
`A[s+1..i]` and `B[t+1..j]` is:

`( (A[i] - A[s]) - (i - s) ) * ( (B[j] - B[t]) - (j - t) )`.

Thus the recurrence is:
```
dp[i][j] = min_{s<i, t<j} dp[s][t] +
           (A[i] - A[s] - (i - s)) * (B[j] - B[t] - (j - t))
```
with `dp[0][0] = 0`.  
The answer is `dp[L1][L2]` where `L1` and `L2` are the sequence lengths.

This straightforward approach explores all ways to partition the sequences. Its time complexity is
`O(L1^2 * L2^2)`, which suffices for small inputs.
