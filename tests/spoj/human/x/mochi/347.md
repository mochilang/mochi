# [Lazy Cows](https://www.spoj.com/problems/LAZYCOWS/)

## Problem Summary
We have a pasture of size `2 x B` with `N` cows positioned in the grid.  We need to build at most `K` axis-aligned rectangular barns so that every cow lies inside some barn, barns do not overlap, and the total area is minimized.

## Algorithm
Because the pasture has only two rows, at each column a barn can cover the top cell, the bottom cell, both separately, or both together.  When scanning the columns from left to right we only need to know which kind of barns are currently "open" and how many barns were already started.

For every column we perform dynamic programming over five possible states:

0. no open barn
1. barn open for the top row only
2. barn open for the bottom row only
3. two barns open separately for both rows
4. a single barn open covering both rows

Let `dp[k][state]` be the minimal area after processing the columns so far, using exactly `k` barns and ending in `state`.  Between consecutive columns we add area proportional to the gap times the total height of the open barns.  At the next column we may close barns, open new barns if required by cows in that column, and decide which barns stay open afterwards.  Transitions update the barn count and add the area of the current column.

The number of columns containing cows is at most `N` (≤1000), so iterating over `K (≤1000)` and the 5 states yields about `5 * N * K` transitions.  After processing all columns the answer is the minimum `dp[k][state]` over `k ≤ K`.

This dynamic program ensures that barns remain rectangular and non-overlapping while covering all cows with minimal total area.
