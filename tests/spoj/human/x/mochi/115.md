# [FAMILY - Family](https://www.spoj.com/problems/FAMILY/)

Given a family graph where each monster may have two parents, the degree of
relationship between monsters is the expected percentage of genes they share.
Each gene of a child comes from either parent with equal probability and all
genes are independent.

## Algorithm

1. Store for every monster its two parents (if any).
2. Define `f(x, y)` as the probability that monsters `x` and `y` share a given
   gene. Compute it recursively:
   - `f(x, x) = 1`.
   - If both have no parents, `f(x, y) = 0` for `x â‰  y`.
   - If only one has parents `a` and `b`, `f(x, y) = (f(a, y) + f(b, y)) / 2`.
   - If both have parents `a, b` and `c, d`,
     `f(x, y) = (f(a, c) + f(a, d) + f(b, c) + f(b, d)) / 4`.
3. Use memoization and symmetry (`f(x, y) = f(y, x)`) so each pair is computed
   once.
4. For each query pair, compute `f(x, y)`, multiply by 100 and convert to a
   decimal string using big integers, trimming insignificant zeros.

This approach runs in `O(n^2)` time for `n` monsters and answers all queries
exactly without floating-point errors.
