# [Arranging the Blocks](https://www.spoj.com/problems/BLOCKS/)

## Problem Summary
Given two \(n \times n\) matrices representing the initial and final arrangements of colored blocks (each color appears at most twice), determine the minimal minutes required to transform the first matrix into the second. In one minute any number of rows or any number of columns can be permuted independently, but rows and columns cannot be mixed in the same minute. If the transformation is impossible, output `no`.

## Algorithm
1. Verify that both matrices contain the same multiset of colors; otherwise output `no`.
2. If the matrices are already identical, the answer is `0`.
3. If for every row the multiset of colors matches the corresponding row in the target, or if this holds for every column, the answer is `1` because a single round of row or column permutations suffices.
4. Otherwise the answer is `2`: first permute columns to move each block into its correct final row, then permute rows to place them in their exact positions.

The procedure runs in \(O(n^2)\) time per test case and uses \(O(n^2)\) auxiliary space for frequency counts.
