# RELINETS - Reliable Nets

Problem: [https://www.spoj.com/problems/RELINETS/](https://www.spoj.com/problems/RELINETS/)

## Algorithm

For each test case we are given up to 15 buildings and up to 20 possible undirected
connections with costs.  We need the cheapest subset of connections such that the
resulting graph remains connected even after the removal of any single edge – in
other words the graph must be 2-edge-connected (contains no bridges).

Since the number of edges is small we can enumerate all `2^m` subsets of edges.
For each subset:

1. Build an adjacency list and accumulate its total cost.
2. Require at least `n` edges; otherwise a 2-edge-connected graph is impossible.
3. Check connectivity with a BFS starting from vertex 0.
4. Detect bridges using a DFS computing discovery/low times (Tarjan). If any
   edge is a bridge the subset is discarded.
5. Track the minimum cost among valid subsets.

If no subset satisfies the conditions the answer is that no reliable net is
possible.

The search is feasible because `m ≤ 20`, so the enumeration is at most about one
million subsets.  Each check runs in `O(n + m)` time, giving an acceptable total
runtime.

## Correctness Proof

We prove the algorithm outputs the minimal cost of a reliable net or reports
that none exists.

*Soundness*: For every subset considered, the algorithm verifies two properties:
connectivity and absence of bridges.  These exactly characterize a 2-edge-
connected spanning subgraph.  Only subsets satisfying both conditions contribute
candidates for the answer.  Therefore any reported cost corresponds to a valid
reliable net.

*Completeness*: The algorithm examines all subsets of edges.  Any possible
reliable network is some subset of the given edges and will be inspected.  If it
is 2-edge-connected and spans all vertices, it passes both checks and its cost is
compared.  Thus the minimal cost among all valid networks is found.  If no subset
passes the checks, no reliable network exists and the algorithm correctly
reports this.

*Optimality*: Among all subsets that pass the checks we keep the smallest cost.
Hence the final answer is the minimal cost of any reliable network.

## Complexity Analysis

Let `m` be the number of potential connections (≤ 20) and `n` the number of
buildings (≤ 15).  We enumerate `2^m` subsets.  For each subset we build the
adjacency list and run BFS and DFS, each taking `O(n + m)` time.  Therefore the
overall time complexity is `O(2^m · (n + m))`, which is at most about 20 million
operations.  The space usage is `O(n + m)` for the adjacency structures.

## Reference Implementation

The following Mochi program follows the algorithm described above:

```mochi
<included in 1707.mochi>
```
