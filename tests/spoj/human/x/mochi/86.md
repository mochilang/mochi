# [November Rain](https://www.spoj.com/problems/RAIN1/)

## Problem Summary
Given t test cases describing roofs as sets of sloped segments, rain falls vertically.
Each segment collects rain on the portion not covered by higher segments and all
water travels along the segment to its lower end, then drops straight down to the
ground or another segment. For every segment we must output the amount of water
leaving its lower endpoint each second.

## Algorithm
1. Gather all x-coordinates of segment endpoints and sort them. Sweep adjacent
   intervals; among the at most 25 active segments in each interval the highest
   one receives rain equal to the interval width.
2. While sweeping, store the segments present at every critical x so we can later
   determine which segment is directly below a drop point.
3. For each segment, find the segment below its lower endpoint using the stored
   lists and create a directed edge to it.
4. Sort segments by the height of their lower endpoints in descending order and
   propagate each segment's collected water along its edge to accumulate totals
   for lower segments.

The sweep and propagation are both linear in the number of segments, yielding an
efficient solution under the problem's constraints.
