# [Around the world](https://www.spoj.com/problems/AROUND/)

## Problem Summary
Farmer John wants to start at his best friend's farm and return there after visiting some friends via available bidirectional flights. Each flight follows the shortest arc on a circle representing Earth. A flight is either clockwise or counterclockwise and may cross the 0° longitude.

Find the minimum number of flights needed to start and end at the first farm such that the total clockwise distance differs from the total counter‑clockwise distance (i.e. the path winds around the globe at least once). If no such tour exists output `-1`.

## Algorithm
1. **Preprocess edges:** For each undirected flight between farms `a` and `b` compute how taking the flight from `a` to `b` changes the wrap count:
   - Let `diff = (lon[b] - lon[a] + 360) % 360`.
   - If `diff ≤ 180` the shortest path is clockwise. Crossing from a larger to a smaller longitude increases the wrap count (`+1`), otherwise it stays the same.
   - If `diff > 180` the shortest path is counterclockwise. Crossing from a smaller to a larger longitude decreases the wrap count (`-1`), otherwise it stays the same.
2. **Breadth‑first search on extended states:** Use BFS on states `(farm, wraps)` where `wraps` counts how many more times we crossed longitude `0` clockwise than counterclockwise. Limit `wraps` to `[-360, 360]` which is sufficient for the constraints.
3. Start from `(start=0, wraps=0)` and search the graph. When an edge leads to a new state, enqueue it with distance `+1`.
4. The first time we reach the starting farm again with `wraps ≠ 0` we have made a trip around the world; the BFS level is the minimal number of flights.
5. If BFS exhausts without such state, output `-1`.

The BFS explores at most `N * 721` states and each state processes its outgoing edges once, fitting easily within the limits.
