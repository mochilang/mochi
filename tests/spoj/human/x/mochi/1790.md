# SPOJ 1790 - Binary Search Heap Construction

We are given several test cases, each describing a set of nodes with a string
label and an integer priority.  The required structure is a *treap*:

* when traversed in-order by labels, the nodes must appear in lexicographic
  order (binary search tree property)
* each parent must have priority greater than its children (max-heap property)

The set has unique labels and priorities, so the resulting treap is unique.
The output format prints each node as `(<left><label>/<priority><right>)`
where subtrees are omitted when empty.

## Algorithm

1. Parse `n` and the `n` `label/priority` pairs.
2. Sort the node indices by their labels using merge sort.
3. Build the treap in **O(n)** using a monotonic stack:
   - Iterate over the nodes in the sorted order.
   - Pop nodes with smaller priority, making the last popped node the left
     child of the current one.
   - If the stack still has a node, the current node becomes its right child.
   - Push the current node on the stack.
   The stack's bottom element becomes the root.
4. Produce the parenthesized representation using an explicit stack instead of
   recursion, avoiding overflow for deep trees.

This approach builds the correct treap and prints it in linear time after the
initial `O(n log n)` sort.
