# The Secret of a Lost City (LOSTCT)

The IPA language uses only three kinds of words: nouns (n), verbs (v) and adverbs (a).  
Its grammar is:

- **Sentence** := NP (VP NP)* [VP]
- **NP** (noun phrase) := a* n
- **VP** (verb phrase) := a* v

Given a dictionary and a long string without separators, we must split it
into the minimal number of sentences.  Among all such splits, choose the one
with the fewest total words.

## Algorithm

1. Build a dictionary mapping each word to its type and record the maximum word length.
2. For every position of the text (without the final `.`) pre-compute all dictionary words that start there.
3. Use dynamic programming over positions and four automaton states:
   - `0` – inside noun phrase (only adverbs seen so far)
   - `1` – after a complete noun phrase (accepting)
   - `2` – inside verb phrase
   - `3` – after a complete verb phrase (accepting)
4. Transitions consume a word and add one to the word count:
   - from `0`: `a`→`0`, `n`→`1`
   - from `1`: `a`→`2`, `v`→`3`
   - from `2`: `a`→`2`, `v`→`3`
   - from `3`: `a`→`0`, `n`→`1`
5. Accepting states (`1` and `3`) can end a sentence via an epsilon transition
   that increases the sentence count and returns to state `0`.
6. After processing the whole string, take the best result among states `1` and `3`
   (adding the last sentence).

The DP keeps the lexicographically minimal pair (sentences, words) for each
position and state.  Complexity is `O(L * max_word_len)` with `L ≤ 5000`.
