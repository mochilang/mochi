// Generated by Mochi transpiler
class S1 {
  final dynamic cat;
  final num total;
  const S1({required this.cat, required this.total});
}
class Item {
  final String cat;
  final int val;
  const Item({required this.cat, required this.val});
}
void main() {
  final List<Item> items = [Item(cat: "a", val: 3), Item(cat: "a", val: 1), Item(cat: "b", val: 5), Item(cat: "b", val: 2)];
  final List<S1> grouped = (() var groups = <String, Map, <String, dynamic>>{};
for (var i in items) {
  var key = i.cat;
  var ks = key.toString;
  var g = groups[ks];
  if (g) {
    g = {'key': key, };
     = g;
  }
  (type_cast_expression).add(i);
}
var _list = groups.values.toList;
_list.sort(((a, b) [for (var x in b) x.val].isEmpty0([for (var x in b) x.val], .reduce, ((a, b) a + b)) ? .compareTo : ([for (var x in a) x.val].isEmpty ? 0 : ([for (var x in a) x.val], .reduce, ((a, b) a + b)))));
var res = [<S1>];
for (var g in _list) {
  res.add(S1(cat: g["key"], total: [for (var x in g) x.val].isEmpty ? 0 : ([for (var x in g) x.val], .reduce, ((a, b) a + b))));
}
return res;
);
  print("[" + grouped.join(', ') + "]");
}
