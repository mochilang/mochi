// Generated by Mochi 0.10.34 on 2025-07-21 23:01 +0700
using System;
using System.Collections.Generic;
using System.Linq;
struct Data {
    public string tag;
    public int val;
    public override string ToString() => $"{{'tag': '{tag}', 'val': {val}}}";
}
struct GGroup {
    public string key;
    public Data[] items;
    public override string ToString() => $"{{'key': '{key}', 'items': {items}}}";
}
struct Tmp {
    public string tag;
    public int total;
    public override string ToString() => $"{{'tag': '{tag}', 'total': {total}}}";
}
class Program {
    static Data[] data = new Data[]{new Data{tag = "a", val = 1}, new Data{tag = "a", val = 2}, new Data{tag = "b", val = 3}};
    static GGroup[] groups = (from d in data group d by d.tag into gTmp let g = new GGroup{key = gTmp.Key, items = gTmp.ToArray()} select g).ToArray();
    static Tmp[] tmp = new Tmp[];
    static void Main() {
        foreach (var g in groups) {
            int total = 0;
            foreach (var x in g.items) {
                total = (total + x.val);
            }
            tmp = (tmp.Append(new Tmp{tag = g.key, total = total}).ToArray());
        }
        Tmp[] result = (from r in tmp r.tag select r).ToArray();
        Console.WriteLine(("[" + (string.Join(",", result) + "]")));
    }
}
