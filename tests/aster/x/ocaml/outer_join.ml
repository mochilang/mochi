(* Generated by Mochi transpiler v0.10.33 on 2025-07-21 18:38 +0700 *)

let () =
  let customers = [[("id", 1); ("name", "Alice")]; [("id", 2); ("name", "Bob")]; [("id", 3); ("name", "Charlie")]; [("id", 4); ("name", "Diana")]] in
  let orders = [[("id", 100); ("customerId", 1); ("total", 250)]; [("id", 101); ("customerId", 2); ("total", 125)]; [("id", 102); ("customerId", 1); ("total", 300)]; [("id", 103); ("customerId", 5); ("total", 80)]] in
  let result = (List.concat (List.map (fun o -> (List.filter_map (fun c -> if ((List.assoc "customerId" o) == (List.assoc "id" c)) then Some ([("order", o); ("customer", c)]) else None) customers)) orders)) in
  print_endline (String.concat " " (List.filter (fun s -> s <> "") ["--- Outer Join using syntax ---"]));
  (try List.iter (fun row ->
    try
  if (List.assoc "order" row) then (
  if (List.assoc "customer" row) then (
  print_endline (String.concat " " (List.filter (fun s -> s <> "") ["Order"; string_of_int (List.assoc "id" (List.assoc "order" row))); "by"; string_of_int (List.assoc "name" (List.assoc "customer" row))); "- $"; string_of_int (List.assoc "total" (List.assoc "order" row)))]));
  ) else (
  print_endline (String.concat " " (List.filter (fun s -> s <> "") ["Order"; string_of_int (List.assoc "id" (List.assoc "order" row))); "by"; "Unknown"; "- $"; string_of_int (List.assoc "total" (List.assoc "order" row)))]));
  );
  ) else (
  print_endline (String.concat " " (List.filter (fun s -> s <> "") ["Customer"; string_of_int (List.assoc "name" (List.assoc "customer" row))); "has no orders"]));
  );
    with Continue -> ()) result with Break -> ())
