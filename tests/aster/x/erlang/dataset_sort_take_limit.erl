#!/usr/bin/env escript
-module(main).

-export([main/1]).

% Generated by Mochi transpiler v0.10.34 (477186908) on 2025-07-21 20:06 +0700
main(_) ->
    Products = [#{"name" => "Laptop", "price" => 1500}, #{"name" => "Smartphone", "price" => 900}, #{"name" => "Tablet", "price" => 600}, #{"name" => "Monitor", "price" => 300}, #{"name" => "Keyboard", "price" => 100}, #{"name" => "Mouse", "price" => 50}, #{"name" => "Headphones", "price" => 200}],
    Expensive = lists:map(fun ({_, V}) ->     V
 end, lists:sublist(lists:nthtail(1, lists:sort(fun ({K1, _}, {K2, _}) ->     K1 =< K2
 end, [{-maps:get("price", P), P} || P <- Products])), 3)),
    io:format("~s~n", ["--- Top products (excluding most expensive) ---"]),
    lists:foreach(fun (Item) ->     io:format("~p ~s ~p~n", [maps:get("name", Item), "costs $", maps:get("price", Item)])
 end, Expensive)
.
