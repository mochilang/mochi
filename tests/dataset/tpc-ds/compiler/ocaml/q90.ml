(* Generated by Mochi compiler v0.10.26 on 2025-07-15T06:39:42Z *)
type record1 = { mutable ws_sold_time_sk : int; mutable ws_ship_hdemo_sk : int; mutable ws_web_page_sk : int }
type record2 = { mutable hd_demo_sk : int; mutable hd_dep_count : int }
type record3 = { mutable t_time_sk : int; mutable t_hour : int }
type record4 = { mutable wp_web_page_sk : int; mutable wp_char_count : int }

type websale = { mutable ws_sold_time_sk : int; mutable ws_ship_hdemo_sk : int; mutable ws_web_page_sk : int }
let web_sales : record1 list = [{ ws_sold_time_sk = 1; ws_ship_hdemo_sk = 1; ws_web_page_sk = 10 };{ ws_sold_time_sk = 1; ws_ship_hdemo_sk = 1; ws_web_page_sk = 10 };{ ws_sold_time_sk = 2; ws_ship_hdemo_sk = 1; ws_web_page_sk = 10 }]
let household_demographics : record2 list = [{ hd_demo_sk = 1; hd_dep_count = 2 }]
let time_dim : record3 list = [{ t_time_sk = 1; t_hour = 7 };{ t_time_sk = 2; t_hour = 14 }]
let web_page : record4 list = [{ wp_web_page_sk = 10; wp_char_count = 5100 }]
let amc : int = List.length (let __res0 = ref [] in
  List.iter (fun (ws : record1) ->
      List.iter (fun (hd : record2) ->
            List.iter (fun (t : record3) ->
                    List.iter (fun (wp : record4) ->
                                    if (ws.ws_ship_hdemo_sk = hd.hd_demo_sk) && (ws.ws_sold_time_sk = t.t_time_sk) && (ws.ws_web_page_sk = wp.wp_web_page_sk) && (((((t.t_hour >= 7) && (t.t_hour <= 8)) && (hd.hd_dep_count = 2)) && (wp.wp_char_count >= 5000)) && (wp.wp_char_count <= 5200)) then
          __res0 := ws :: !__res0;
                    ) web_page;
            ) time_dim;
      ) household_demographics;
  ) web_sales;
List.rev !__res0)

let pmc : int = List.length (let __res1 = ref [] in
  List.iter (fun (ws : record1) ->
      List.iter (fun (hd : record2) ->
            List.iter (fun (t : record3) ->
                    List.iter (fun (wp : record4) ->
                                    if (ws.ws_ship_hdemo_sk = hd.hd_demo_sk) && (ws.ws_sold_time_sk = t.t_time_sk) && (ws.ws_web_page_sk = wp.wp_web_page_sk) && (((((t.t_hour >= 14) && (t.t_hour <= 15)) && (hd.hd_dep_count = 2)) && (wp.wp_char_count >= 5000)) && (wp.wp_char_count <= 5200)) then
          __res1 := ws :: !__res1;
                    ) web_page;
            ) time_dim;
      ) household_demographics;
  ) web_sales;
List.rev !__res1)

let result : float = ((float_of_int amc) /. (float_of_int pmc))

let () =
  json result;
  assert ((result = 2.))
