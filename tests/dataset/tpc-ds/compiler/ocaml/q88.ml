(* Generated by Mochi compiler v0.10.25 on 2025-07-15T04:50:17Z *)
    exception Break
    exception Continue


    type record1 = { mutable time_sk : int; mutable hour : int; mutable minute : int }
    type record2 = { mutable hd_demo_sk : int; mutable hd_dep_count : int; mutable hd_vehicle_count : int }
    type record3 = { mutable s_store_sk : int; mutable s_store_name : string }
    type record4 = { mutable sold_time_sk : int; mutable hdemo_sk : int; mutable store_sk : int; mutable qty : float }

let time_dim : record1 list = [{ time_sk = 1; hour = 8; minute = 30 };{ time_sk = 2; hour = 9; minute = 0 };{ time_sk = 3; hour = 9; minute = 30 };{ time_sk = 4; hour = 10; minute = 0 };{ time_sk = 5; hour = 10; minute = 30 };{ time_sk = 6; hour = 11; minute = 0 };{ time_sk = 7; hour = 11; minute = 30 };{ time_sk = 8; hour = 12; minute = 0 }]
let household_demographics : record2 list = [{ hd_demo_sk = 1; hd_dep_count = 1; hd_vehicle_count = 1 }]
let store : record3 list = [{ s_store_sk = 1; s_store_name = "ese" }]
let store_sales : record4 list = [{ sold_time_sk = 1; hdemo_sk = 1; store_sk = 1; qty = 10. };{ sold_time_sk = 2; hdemo_sk = 1; store_sk = 1; qty = 12. };{ sold_time_sk = 3; hdemo_sk = 1; store_sk = 1; qty = 14. };{ sold_time_sk = 4; hdemo_sk = 1; store_sk = 1; qty = 11. };{ sold_time_sk = 5; hdemo_sk = 1; store_sk = 1; qty = 8. };{ sold_time_sk = 6; hdemo_sk = 1; store_sk = 1; qty = 9. };{ sold_time_sk = 7; hdemo_sk = 1; store_sk = 1; qty = 10. };{ sold_time_sk = 8; hdemo_sk = 1; store_sk = 1; qty = 14. }]
let rec count_range (ssales : any list) (tdim : any list) (hour : int) (start_min : int) (end_min : int) : float =
  let total : float ref = ref 0. in
  let rec __loop0 lst =
    match lst with
      | [] -> ()
      | ss::rest ->
        (try
          let rec __loop1 lst =
            match lst with
              | [] -> ()
              | t::rest ->
                (try
                  if ((((ss.sold_time_sk = t.time_sk) && (t.hour = hour)) && (t.minute >= start_min)) && (t.minute < end_min)) then (
                    total := ((!total) + ss.qty);
                  ) ;
                with Continue -> ())
                ; __loop1 rest
            in
            try __loop1 tdim with Break -> ()
          with Continue -> ())
          ; __loop0 rest
      in
      try __loop0 ssales with Break -> ()
      (!total)

    let h8_30_to_9 : float = count_range store_sales time_dim 8 30 60
    let h9_to_9_30 : float = count_range store_sales time_dim 9 0 30
    let h9_30_to_10 : float = count_range store_sales time_dim 9 30 60
    let h10_to_10_30 : float = count_range store_sales time_dim 10 0 30
    let h10_30_to_11 : float = count_range store_sales time_dim 10 30 60
    let h11_to_11_30 : float = count_range store_sales time_dim 11 0 30
    let h11_30_to_12 : float = count_range store_sales time_dim 11 30 60
    let h12_to_12_30 : float = count_range store_sales time_dim 12 0 30
    let result : float = (((((((h8_30_to_9 +. h9_to_9_30) +. h9_30_to_10) +. h10_to_10_30) +. h10_30_to_11) +. h11_to_11_30) +. h11_30_to_12) +. h12_to_12_30)

    let () =
      json result;
      assert ((result = 88))
