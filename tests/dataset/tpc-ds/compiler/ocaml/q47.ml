(* Generated by Mochi compiler v0.10.25 on 2025-07-15T04:50:17Z *)
type record1 = { mutable d_year : int; mutable item : string; mutable avg_monthly_sales : float; mutable sum_sales : float }

let v2 : record1 list = [{ d_year = 2020; item = "A"; avg_monthly_sales = 100.; sum_sales = 120. };{ d_year = 2020; item = "B"; avg_monthly_sales = 80.; sum_sales = 70. };{ d_year = 2019; item = "C"; avg_monthly_sales = 50.; sum_sales = 60. }]
let year : int = 2020
let orderby : string = "item"
let rec abs (x : float) : float =
  if (x >= 0.) then (
    x
  ) else (
    -x
  ) ;
  ()

let result : record1 list = (let __res0 = ref [] in
  List.iter (fun (v : record1) ->
      if (((((((v.d_year >= year) - 1) && (v.avg_monthly_sales > 0)) && (v.sum_sales > v.avg_monthly_sales)) && abs (v.sum_sales -. v.avg_monthly_sales)) /. v.avg_monthly_sales) > 0.1) then
    __res0 := { d_year = v.d_year; item = v.item; avg_monthly_sales = v.avg_monthly_sales; sum_sales = v.sum_sales } :: !__res0;
  ) v2;
List.rev !__res0)


let () =
  json result;
  assert ((result = [{ d_year = 2019; item = "C"; avg_monthly_sales = 50.; sum_sales = 60. };{ d_year = 2020; item = "A"; avg_monthly_sales = 100.; sum_sales = 120. }]))
