func main (regs=240)
  // let web_sales = []
  Const        r0, []
  // (from ws in web_sales
  Const        r1, []
  // sold_date_sk: ws.ws_sold_date_sk,
  Const        r2, "sold_date_sk"
  Const        r3, "ws_sold_date_sk"
  // sales_price: ws.ws_ext_sales_price,
  Const        r4, "sales_price"
  Const        r5, "ws_ext_sales_price"
  // day: ws.ws_sold_date_name
  Const        r6, "day"
  Const        r7, "ws_sold_date_name"
  // (from ws in web_sales
  IterPrep     r8, r0
  Len          r9, r8
  Const        r11, 0
  Move         r10, r11
L1:
  LessInt      r12, r10, r9
  JumpIfFalse  r12, L0
  Index        r13, r8, r10
  Move         r14, r13
  // sold_date_sk: ws.ws_sold_date_sk,
  Const        r15, "sold_date_sk"
  Index        r16, r14, r3
  // sales_price: ws.ws_ext_sales_price,
  Const        r17, "sales_price"
  Index        r18, r14, r5
  // day: ws.ws_sold_date_name
  Const        r19, "day"
  Index        r20, r14, r7
  // sold_date_sk: ws.ws_sold_date_sk,
  Move         r21, r15
  Move         r22, r16
  // sales_price: ws.ws_ext_sales_price,
  Move         r23, r17
  Move         r24, r18
  // day: ws.ws_sold_date_name
  Move         r25, r19
  Move         r26, r20
  // select {
  MakeMap      r27, 3, r21
  // (from ws in web_sales
  Append       r28, r1, r27
  Move         r1, r28
  Const        r29, 1
  AddInt       r10, r10, r29
  Jump         L1
L0:
  // from cs in catalog_sales
  Const        r30, []
  // sold_date_sk: cs.cs_sold_date_sk,
  Const        r31, "cs_sold_date_sk"
  // sales_price: cs.cs_ext_sales_price,
  Const        r32, "cs_ext_sales_price"
  // day: cs.cs_sold_date_name
  Const        r33, "cs_sold_date_name"
  // from cs in catalog_sales
  IterPrep     r34, r0
  Len          r35, r34
  Move         r36, r11
L3:
  LessInt      r37, r36, r35
  JumpIfFalse  r37, L2
  Index        r38, r34, r36
  Move         r39, r38
  // sold_date_sk: cs.cs_sold_date_sk,
  Const        r40, "sold_date_sk"
  Index        r41, r39, r31
  // sales_price: cs.cs_ext_sales_price,
  Const        r42, "sales_price"
  Index        r43, r39, r32
  // day: cs.cs_sold_date_name
  Const        r44, "day"
  Index        r45, r39, r33
  // sold_date_sk: cs.cs_sold_date_sk,
  Move         r46, r40
  Move         r47, r41
  // sales_price: cs.cs_ext_sales_price,
  Move         r48, r42
  Move         r49, r43
  // day: cs.cs_sold_date_name
  Move         r50, r44
  Move         r51, r45
  // select {
  MakeMap      r52, 3, r46
  // from cs in catalog_sales
  Append       r53, r30, r52
  Move         r30, r53
  AddInt       r36, r36, r29
  Jump         L3
L2:
  // }) union all (
  UnionAll     r54, r1, r30
  // from w in wscs
  Const        r55, []
  // group by {week_seq: d.d_week_seq} into g
  Const        r56, "week_seq"
  Const        r57, "d_week_seq"
  // d_week_seq: g.key.week_seq,
  Const        r58, "key"
  // sun_sales: sum(from x in g where x.day == "Sunday" select x.sales_price),
  Const        r59, "sun_sales"
  // mon_sales: sum(from x in g where x.day == "Monday" select x.sales_price),
  Const        r60, "mon_sales"
  // tue_sales: sum(from x in g where x.day == "Tuesday" select x.sales_price),
  Const        r61, "tue_sales"
  // wed_sales: sum(from x in g where x.day == "Wednesday" select x.sales_price),
  Const        r62, "wed_sales"
  // thu_sales: sum(from x in g where x.day == "Thursday" select x.sales_price),
  Const        r63, "thu_sales"
  // fri_sales: sum(from x in g where x.day == "Friday" select x.sales_price),
  Const        r64, "fri_sales"
  // sat_sales: sum(from x in g where x.day == "Saturday" select x.sales_price)
  Const        r65, "sat_sales"
  // from w in wscs
  MakeMap      r66, 0, r0
  Move         r67, r0
  IterPrep     r68, r54
  Len          r69, r68
  Const        r70, 0
L9:
  LessInt      r71, r70, r69
  JumpIfFalse  r71, L4
  Index        r72, r68, r70
  Move         r73, r72
  // join d in date_dim on w.sold_date_sk == d.d_date_sk
  IterPrep     r74, r0
  Len          r75, r74
  Const        r76, 0
L8:
  LessInt      r77, r76, r75
  JumpIfFalse  r77, L5
  Index        r78, r74, r76
  Move         r79, r78
  Index        r80, r73, r2
  Const        r81, "d_date_sk"
  Index        r82, r79, r81
  Equal        r83, r80, r82
  JumpIfFalse  r83, L6
  // from w in wscs
  Const        r84, "w"
  Move         r85, r73
  Const        r86, "d"
  Move         r87, r79
  Move         r88, r84
  Move         r89, r85
  Move         r90, r86
  Move         r91, r87
  MakeMap      r92, 2, r88
  // group by {week_seq: d.d_week_seq} into g
  Const        r93, "week_seq"
  Index        r94, r79, r57
  Move         r95, r93
  Move         r96, r94
  MakeMap      r97, 1, r95
  Str          r98, r97
  In           r99, r98, r66
  JumpIfTrue   r99, L7
  // from w in wscs
  Const        r100, "__group__"
  Const        r101, true
  // group by {week_seq: d.d_week_seq} into g
  Move         r102, r97
  // from w in wscs
  Const        r103, "items"
  Move         r104, r0
  Const        r105, "count"
  Move         r106, r100
  Move         r107, r101
  Move         r108, r58
  Move         r109, r102
  Move         r110, r103
  Move         r111, r104
  Move         r112, r105
  Move         r113, r11
  MakeMap      r114, 4, r106
  SetIndex     r66, r98, r114
  Append       r115, r67, r114
  Move         r67, r115
L7:
  Index        r116, r66, r98
  Index        r117, r116, r103
  Append       r118, r117, r92
  SetIndex     r116, r103, r118
  Index        r119, r116, r105
  AddInt       r120, r119, r29
  SetIndex     r116, r105, r120
L6:
  // join d in date_dim on w.sold_date_sk == d.d_date_sk
  AddInt       r76, r76, r29
  Jump         L8
L5:
  // from w in wscs
  AddInt       r70, r70, r29
  Jump         L9
L4:
  Move         r121, r11
  Len          r122, r67
L32:
  LessInt      r123, r121, r122
  JumpIfFalse  r123, L10
  Index        r124, r67, r121
  Move         r125, r124
  // d_week_seq: g.key.week_seq,
  Const        r126, "d_week_seq"
  Index        r127, r125, r58
  Index        r128, r127, r56
  // sun_sales: sum(from x in g where x.day == "Sunday" select x.sales_price),
  Const        r129, "sun_sales"
  Const        r130, []
  IterPrep     r131, r125
  Len          r132, r131
  Move         r133, r11
L13:
  LessInt      r134, r133, r132
  JumpIfFalse  r134, L11
  Index        r135, r131, r133
  Move         r136, r135
  Index        r137, r136, r6
  Const        r138, "Sunday"
  Equal        r139, r137, r138
  JumpIfFalse  r139, L12
  Index        r140, r136, r4
  Append       r141, r130, r140
  Move         r130, r141
L12:
  AddInt       r133, r133, r29
  Jump         L13
L11:
  Sum          r142, r130
  // mon_sales: sum(from x in g where x.day == "Monday" select x.sales_price),
  Const        r143, "mon_sales"
  Const        r144, []
  IterPrep     r145, r125
  Len          r146, r145
  Move         r147, r11
L16:
  LessInt      r148, r147, r146
  JumpIfFalse  r148, L14
  Index        r149, r145, r147
  Move         r136, r149
  Index        r150, r136, r6
  Const        r151, "Monday"
  Equal        r152, r150, r151
  JumpIfFalse  r152, L15
  Index        r153, r136, r4
  Append       r154, r144, r153
  Move         r144, r154
L15:
  AddInt       r147, r147, r29
  Jump         L16
L14:
  Sum          r155, r144
  // tue_sales: sum(from x in g where x.day == "Tuesday" select x.sales_price),
  Const        r156, "tue_sales"
  Const        r157, []
  IterPrep     r158, r125
  Len          r159, r158
  Move         r160, r11
L19:
  LessInt      r161, r160, r159
  JumpIfFalse  r161, L17
  Index        r162, r158, r160
  Move         r136, r162
  Index        r163, r136, r6
  Const        r164, "Tuesday"
  Equal        r165, r163, r164
  JumpIfFalse  r165, L18
  Index        r166, r136, r4
  Append       r167, r157, r166
  Move         r157, r167
L18:
  AddInt       r160, r160, r29
  Jump         L19
L17:
  Sum          r168, r157
  // wed_sales: sum(from x in g where x.day == "Wednesday" select x.sales_price),
  Const        r169, "wed_sales"
  Const        r170, []
  IterPrep     r171, r125
  Len          r172, r171
  Move         r173, r11
L22:
  LessInt      r174, r173, r172
  JumpIfFalse  r174, L20
  Index        r175, r171, r173
  Move         r136, r175
  Index        r176, r136, r6
  Const        r177, "Wednesday"
  Equal        r178, r176, r177
  JumpIfFalse  r178, L21
  Index        r179, r136, r4
  Append       r180, r170, r179
  Move         r170, r180
L21:
  AddInt       r173, r173, r29
  Jump         L22
L20:
  Sum          r181, r170
  // thu_sales: sum(from x in g where x.day == "Thursday" select x.sales_price),
  Const        r182, "thu_sales"
  Const        r183, []
  IterPrep     r184, r125
  Len          r185, r184
  Move         r186, r11
L25:
  LessInt      r187, r186, r185
  JumpIfFalse  r187, L23
  Index        r188, r184, r186
  Move         r136, r188
  Index        r189, r136, r6
  Const        r190, "Thursday"
  Equal        r191, r189, r190
  JumpIfFalse  r191, L24
  Index        r192, r136, r4
  Append       r193, r183, r192
  Move         r183, r193
L24:
  AddInt       r186, r186, r29
  Jump         L25
L23:
  Sum          r194, r183
  // fri_sales: sum(from x in g where x.day == "Friday" select x.sales_price),
  Const        r195, "fri_sales"
  Const        r196, []
  IterPrep     r197, r125
  Len          r198, r197
  Move         r199, r11
L28:
  LessInt      r200, r199, r198
  JumpIfFalse  r200, L26
  Index        r201, r197, r199
  Move         r136, r201
  Index        r202, r136, r6
  Const        r203, "Friday"
  Equal        r204, r202, r203
  JumpIfFalse  r204, L27
  Index        r205, r136, r4
  Append       r206, r196, r205
  Move         r196, r206
L27:
  AddInt       r199, r199, r29
  Jump         L28
L26:
  Sum          r207, r196
  // sat_sales: sum(from x in g where x.day == "Saturday" select x.sales_price)
  Const        r208, "sat_sales"
  Const        r209, []
  IterPrep     r210, r125
  Len          r211, r210
  Move         r212, r11
L31:
  LessInt      r213, r212, r211
  JumpIfFalse  r213, L29
  Index        r214, r210, r212
  Move         r136, r214
  Index        r215, r136, r6
  Const        r216, "Saturday"
  Equal        r217, r215, r216
  JumpIfFalse  r217, L30
  Index        r218, r136, r4
  Append       r219, r209, r218
  Move         r209, r219
L30:
  AddInt       r212, r212, r29
  Jump         L31
L29:
  Sum          r220, r209
  // d_week_seq: g.key.week_seq,
  Move         r221, r126
  Move         r222, r128
  // sun_sales: sum(from x in g where x.day == "Sunday" select x.sales_price),
  Move         r223, r129
  Move         r224, r142
  // mon_sales: sum(from x in g where x.day == "Monday" select x.sales_price),
  Move         r225, r143
  Move         r226, r155
  // tue_sales: sum(from x in g where x.day == "Tuesday" select x.sales_price),
  Move         r227, r156
  Move         r228, r168
  // wed_sales: sum(from x in g where x.day == "Wednesday" select x.sales_price),
  Move         r229, r169
  Move         r230, r181
  // thu_sales: sum(from x in g where x.day == "Thursday" select x.sales_price),
  Move         r231, r182
  Move         r232, r194
  // fri_sales: sum(from x in g where x.day == "Friday" select x.sales_price),
  Move         r233, r195
  Move         r234, r207
  // sat_sales: sum(from x in g where x.day == "Saturday" select x.sales_price)
  Move         r235, r208
  Move         r236, r220
  // select {
  MakeMap      r237, 8, r221
  // from w in wscs
  Append       r238, r55, r237
  Move         r55, r238
  AddInt       r121, r121, r29
  Jump         L32
L10:
  // json(result)
  JSON         r0
  // expect len(result) == 0
  Const        r239, true
  Expect       r239
  Return       r0
