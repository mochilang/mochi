func main (regs=36)
  // let store_sales = [
  Const        r0, [{"ca_county": "A", "d_qoy": 1, "d_year": 2000, "ss_ext_sales_price": 100.0}, {"ca_county": "A", "d_qoy": 2, "d_year": 2000, "ss_ext_sales_price": 120.0}, {"ca_county": "A", "d_qoy": 3, "d_year": 2000, "ss_ext_sales_price": 160.0}, {"ca_county": "B", "d_qoy": 1, "d_year": 2000, "ss_ext_sales_price": 80.0}, {"ca_county": "B", "d_qoy": 2, "d_year": 2000, "ss_ext_sales_price": 90.0}, {"ca_county": "B", "d_qoy": 3, "d_year": 2000, "ss_ext_sales_price": 100.0}]
L9:
  // let web_sales = [
  Const        r1, [{"ca_county": "A", "d_qoy": 1, "d_year": 2000, "ws_ext_sales_price": 100.0}, {"ca_county": "A", "d_qoy": 2, "d_year": 2000, "ws_ext_sales_price": 150.0}, {"ca_county": "A", "d_qoy": 3, "d_year": 2000, "ws_ext_sales_price": 250.0}, {"ca_county": "B", "d_qoy": 1, "d_year": 2000, "ws_ext_sales_price": 80.0}, {"ca_county": "B", "d_qoy": 2, "d_year": 2000, "ws_ext_sales_price": 90.0}, {"ca_county": "B", "d_qoy": 3, "d_year": 2000, "ws_ext_sales_price": 95.0}]
  // let counties = ["A", "B"]
  Const        r2, ["A", "B"]
  // var result = []
  Const        r2, []
  Move         r3, r2
  // for county in counties {
  Const        r2, ["A", "B"]
L20:
  IterPrep     r4, r2
  Len          r2, r4
L17:
  Const        r5, 0
  LessInt      r6, r5, r2
  JumpIfFalse  r6, L0
L1:
  Index        r2, r4, r5
  Move         r4, r2
  // let ss1 = sum(from s in store_sales where s.ca_county == county && s.d_qoy == 1 select s.ss_ext_sales_price)
  Const        r2, []
L3:
  Const        r7, "ca_county"
L2:
  Const        r8, "d_qoy"
  Const        r9, "ss_ext_sales_price"
  IterPrep     r10, r0
L7:
  Len          r11, r10
L4:
  Const        r12, 0
L5:
  Move         r13, r12
L6:
  LessInt      r14, r13, r11
L8:
  JumpIfFalse  r14, L1
L13:
  Index        r11, r10, r13
  Move         r14, r11
  Index        r10, r14, r7
  Equal        r15, r10, r4
  Index        r10, r14, r8
L11:
  Const        r16, 1
  Equal        r17, r10, r16
  Move         r10, r15
  JumpIfFalse  r10, L1
L12:
  Move         r10, r17
  JumpIfFalse  r10, L2
L10:
  Index        r15, r14, r9
  Append       r17, r2, r15
  Move         r2, r17
  AddInt       r13, r13, r16
  Jump         L1
  Sum          r10, r2
  // let ss2 = sum(from s in store_sales where s.ca_county == county && s.d_qoy == 2 select s.ss_ext_sales_price)
  Const        r13, []
  IterPrep     r11, r0
  Len          r15, r11
  Move         r17, r12
  LessInt      r2, r17, r15
  JumpIfFalse  r2, L3
  Index        r15, r11, r17
  Move         r14, r15
  Index        r2, r14, r7
  Equal        r11, r2, r4
  Index        r15, r14, r8
  Const        r2, 2
  Equal        r18, r15, r2
  Move         r15, r11
  JumpIfFalse  r15, L4
  Move         r15, r18
  JumpIfFalse  r15, L5
  Index        r11, r14, r9
  Append       r18, r13, r11
  Move         r13, r18
  AddInt       r17, r17, r16
  Jump         L1
  Sum          r15, r13
  // let ss3 = sum(from s in store_sales where s.ca_county == county && s.d_qoy == 3 select s.ss_ext_sales_price)
  Const        r17, []
  IterPrep     r11, r0
  Len          r18, r11
  Move         r13, r12
  LessInt      r19, r13, r18
  JumpIfFalse  r19, L6
  Index        r18, r11, r13
  Move         r14, r18
  Index        r19, r14, r7
  Equal        r11, r19, r4
  Index        r18, r14, r8
  Const        r19, 3
  Equal        r20, r18, r19
  Move         r18, r11
  JumpIfFalse  r18, L6
  Move         r18, r20
  JumpIfFalse  r18, L3
  Index        r11, r14, r9
  Append       r20, r17, r11
  Move         r17, r20
  AddInt       r13, r13, r16
  Jump         L7
  Sum          r9, r17
  // let ws1 = sum(from w in web_sales where w.ca_county == county && w.d_qoy == 1 select w.ws_ext_sales_price)
  Const        r14, []
  Const        r13, "ws_ext_sales_price"
  IterPrep     r11, r1
  Len          r20, r11
  Move         r17, r12
  LessInt      r18, r17, r20
  JumpIfFalse  r18, L8
  Index        r18, r11, r17
  Move         r20, r18
  Index        r11, r20, r7
  Equal        r18, r11, r4
  Index        r11, r20, r8
  Equal        r21, r11, r16
  Move         r11, r18
  JumpIfFalse  r11, L9
  Move         r11, r21
  JumpIfFalse  r11, L7
  Index        r18, r20, r13
  Append       r21, r14, r18
  Move         r14, r21
  AddInt       r17, r17, r16
  Jump         L1
  Sum          r17, r14
  // let ws2 = sum(from w in web_sales where w.ca_county == county && w.d_qoy == 2 select w.ws_ext_sales_price)
  Const        r18, []
  IterPrep     r21, r1
  Len          r14, r21
  Move         r22, r12
  LessInt      r23, r22, r14
  JumpIfFalse  r23, L10
  Index        r14, r21, r22
  Move         r20, r14
  Index        r23, r20, r7
  Equal        r21, r23, r4
  Index        r14, r20, r8
  Equal        r23, r14, r2
  Move         r2, r21
  JumpIfFalse  r2, L11
  Move         r2, r23
  JumpIfFalse  r2, L12
  Index        r14, r20, r13
  Append       r21, r18, r14
  Move         r18, r21
  AddInt       r22, r22, r16
  Jump         L13
  Sum          r11, r18
  // let ws3 = sum(from w in web_sales where w.ca_county == county && w.d_qoy == 3 select w.ws_ext_sales_price)
  Const        r2, []
  IterPrep     r22, r1
  Len          r14, r22
  Move         r21, r12
  LessInt      r18, r21, r14
  JumpIfFalse  r18, L14
  Index        r1, r22, r21
  Move         r20, r1
  Index        r12, r20, r7
  Equal        r14, r12, r4
  Index        r18, r20, r8
  Equal        r22, r18, r19
  Move         r1, r14
  JumpIfFalse  r1, L15
  Move         r1, r22
L15:
  JumpIfFalse  r1, L16
  Index        r7, r20, r13
  Append       r12, r2, r7
  Move         r2, r12
L16:
  AddInt       r21, r21, r16
  Jump         L17
L14:
  Sum          r19, r2
  // let web_g1 = ws2 / ws1
  Div          r18, r11, r17
  // let store_g1 = ss2 / ss1
  Div          r14, r15, r10
  // let web_g2 = ws3 / ws2
  Div          r22, r19, r11
  // let store_g2 = ss3 / ss2
  Div          r1, r9, r15
  // if web_g1 > store_g1 && web_g2 > store_g2 {
  Less         r13, r14, r18
  Less         r20, r1, r22
  Move         r16, r13
  JumpIfFalse  r16, L18
  Move         r16, r20
L18:
  JumpIfFalse  r16, L19
  // ca_county: county,
  Const        r23, "ca_county"
  // d_year: 2000,
  Const        r21, "d_year"
  Const        r7, 2000
  // web_q1_q2_increase: web_g1,
  Const        r12, "web_q1_q2_increase"
  // store_q1_q2_increase: store_g1,
  Const        r2, "store_q1_q2_increase"
  // web_q2_q3_increase: web_g2,
  Const        r17, "web_q2_q3_increase"
  // store_q2_q3_increase: store_g2
  Const        r10, "store_q2_q3_increase"
  // ca_county: county,
  Move         r24, r23
  Move         r25, r4
  // d_year: 2000,
  Move         r26, r21
  Move         r27, r7
  // web_q1_q2_increase: web_g1,
  Move         r28, r12
  Move         r29, r18
  // store_q1_q2_increase: store_g1,
  Move         r30, r2
  Move         r31, r14
  // web_q2_q3_increase: web_g2,
  Move         r32, r17
  Move         r33, r22
  // store_q2_q3_increase: store_g2
  Move         r34, r10
  Move         r35, r1
  // result = append(result, {
  MakeMap      r11, 4, r24
  Append       r19, r3, r11
  Move         r3, r19
L19:
  // for county in counties {
  Const        r15, 1
  AddInt       r8, r5, r15
  Move         r5, r8
  Jump         L20
L0:
  // json(result)
  JSON         r3
  // expect result == [
  Const        r9, [{"ca_county": "A", "d_year": 2000, "store_q1_q2_increase": 1.2, "store_q2_q3_increase": 1.3333333333333333, "web_q1_q2_increase": 1.5, "web_q2_q3_increase": 1.6666666666666667}]
  Equal        r13, r3, r9
  Expect       r13
  Return       r0
