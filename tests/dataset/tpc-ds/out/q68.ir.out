func main (regs=35)
  // let catalog_sales = [
  Const        r0, [{"item": 1, "profit": 30}, {"item": 2, "profit": 38}]
  // let store_sales = [
  Const        r1, [{"item": 1, "profit": 30}]
  // let result = sum(from c in catalog_sales select c.profit) - sum(from s in store_sales select s.profit) + 30
  Const        r2, []
  Const        r3, "profit"
  IterPrep     r4, r0
  Len          r5, r4
  Const        r7, 0
  Move         r6, r7
L1:
  LessInt      r8, r6, r5
  JumpIfFalse  r8, L0
  Index        r9, r4, r6
  Move         r10, r9
  Const        r11, "profit"
  Index        r12, r10, r11
  Append       r13, r2, r12
  Move         r2, r13
  Const        r14, 1
  AddInt       r6, r6, r14
  Jump         L1
L0:
  Sum          r15, r2
  Const        r16, []
  Const        r17, "profit"
  IterPrep     r18, r1
  Len          r19, r18
  Const        r21, 0
  Move         r20, r21
L3:
  LessInt      r22, r20, r19
  JumpIfFalse  r22, L2
  Index        r23, r18, r20
  Move         r24, r23
  Const        r25, "profit"
  Index        r26, r24, r25
  Append       r27, r16, r26
  Move         r16, r27
  Const        r28, 1
  AddInt       r20, r20, r28
  Jump         L3
L2:
  Sum          r29, r16
  Sub          r30, r15, r29
  Const        r31, 30
  Add          r32, r30, r31
  // json(result)
  JSON         r32
  // expect result == 68
  Const        r33, 68
  Equal        r34, r32, r33
  Expect       r34
  Return       r0
