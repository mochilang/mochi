func main (regs=98)
  // let store_sales = [
  Const        r0, [{"item": 1, "price": 1, "store": 1}, {"item": 1, "price": 1, "store": 1}, {"item": 2, "price": 60, "store": 1}]
  // from ss in store_sales
  Const        r1, []
  // group by {item: ss.item} into g
  Const        r2, "item"
  // select {item: g.key.item, revenue: sum(from x in g select x.price)}
  Const        r3, "key"
  Const        r4, "revenue"
  Const        r5, "price"
  // from ss in store_sales
  IterPrep     r6, r0
  Len          r7, r6
  Const        r8, 0
  MakeMap      r9, 0, r0
  Const        r11, []
  Move         r10, r11
  LessInt      r12, r8, r7
  JumpIfFalse  r12, L0
  Index        r13, r6, r8
L2:
  Move         r14, r13
  // group by {item: ss.item} into g
  Const        r15, "item"
  Const        r2, "item"
  Index        r16, r14, r2
  Move         r17, r15
  Move         r18, r16
  MakeMap      r19, 1, r17
  Str          r20, r19
  In           r21, r20, r9
  JumpIfTrue   r21, L1
  // from ss in store_sales
  Const        r11, []
  Const        r22, "__group__"
  Const        r23, true
  Const        r3, "key"
  // group by {item: ss.item} into g
  Move         r24, r19
  // from ss in store_sales
  Const        r25, "items"
  Move         r26, r11
  Const        r27, "count"
  Const        r28, 0
  Move         r29, r22
  Move         r30, r23
  Move         r31, r3
  Move         r32, r24
  Move         r33, r25
  Move         r34, r26
  Move         r35, r27
  Move         r36, r28
  MakeMap      r37, 4, r29
  SetIndex     r9, r20, r37
  Append       r38, r10, r37
  Move         r10, r38
  Index        r39, r9, r20
  Index        r40, r39, r25
  Append       r41, r40, r13
L1:
  SetIndex     r39, r25, r41
  Index        r42, r39, r27
  Const        r43, 1
  AddInt       r44, r42, r43
  SetIndex     r39, r27, r44
  AddInt       r8, r8, r43
  Jump         L2
L0:
  Move         r49, r48
  // select {item: g.key.item, revenue: sum(from x in g select x.price)}
  Const        r50, "item"
  Const        r3, "key"
L5:
  Index        r51, r49, r3
  Const        r2, "item"
  Index        r52, r51, r2
  Const        r53, "revenue"
  Const        r54, []
  Const        r5, "price"
  IterPrep     r55, r49
  Len          r56, r55
  Const        r28, 0
  Move         r57, r28
  LessInt      r58, r57, r56
  JumpIfFalse  r58, L3
  Index        r59, r55, r57
  Move         r60, r59
  Const        r5, "price"
  Index        r61, r60, r5
L4:
  Append       r62, r54, r61
  Move         r54, r62
  Const        r43, 1
  AddInt       r57, r57, r43
  Jump         L4
L3:
  // from ss in store_sales
  Append       r69, r1, r68
  Move         r1, r69
  Const        r43, 1
  AddInt       r45, r45, r43
  Jump         L5

  // fun average(xs: list<float>): float {
func average (regs=18)
  // if len(xs) == 0 {
  Len          r1, r0
  Const        r2, 0
  EqualInt     r3, r1, r2
  JumpIfFalse  r3, L0
  // return 0.0
  Const        r4, 0.0
  Return       r4
L0:
  // var sum = 0.0
  Move         r5, r4
  // for x in xs {
  IterPrep     r6, r0
  Len          r7, r6
  Const        r8, 0
  LessInt      r9, r8, r7
L2:
  JumpIfFalse  r9, L1
  Index        r10, r6, r8
  Move         r11, r10
  // sum = sum + x
  AddFloat     r12, r5, r11
  Move         r5, r12
  // for x in xs {
  Const        r13, 1
  AddInt       r14, r8, r13
  Move         r8, r14
  Jump         L2
L1:
  // return sum / (len(xs) as float)
  Cast         r16, r15, float
  DivFloat     r17, r5, r16
  Return       r17
