func main (regs=254)
  // let store_sales = [
  Const        r0, [{"addr_sk": 1, "cdemo_sk": 1, "net_profit": 1000, "quantity": 5, "sales_price": 120, "sold_date_sk": 1}, {"addr_sk": 2, "cdemo_sk": 2, "net_profit": 2000, "quantity": 10, "sales_price": 60, "sold_date_sk": 1}, {"addr_sk": 3, "cdemo_sk": 3, "net_profit": 10000, "quantity": 20, "sales_price": 170, "sold_date_sk": 1}]
  // let store = [ { s_store_sk: 1 } ]
  Const        r1, [{"s_store_sk": 1}]
  // let customer_demographics = [
  Const        r2, [{"cd_demo_sk": 1, "cd_education_status": "E1", "cd_marital_status": "S"}, {"cd_demo_sk": 2, "cd_education_status": "E2", "cd_marital_status": "M"}, {"cd_demo_sk": 3, "cd_education_status": "E3", "cd_marital_status": "W"}]
  // let customer_address = [
  Const        r3, [{"ca_address_sk": 1, "ca_country": "United States", "ca_state": "TX"}, {"ca_address_sk": 2, "ca_country": "United States", "ca_state": "CA"}, {"ca_address_sk": 3, "ca_country": "United States", "ca_state": "NY"}]
  // let date_dim = [ { d_date_sk: 1, d_year: 2000 } ]
  Const        r4, [{"d_date_sk": 1, "d_year": 2000}]
  // let year = 2000
  Const        r5, 2000
  // let states1 = ["TX"]
  Const        r6, ["TX"]
  // let states2 = ["CA"]
  Const        r7, ["CA"]
  // let states3 = ["NY"]
  Const        r8, ["NY"]
  // from ss in store_sales
  Const        r9, []
  // where d.d_year == year &&
  Const        r10, "d_year"
  // (cd.cd_marital_status == "S" && cd.cd_education_status == "E1" && ss.sales_price >= 100.0 && ss.sales_price <= 150.0) ||
  Const        r11, "cd_marital_status"
  Const        r12, "cd_education_status"
  Const        r13, "sales_price"
  Const        r14, "sales_price"
  // (cd.cd_marital_status == "M" && cd.cd_education_status == "E2" && ss.sales_price >= 50.0 && ss.sales_price <= 100.0) ||
  Const        r15, "cd_marital_status"
  Const        r16, "cd_education_status"
  Const        r17, "sales_price"
  Const        r18, "sales_price"
  // (cd.cd_marital_status == "W" && cd.cd_education_status == "E3" && ss.sales_price >= 150.0 && ss.sales_price <= 200.0)
  Const        r19, "cd_marital_status"
  Const        r20, "cd_education_status"
  Const        r21, "sales_price"
  Const        r22, "sales_price"
  // (ca.ca_state in states1 && ss.net_profit >= 0 && ss.net_profit <= 2000) ||
  Const        r23, "ca_state"
  Const        r24, "net_profit"
  Const        r25, "net_profit"
  // (ca.ca_state in states2 && ss.net_profit >= 150 && ss.net_profit <= 3000) ||
  Const        r26, "ca_state"
  Const        r27, "net_profit"
  Const        r28, "net_profit"
  // (ca.ca_state in states3 && ss.net_profit >= 50 && ss.net_profit <= 25000)
  Const        r29, "ca_state"
  Const        r30, "net_profit"
  Const        r31, "net_profit"
  // select ss.quantity
  Const        r32, "quantity"
  // from ss in store_sales
  IterPrep     r33, r0
  Len          r34, r33
  Const        r36, 0
  Move         r35, r36
L17:
  LessInt      r37, r35, r34
  JumpIfFalse  r37, L0
  Index        r38, r33, r35
  Move         r39, r38
  // join cd in customer_demographics on ss.cdemo_sk == cd.cd_demo_sk
  IterPrep     r40, r2
  Len          r41, r40
  Const        r42, "cdemo_sk"
  Const        r43, "cd_demo_sk"
  // where d.d_year == year &&
  Const        r44, "d_year"
  // (cd.cd_marital_status == "S" && cd.cd_education_status == "E1" && ss.sales_price >= 100.0 && ss.sales_price <= 150.0) ||
  Const        r45, "cd_marital_status"
  Const        r46, "cd_education_status"
  Const        r47, "sales_price"
  Const        r48, "sales_price"
  // (cd.cd_marital_status == "M" && cd.cd_education_status == "E2" && ss.sales_price >= 50.0 && ss.sales_price <= 100.0) ||
  Const        r49, "cd_marital_status"
  Const        r50, "cd_education_status"
  Const        r51, "sales_price"
  Const        r52, "sales_price"
  // (cd.cd_marital_status == "W" && cd.cd_education_status == "E3" && ss.sales_price >= 150.0 && ss.sales_price <= 200.0)
  Const        r53, "cd_marital_status"
  Const        r54, "cd_education_status"
  Const        r55, "sales_price"
  Const        r56, "sales_price"
  // (ca.ca_state in states1 && ss.net_profit >= 0 && ss.net_profit <= 2000) ||
  Const        r57, "ca_state"
  Const        r58, "net_profit"
  Const        r59, "net_profit"
  // (ca.ca_state in states2 && ss.net_profit >= 150 && ss.net_profit <= 3000) ||
  Const        r60, "ca_state"
  Const        r61, "net_profit"
  Const        r62, "net_profit"
  // (ca.ca_state in states3 && ss.net_profit >= 50 && ss.net_profit <= 25000)
  Const        r63, "ca_state"
  Const        r64, "net_profit"
  Const        r65, "net_profit"
  // select ss.quantity
  Const        r66, "quantity"
  // join cd in customer_demographics on ss.cdemo_sk == cd.cd_demo_sk
  Const        r68, 0
  Move         r67, r68
L16:
  LessInt      r69, r67, r41
  JumpIfFalse  r69, L1
  Index        r70, r40, r67
  Move         r71, r70
  Const        r72, "cdemo_sk"
  Index        r73, r39, r72
  Const        r74, "cd_demo_sk"
  Index        r75, r71, r74
  Equal        r76, r73, r75
  JumpIfFalse  r76, L2
  // join ca in customer_address on ss.addr_sk == ca.ca_address_sk
  IterPrep     r77, r3
  Len          r78, r77
  Const        r79, "addr_sk"
  Const        r80, "ca_address_sk"
  // where d.d_year == year &&
  Const        r81, "d_year"
  // (cd.cd_marital_status == "S" && cd.cd_education_status == "E1" && ss.sales_price >= 100.0 && ss.sales_price <= 150.0) ||
  Const        r82, "cd_marital_status"
  Const        r83, "cd_education_status"
  Const        r84, "sales_price"
  Const        r85, "sales_price"
  // (cd.cd_marital_status == "M" && cd.cd_education_status == "E2" && ss.sales_price >= 50.0 && ss.sales_price <= 100.0) ||
  Const        r86, "cd_marital_status"
  Const        r87, "cd_education_status"
  Const        r88, "sales_price"
  Const        r89, "sales_price"
  // (cd.cd_marital_status == "W" && cd.cd_education_status == "E3" && ss.sales_price >= 150.0 && ss.sales_price <= 200.0)
  Const        r90, "cd_marital_status"
  Const        r91, "cd_education_status"
  Const        r92, "sales_price"
  Const        r93, "sales_price"
  // (ca.ca_state in states1 && ss.net_profit >= 0 && ss.net_profit <= 2000) ||
  Const        r94, "ca_state"
  Const        r95, "net_profit"
  Const        r96, "net_profit"
  // (ca.ca_state in states2 && ss.net_profit >= 150 && ss.net_profit <= 3000) ||
  Const        r97, "ca_state"
  Const        r98, "net_profit"
  Const        r99, "net_profit"
  // (ca.ca_state in states3 && ss.net_profit >= 50 && ss.net_profit <= 25000)
  Const        r100, "ca_state"
  Const        r101, "net_profit"
  Const        r102, "net_profit"
  // select ss.quantity
  Const        r103, "quantity"
  // join ca in customer_address on ss.addr_sk == ca.ca_address_sk
  Const        r105, 0
  Move         r104, r105
L15:
  LessInt      r106, r104, r78
  JumpIfFalse  r106, L2
  Index        r107, r77, r104
  Move         r108, r107
  Const        r109, "addr_sk"
  Index        r110, r39, r109
  Const        r111, "ca_address_sk"
  Index        r112, r108, r111
  Equal        r113, r110, r112
  JumpIfFalse  r113, L3
  // join d in date_dim on ss.sold_date_sk == d.d_date_sk
  IterPrep     r114, r4
  Len          r115, r114
  Const        r116, "sold_date_sk"
  Const        r117, "d_date_sk"
  // where d.d_year == year &&
  Const        r118, "d_year"
  // (cd.cd_marital_status == "S" && cd.cd_education_status == "E1" && ss.sales_price >= 100.0 && ss.sales_price <= 150.0) ||
  Const        r119, "cd_marital_status"
  Const        r120, "cd_education_status"
  Const        r121, "sales_price"
  Const        r122, "sales_price"
  // (cd.cd_marital_status == "M" && cd.cd_education_status == "E2" && ss.sales_price >= 50.0 && ss.sales_price <= 100.0) ||
  Const        r123, "cd_marital_status"
  Const        r124, "cd_education_status"
  Const        r125, "sales_price"
  Const        r126, "sales_price"
  // (cd.cd_marital_status == "W" && cd.cd_education_status == "E3" && ss.sales_price >= 150.0 && ss.sales_price <= 200.0)
  Const        r127, "cd_marital_status"
  Const        r128, "cd_education_status"
  Const        r129, "sales_price"
  Const        r130, "sales_price"
  // (ca.ca_state in states1 && ss.net_profit >= 0 && ss.net_profit <= 2000) ||
  Const        r131, "ca_state"
  Const        r132, "net_profit"
  Const        r133, "net_profit"
  // (ca.ca_state in states2 && ss.net_profit >= 150 && ss.net_profit <= 3000) ||
  Const        r134, "ca_state"
  Const        r135, "net_profit"
  Const        r136, "net_profit"
  // (ca.ca_state in states3 && ss.net_profit >= 50 && ss.net_profit <= 25000)
  Const        r137, "ca_state"
  Const        r138, "net_profit"
  Const        r139, "net_profit"
  // select ss.quantity
  Const        r140, "quantity"
  // join d in date_dim on ss.sold_date_sk == d.d_date_sk
  Const        r142, 0
  Move         r141, r142
L14:
  LessInt      r143, r141, r115
  JumpIfFalse  r143, L3
  Index        r144, r114, r141
  Move         r145, r144
  Const        r146, "sold_date_sk"
  Index        r147, r39, r146
  Const        r148, "d_date_sk"
  Index        r149, r145, r148
  Equal        r150, r147, r149
  JumpIfFalse  r150, L4
  // where d.d_year == year &&
  Const        r151, "d_year"
  Index        r152, r145, r151
  Equal        r153, r152, r5
  Move         r154, r153
  JumpIfFalse  r154, L5
  // (cd.cd_marital_status == "S" && cd.cd_education_status == "E1" && ss.sales_price >= 100.0 && ss.sales_price <= 150.0) ||
  Const        r155, "cd_marital_status"
  Index        r156, r71, r155
  Const        r157, "sales_price"
  Index        r158, r39, r157
  Const        r159, 100
  LessEqFloat  r160, r159, r158
  Const        r161, "sales_price"
  Index        r162, r39, r161
  Const        r163, 150
  LessEqFloat  r164, r162, r163
  Const        r165, "S"
  Equal        r166, r156, r165
  Const        r167, "cd_education_status"
  Index        r168, r71, r167
  Const        r169, "E1"
  Equal        r170, r168, r169
  Move         r171, r166
  JumpIfFalse  r171, L6
  Move         r171, r170
  JumpIfFalse  r171, L6
  Move         r171, r160
  JumpIfFalse  r171, L6
  Move         r171, r164
L6:
  Move         r172, r171
  JumpIfTrue   r172, L7
  // (cd.cd_marital_status == "M" && cd.cd_education_status == "E2" && ss.sales_price >= 50.0 && ss.sales_price <= 100.0) ||
  Const        r173, "cd_marital_status"
  Index        r174, r71, r173
  Const        r175, "sales_price"
  Index        r176, r39, r175
  Const        r177, 50
  LessEqFloat  r178, r177, r176
  Const        r179, "sales_price"
  Index        r180, r39, r179
  Const        r181, 100
  LessEqFloat  r182, r180, r181
  Const        r183, "M"
  Equal        r184, r174, r183
  Const        r185, "cd_education_status"
  Index        r186, r71, r185
  Const        r187, "E2"
  Equal        r188, r186, r187
  Move         r189, r184
  JumpIfFalse  r189, L8
  Move         r189, r188
  JumpIfFalse  r189, L8
  Move         r189, r178
  JumpIfFalse  r189, L8
  Move         r189, r182
L8:
  // (cd.cd_marital_status == "S" && cd.cd_education_status == "E1" && ss.sales_price >= 100.0 && ss.sales_price <= 150.0) ||
  Move         r172, r189
  // (cd.cd_marital_status == "M" && cd.cd_education_status == "E2" && ss.sales_price >= 50.0 && ss.sales_price <= 100.0) ||
  JumpIfTrue   r172, L7
  // (cd.cd_marital_status == "W" && cd.cd_education_status == "E3" && ss.sales_price >= 150.0 && ss.sales_price <= 200.0)
  Const        r190, "cd_marital_status"
  Index        r191, r71, r190
  Const        r192, "sales_price"
  Index        r193, r39, r192
  Const        r194, 150
  LessEqFloat  r195, r194, r193
  Const        r196, "sales_price"
  Index        r197, r39, r196
  Const        r198, 200
  LessEqFloat  r199, r197, r198
  Const        r200, "W"
  Equal        r201, r191, r200
  Const        r202, "cd_education_status"
  Index        r203, r71, r202
  Const        r204, "E3"
  Equal        r205, r203, r204
  Move         r206, r201
  JumpIfFalse  r206, L9
  Move         r206, r205
  JumpIfFalse  r206, L9
  Move         r206, r195
  JumpIfFalse  r206, L9
  Move         r206, r199
L9:
  // (cd.cd_marital_status == "M" && cd.cd_education_status == "E2" && ss.sales_price >= 50.0 && ss.sales_price <= 100.0) ||
  Move         r172, r206
L7:
  // where d.d_year == year &&
  Move         r154, r172
  // ) &&
  JumpIfFalse  r154, L5
  // (ca.ca_state in states1 && ss.net_profit >= 0 && ss.net_profit <= 2000) ||
  Const        r207, "ca_state"
  Index        r208, r108, r207
  Const        r209, "net_profit"
  Index        r210, r39, r209
  Const        r211, 0
  LessEq       r212, r211, r210
  Const        r213, "net_profit"
  Index        r214, r39, r213
  Const        r215, 2000
  LessEq       r216, r214, r215
  In           r217, r208, r6
  Move         r218, r217
  JumpIfFalse  r218, L10
  Move         r218, r212
  JumpIfFalse  r218, L10
  Move         r218, r216
L10:
  Move         r219, r218
  JumpIfTrue   r219, L11
  // (ca.ca_state in states2 && ss.net_profit >= 150 && ss.net_profit <= 3000) ||
  Const        r220, "ca_state"
  Index        r221, r108, r220
  Const        r222, "net_profit"
  Index        r223, r39, r222
  Const        r224, 150
  LessEq       r225, r224, r223
  Const        r226, "net_profit"
  Index        r227, r39, r226
  Const        r228, 3000
  LessEq       r229, r227, r228
  In           r230, r221, r7
  Move         r231, r230
  JumpIfFalse  r231, L12
  Move         r231, r225
  JumpIfFalse  r231, L12
  Move         r231, r229
L12:
  // (ca.ca_state in states1 && ss.net_profit >= 0 && ss.net_profit <= 2000) ||
  Move         r219, r231
  // (ca.ca_state in states2 && ss.net_profit >= 150 && ss.net_profit <= 3000) ||
  JumpIfTrue   r219, L11
  // (ca.ca_state in states3 && ss.net_profit >= 50 && ss.net_profit <= 25000)
  Const        r232, "ca_state"
  Index        r233, r108, r232
  Const        r234, "net_profit"
  Index        r235, r39, r234
  Const        r236, 50
  LessEq       r237, r236, r235
  Const        r238, "net_profit"
  Index        r239, r39, r238
  Const        r240, 25000
  LessEq       r241, r239, r240
  In           r242, r233, r8
  Move         r243, r242
  JumpIfFalse  r243, L13
  Move         r243, r237
  JumpIfFalse  r243, L13
  Move         r243, r241
L13:
  // (ca.ca_state in states2 && ss.net_profit >= 150 && ss.net_profit <= 3000) ||
  Move         r219, r243
L11:
  // ) &&
  Move         r154, r219
L5:
  // where d.d_year == year &&
  JumpIfFalse  r154, L4
  // select ss.quantity
  Const        r244, "quantity"
  Index        r245, r39, r244
  // from ss in store_sales
  Append       r246, r9, r245
  Move         r9, r246
L4:
  // join d in date_dim on ss.sold_date_sk == d.d_date_sk
  Const        r247, 1
  Add          r141, r141, r247
  Jump         L14
L3:
  // join ca in customer_address on ss.addr_sk == ca.ca_address_sk
  Const        r248, 1
  Add          r104, r104, r248
  Jump         L15
L2:
  // join cd in customer_demographics on ss.cdemo_sk == cd.cd_demo_sk
  Const        r249, 1
  Add          r67, r67, r249
  Jump         L16
L1:
  // from ss in store_sales
  Const        r250, 1
  AddInt       r35, r35, r250
  Jump         L17
L0:
  // let result = sum(qty)
  Sum          r251, r9
  // json(result)
  JSON         r251
  // expect result == 35
  Const        r252, 35
  Equal        r253, r251, r252
  Expect       r253
  Return       r0
