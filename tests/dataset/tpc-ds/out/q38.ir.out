func main (regs=58)
  // let customer = [
  Const        r0, [{"c_customer_sk": 1, "c_first_name": "John", "c_last_name": "Smith"}, {"c_customer_sk": 2, "c_first_name": "Alice", "c_last_name": "Jones"}]
  // let store_sales = [
  Const        r1, [{"d_month_seq": 1200, "ss_customer_sk": 1}, {"d_month_seq": 1205, "ss_customer_sk": 2}]
  // let catalog_sales = [
  Const        r2, [{"cs_bill_customer_sk": 1, "d_month_seq": 1203}]
  // let web_sales = [
  Const        r3, [{"d_month_seq": 1206, "ws_bill_customer_sk": 1}]
  // let store_ids = distinct(from s in store_sales where s.d_month_seq >= 1200 && s.d_month_seq <= 1211 select s.ss_customer_sk)
  Const        r4, []
  Const        r5, "d_month_seq"
  Const        r6, "ss_customer_sk"
  IterPrep     r7, r1
  Len          r8, r7
  Const        r10, 0
  Move         r9, r10
L3:
  LessInt      r11, r9, r8
  JumpIfFalse  r11, L0
  Index        r13, r7, r9
  Index        r14, r13, r5
  Const        r15, 1200
  LessEq       r16, r15, r14
  Index        r17, r13, r5
  Const        r18, 1211
  LessEq       r19, r17, r18
  JumpIfFalse  r16, L1
  Move         r16, r19
L1:
  JumpIfFalse  r16, L2
  Index        r20, r13, r6
  Append       r4, r4, r20
L2:
  Const        r22, 1
  AddInt       r9, r9, r22
  Jump         L3
L0:
  Distinct     23,4,0,0
  // let catalog_ids = distinct(from c in catalog_sales where c.d_month_seq >= 1200 && c.d_month_seq <= 1211 select c.cs_bill_customer_sk)
  Const        r24, []
  Const        r25, "cs_bill_customer_sk"
  IterPrep     r26, r2
  Len          r27, r26
  Move         r28, r10
L7:
  LessInt      r29, r28, r27
  JumpIfFalse  r29, L4
  Index        r31, r26, r28
  Index        r32, r31, r5
  LessEq       r33, r15, r32
  Index        r34, r31, r5
  LessEq       r35, r34, r18
  JumpIfFalse  r33, L5
  Move         r33, r35
L5:
  JumpIfFalse  r33, L6
  Index        r36, r31, r25
  Append       r24, r24, r36
L6:
  AddInt       r28, r28, r22
  Jump         L7
L4:
  Distinct     38,24,0,0
  // let web_ids = distinct(from w in web_sales where w.d_month_seq >= 1200 && w.d_month_seq <= 1211 select w.ws_bill_customer_sk)
  Const        r39, []
  Const        r40, "ws_bill_customer_sk"
  IterPrep     r41, r3
  Len          r42, r41
  Move         r43, r10
L11:
  LessInt      r44, r43, r42
  JumpIfFalse  r44, L8
  Index        r46, r41, r43
  Index        r47, r46, r5
  LessEq       r48, r15, r47
  Index        r49, r46, r5
  LessEq       r50, r49, r18
  JumpIfFalse  r48, L9
  Move         r48, r50
L9:
  JumpIfFalse  r48, L10
  Index        r51, r46, r40
  Append       r39, r39, r51
L10:
  AddInt       r43, r43, r22
  Jump         L11
L8:
  Distinct     53,39,0,0
  // let hot = store_ids intersect catalog_ids intersect web_ids
  Intersect    r54, r23, r38
  Intersect    r55, r54, r53
  // let result = len(hot)
  Len          r56, r55
  // json(result)
  JSON         r56
  // expect result == 1
  EqualInt     r57, r56, r22
  Expect       r57
  Return       r0

  // fun distinct(xs: list<any>): list<any> {
func distinct (regs=14)
  // var out = []
  Const        r2, []
  // for x in xs {
  IterPrep     r3, r0
  Len          r4, r3
  Const        r5, 0
L2:
  Less         r6, r5, r4
  JumpIfFalse  r6, L0
  Index        r8, r3, r5
  // if !contains(out, x) {
  Not          r10, r9
  JumpIfFalse  r10, L1
  // out = append(out, x)
  Append       r2, r2, r8
L1:
  // for x in xs {
  Const        r12, 1
  Add          r5, r5, r12
  Jump         L2
L0:
  // return out
  Return       r2
