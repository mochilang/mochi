func main (regs=351)
  // let date_dim = [
  Const        r0, [{"d_date_sk": 1, "d_year": 2000}, {"d_date_sk": 2, "d_year": 2001}]
  // let store_sales = [
  Const        r1, [{"ss_item_sk": 1, "ss_quantity": 50, "ss_sales_price": 500.0, "ss_sold_date_sk": 1}, {"ss_item_sk": 1, "ss_quantity": 40, "ss_sales_price": 400.0, "ss_sold_date_sk": 2}]
  // let web_sales = [
  Const        r2, [{"ws_item_sk": 1, "ws_quantity": 30, "ws_sales_price": 300.0, "ws_sold_date_sk": 1}, {"ws_item_sk": 1, "ws_quantity": 25, "ws_sales_price": 250.0, "ws_sold_date_sk": 2}]
  // let catalog_sales = [
  Const        r3, [{"cs_item_sk": 1, "cs_quantity": 20, "cs_sales_price": 200.0, "cs_sold_date_sk": 1}, {"cs_item_sk": 1, "cs_quantity": 15, "cs_sales_price": 150.0, "cs_sold_date_sk": 2}]
  // let item = [
  Const        r4, [{"i_brand_id": 1, "i_category": "Electronics", "i_category_id": 3, "i_class_id": 2, "i_item_sk": 1, "i_manufact_id": 4}]
  // from ss in store_sales join d in date_dim on d.d_date_sk == ss.ss_sold_date_sk select { d_year: d.d_year, i_item_sk: ss.ss_item_sk, quantity: ss.ss_quantity, amount: ss.ss_sales_price },
  Const        r5, []
  IterPrep     r6, r1
  Len          r7, r6
  IterPrep     r8, r0
  Len          r9, r8
  Const        r10, "d_date_sk"
  Const        r11, "ss_sold_date_sk"
  Const        r12, "d_year"
  Const        r13, "i_item_sk"
  Const        r14, "ss_item_sk"
  Const        r15, "quantity"
  Const        r16, "ss_quantity"
  Const        r17, "amount"
  Const        r18, "ss_sales_price"
  Const        r19, 0
  LessInt      r20, r19, r7
L4:
  JumpIfFalse  r20, L0
  Index        r21, r6, r19
  Move         r22, r21
  Const        r23, 0
  LessInt      r24, r23, r9
L3:
  JumpIfFalse  r24, L1
  Index        r25, r8, r23
  Move         r26, r25
  Const        r10, "d_date_sk"
  Index        r27, r26, r10
  Const        r11, "ss_sold_date_sk"
  Index        r28, r22, r11
  Equal        r29, r27, r28
  JumpIfFalse  r29, L2
  Const        r30, "d_year"
  Const        r12, "d_year"
  Index        r31, r26, r12
  Const        r32, "i_item_sk"
  Const        r14, "ss_item_sk"
  Index        r33, r22, r14
  Const        r34, "quantity"
  Const        r16, "ss_quantity"
  Index        r35, r22, r16
  Const        r36, "amount"
  Const        r18, "ss_sales_price"
  Index        r37, r22, r18
  Move         r38, r30
  Move         r39, r31
  Move         r40, r32
  Move         r41, r33
  Move         r42, r34
  Move         r43, r35
  Move         r44, r36
  Move         r45, r37
  MakeMap      r46, 4, r38
  Append       r47, r5, r46
  Move         r5, r47
  Const        r48, 1
L2:
  AddInt       r23, r23, r48
  Jump         L3
L1:
  AddInt       r19, r19, r48
  Jump         L4
L0:
  // from ws in web_sales join d in date_dim on d.d_date_sk == ws.ws_sold_date_sk select { d_year: d.d_year, i_item_sk: ws.ws_item_sk, quantity: ws.ws_quantity, amount: ws.ws_sales_price },
  IterPrep     r50, r2
  Len          r51, r50
  IterPrep     r52, r0
  Len          r53, r52
  Const        r10, "d_date_sk"
  Const        r54, "ws_sold_date_sk"
  Const        r12, "d_year"
  Const        r13, "i_item_sk"
  Const        r55, "ws_item_sk"
  Const        r15, "quantity"
  Const        r56, "ws_quantity"
  Const        r17, "amount"
  Const        r57, "ws_sales_price"
  Const        r58, 0
  LessInt      r59, r58, r51
  JumpIfFalse  r59, L5
L6:
  Index        r60, r50, r58
  Move         r61, r60
  Const        r62, 0
  LessInt      r63, r62, r53
  JumpIfFalse  r63, L6
L7:
  Index        r64, r52, r62
  Move         r26, r64
  Const        r10, "d_date_sk"
  Index        r65, r26, r10
  Const        r54, "ws_sold_date_sk"
  Index        r66, r61, r54
  Equal        r67, r65, r66
  JumpIfFalse  r67, L7
  Const        r68, "d_year"
  Const        r12, "d_year"
  Index        r69, r26, r12
  Const        r70, "i_item_sk"
  Const        r55, "ws_item_sk"
  Index        r71, r61, r55
  Const        r72, "quantity"
  Const        r56, "ws_quantity"
  Index        r73, r61, r56
  Const        r74, "amount"
  Const        r57, "ws_sales_price"
  Index        r75, r61, r57
  Move         r76, r68
  Move         r77, r69
  Move         r78, r70
  Move         r79, r71
  Move         r80, r72
  Move         r81, r73
  Move         r82, r74
  Move         r83, r75
  MakeMap      r84, 4, r76
  Append       r85, r49, r84
  Move         r49, r85
  Const        r48, 1
  AddInt       r62, r62, r48
  Jump         L7
L5:
  // from cs in catalog_sales join d in date_dim on d.d_date_sk == cs.cs_sold_date_sk select { d_year: d.d_year, i_item_sk: cs.cs_item_sk, quantity: cs.cs_quantity, amount: cs.cs_sales_price }
  IterPrep     r88, r3
  Len          r89, r88
  IterPrep     r90, r0
  Len          r91, r90
  Const        r10, "d_date_sk"
  Const        r92, "cs_sold_date_sk"
  Const        r12, "d_year"
  Const        r13, "i_item_sk"
  Const        r93, "cs_item_sk"
  Const        r15, "quantity"
  Const        r94, "cs_quantity"
  Const        r17, "amount"
  Const        r95, "cs_sales_price"
  Const        r96, 0
  LessInt      r97, r96, r89
  JumpIfFalse  r97, L8
  Index        r98, r88, r96
L12:
  Move         r99, r98
  Const        r100, 0
  LessInt      r101, r100, r91
  JumpIfFalse  r101, L9
  Index        r102, r90, r100
L11:
  Move         r26, r102
  Const        r10, "d_date_sk"
  Index        r103, r26, r10
  Const        r92, "cs_sold_date_sk"
  Index        r104, r99, r92
  Equal        r105, r103, r104
  JumpIfFalse  r105, L10
  Const        r106, "d_year"
  Const        r12, "d_year"
  Index        r107, r26, r12
  Const        r108, "i_item_sk"
  Const        r93, "cs_item_sk"
  Index        r109, r99, r93
  Const        r110, "quantity"
  Const        r94, "cs_quantity"
  Index        r111, r99, r94
  Const        r112, "amount"
  Const        r95, "cs_sales_price"
  Index        r113, r99, r95
  Move         r114, r106
  Move         r115, r107
  Move         r116, r108
  Move         r117, r109
  Move         r118, r110
  Move         r119, r111
  Move         r120, r112
  Move         r121, r113
  MakeMap      r122, 4, r114
  Append       r123, r87, r122
  Move         r87, r123
  Const        r48, 1
  AddInt       r100, r100, r48
  Jump         L11
L10:
  Const        r48, 1
  AddInt       r96, r96, r48
  Jump         L12
L9:
  // concat(
  UnionAll     r124, r86, r87
  // from sd in sales_detail
  Const        r125, []
  // group by { year: sd.d_year, brand_id: i.i_brand_id, class_id: i.i_class_id, category_id: i.i_category_id, manuf_id: i.i_manufact_id } into g
  Const        r126, "year"
L8:
  Const        r12, "d_year"
  Const        r127, "brand_id"
  Const        r128, "i_brand_id"
  Const        r129, "class_id"
  Const        r130, "i_class_id"
  Const        r131, "category_id"
  Const        r132, "i_category_id"
  Const        r133, "manuf_id"
  Const        r134, "i_manufact_id"
  // where i.i_category == "Electronics"
  Const        r135, "i_category"
  // d_year: g.key.year,
  Const        r136, "key"
  // sales_cnt: sum(from x in g select x.sd.quantity),
  Const        r137, "sales_cnt"
  Const        r138, "sd"
  Const        r15, "quantity"
  // sales_amt: sum(from x in g select x.sd.amount)
  Const        r139, "sales_amt"
  Const        r17, "amount"
  // from sd in sales_detail
  MakeMap      r140, 0, r0
  Const        r142, []
  Move         r141, r142
  IterPrep     r143, r124
  Len          r144, r143
  Const        r145, 0
  LessInt      r146, r145, r144
  JumpIfFalse  r146, L13
  Index        r147, r143, r145
  Move         r148, r147
  // join i in item on i.i_item_sk == sd.i_item_sk
  IterPrep     r149, r4
  Len          r150, r149
  Const        r151, 0
  LessInt      r152, r151, r150
  JumpIfFalse  r152, L14
  Index        r153, r149, r151
  Move         r154, r153
  Const        r13, "i_item_sk"
  Index        r155, r154, r13
  Index        r156, r148, r13
  Equal        r157, r155, r156
  JumpIfFalse  r157, L15
  // where i.i_category == "Electronics"
  Const        r135, "i_category"
  Index        r158, r154, r135
  Const        r159, "Electronics"
  Equal        r160, r158, r159
  JumpIfFalse  r160, L15
  // from sd in sales_detail
  Const        r138, "sd"
  Move         r161, r148
  Const        r162, "i"
  Move         r163, r154
L17:
  Move         r164, r138
  Move         r165, r161
  Move         r166, r162
  Move         r167, r163
  MakeMap      r168, 2, r164
  // group by { year: sd.d_year, brand_id: i.i_brand_id, class_id: i.i_class_id, category_id: i.i_category_id, manuf_id: i.i_manufact_id } into g
  Const        r169, "year"
  Const        r12, "d_year"
  Index        r170, r148, r12
  Const        r171, "brand_id"
  Const        r128, "i_brand_id"
  Index        r172, r154, r128
  Const        r173, "class_id"
  Const        r130, "i_class_id"
  Index        r174, r154, r130
  Const        r175, "category_id"
  Const        r132, "i_category_id"
  Index        r176, r154, r132
  Const        r177, "manuf_id"
  Const        r134, "i_manufact_id"
  Index        r178, r154, r134
  Move         r179, r169
  Move         r180, r170
  Move         r181, r171
  Move         r182, r172
  Move         r183, r173
  Move         r184, r174
  Move         r185, r175
  Move         r186, r176
  Move         r187, r177
  Move         r188, r178
  MakeMap      r189, 5, r179
  Str          r190, r189
  In           r191, r190, r140
  JumpIfTrue   r191, L16
  // from sd in sales_detail
  Const        r142, []
  Const        r192, "__group__"
  Const        r193, true
  Const        r136, "key"
  // group by { year: sd.d_year, brand_id: i.i_brand_id, class_id: i.i_class_id, category_id: i.i_category_id, manuf_id: i.i_manufact_id } into g
  Move         r194, r189
  // from sd in sales_detail
  Const        r195, "items"
  Move         r196, r142
  Const        r197, "count"
  Const        r198, 0
  Move         r199, r192
  Move         r200, r193
  Move         r201, r136
  Move         r202, r194
  Move         r203, r195
  Move         r204, r196
  Move         r205, r197
  Move         r206, r198
  MakeMap      r207, 4, r199
  SetIndex     r140, r190, r207
  Append       r208, r141, r207
  Move         r141, r208
  Index        r209, r140, r190
  Index        r210, r209, r195
  Append       r211, r210, r168
  SetIndex     r209, r195, r211
  Index        r212, r209, r197
  Const        r48, 1
  AddInt       r213, r212, r48
  SetIndex     r209, r197, r213
  // join i in item on i.i_item_sk == sd.i_item_sk
  AddInt       r151, r151, r48
  Jump         L17
L16:
  // from sd in sales_detail
  Move         r218, r217
  // d_year: g.key.year,
  Const        r219, "d_year"
  Const        r136, "key"
  Index        r220, r218, r136
  Const        r126, "year"
  Index        r221, r220, r126
  // i_brand_id: g.key.brand_id,
  Const        r222, "i_brand_id"
  Index        r223, r218, r136
  Const        r127, "brand_id"
  Index        r224, r223, r127
L15:
  // i_class_id: g.key.class_id,
  Const        r225, "i_class_id"
  Index        r226, r218, r136
  Const        r129, "class_id"
L14:
  Index        r227, r226, r129
  // i_category_id: g.key.category_id,
  Const        r228, "i_category_id"
  Index        r229, r218, r136
L13:
  Const        r131, "category_id"
  Index        r230, r229, r131
  // i_manufact_id: g.key.manuf_id,
  Const        r231, "i_manufact_id"
L20:
  Index        r232, r218, r136
  Const        r133, "manuf_id"
  Index        r233, r232, r133
  // sales_cnt: sum(from x in g select x.sd.quantity),
  Const        r234, "sales_cnt"
  Const        r235, []
  Const        r138, "sd"
  Const        r15, "quantity"
  IterPrep     r236, r218
  Len          r237, r236
  Const        r198, 0
  Move         r238, r198
  LessInt      r239, r238, r237
  JumpIfFalse  r239, L18
  Index        r240, r236, r238
  Move         r241, r240
  Const        r138, "sd"
  Index        r242, r241, r138
  Const        r15, "quantity"
  Index        r243, r242, r15
  Append       r244, r235, r243
  Move         r235, r244
  Const        r48, 1
  AddInt       r238, r238, r48
  // sales_amt: sum(from x in g select x.sd.amount)
  Const        r138, "sd"
  Index        r253, r241, r138
  Const        r17, "amount"
  Index        r254, r253, r17
  Append       r255, r247, r254
  Move         r247, r255
  Const        r48, 1
  AddInt       r250, r250, r48
  Jump         L19
L18:
  // i_brand_id: g.key.brand_id,
  Move         r260, r224
  // i_class_id: g.key.class_id,
  Move         r261, r225
  Move         r262, r227
  // i_category_id: g.key.category_id,
  Move         r263, r228
  Move         r264, r230
  // i_manufact_id: g.key.manuf_id,
  Move         r265, r231
  Move         r266, r233
  // sales_cnt: sum(from x in g select x.sd.quantity),
  Move         r267, r234
  Move         r268, r245
L19:
  // sales_amt: sum(from x in g select x.sd.amount)
  Move         r269, r246
  Move         r270, r256
  // select {
  MakeMap      r271, 7, r257
  // from sd in sales_detail
  Append       r272, r125, r271
  Move         r125, r272
  Const        r48, 1
  AddInt       r214, r214, r48
  Jump         L20
