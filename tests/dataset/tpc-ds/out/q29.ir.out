func main (regs=521)
  // let store_sales = [
  Const        r0, [{"ss_customer_sk": 1, "ss_item_sk": 1, "ss_quantity": 10, "ss_sold_date_sk": 1, "ss_store_sk": 1, "ss_ticket_number": 1}]
  // let store_returns = [
  Const        r1, [{"sr_customer_sk": 1, "sr_item_sk": 1, "sr_return_quantity": 2, "sr_returned_date_sk": 2, "sr_ticket_number": 1}]
  // let catalog_sales = [
  Const        r2, [{"cs_bill_customer_sk": 1, "cs_item_sk": 1, "cs_quantity": 5, "cs_sold_date_sk": 3}]
  // let date_dim = [
  Const        r3, [{"d_date_sk": 1, "d_moy": 4, "d_year": 1999}, {"d_date_sk": 2, "d_moy": 5, "d_year": 1999}, {"d_date_sk": 3, "d_moy": 5, "d_year": 2000}]
  // let store = [ { s_store_sk: 1, s_store_id: "S1", s_store_name: "Store1" } ]
  Const        r4, [{"s_store_id": "S1", "s_store_name": "Store1", "s_store_sk": 1}]
  // let item = [ { i_item_sk: 1, i_item_id: "ITEM1", i_item_desc: "Desc1" } ]
  Const        r5, [{"i_item_desc": "Desc1", "i_item_id": "ITEM1", "i_item_sk": 1}]
  // from ss in store_sales
  Const        r6, []
  // where d1.d_moy == 4 && d1.d_year == 1999 && d2.d_moy >= 4 && d2.d_moy <= 7 && d3.d_year in [1999,2000,2001]
  Const        r7, "d_moy"
  Const        r8, "d_year"
  Const        r9, "d_moy"
  Const        r10, "d_moy"
  Const        r11, "d_year"
  // ss_quantity: ss.ss_quantity,
  Const        r12, "ss_quantity"
  Const        r13, "ss_quantity"
  // sr_return_quantity: sr.sr_return_quantity,
  Const        r14, "sr_return_quantity"
  Const        r15, "sr_return_quantity"
  // cs_quantity: cs.cs_quantity,
  Const        r16, "cs_quantity"
  Const        r17, "cs_quantity"
  // i_item_id: i.i_item_id,
  Const        r18, "i_item_id"
  Const        r19, "i_item_id"
  // i_item_desc: i.i_item_desc,
  Const        r20, "i_item_desc"
  Const        r21, "i_item_desc"
  // s_store_id: s.s_store_id,
  Const        r22, "s_store_id"
  Const        r23, "s_store_id"
  // s_store_name: s.s_store_name,
  Const        r24, "s_store_name"
  Const        r25, "s_store_name"
  // from ss in store_sales
  IterPrep     r26, r0
  Len          r27, r26
  Const        r29, 0
  Move         r28, r29
L19:
  LessInt      r30, r28, r27
  JumpIfFalse  r30, L0
  Index        r31, r26, r28
  Move         r32, r31
  // join sr in store_returns on ss.ss_ticket_number == sr.sr_ticket_number && ss.ss_item_sk == sr.sr_item_sk
  IterPrep     r33, r1
  Len          r34, r33
  Const        r35, "ss_ticket_number"
  Const        r36, "sr_ticket_number"
  Const        r37, "ss_item_sk"
  Const        r38, "sr_item_sk"
  // where d1.d_moy == 4 && d1.d_year == 1999 && d2.d_moy >= 4 && d2.d_moy <= 7 && d3.d_year in [1999,2000,2001]
  Const        r39, "d_moy"
  Const        r40, "d_year"
  Const        r41, "d_moy"
  Const        r42, "d_moy"
  Const        r43, "d_year"
  // ss_quantity: ss.ss_quantity,
  Const        r44, "ss_quantity"
  Const        r45, "ss_quantity"
  // sr_return_quantity: sr.sr_return_quantity,
  Const        r46, "sr_return_quantity"
  Const        r47, "sr_return_quantity"
  // cs_quantity: cs.cs_quantity,
  Const        r48, "cs_quantity"
  Const        r49, "cs_quantity"
  // i_item_id: i.i_item_id,
  Const        r50, "i_item_id"
  Const        r51, "i_item_id"
  // i_item_desc: i.i_item_desc,
  Const        r52, "i_item_desc"
  Const        r53, "i_item_desc"
  // s_store_id: s.s_store_id,
  Const        r54, "s_store_id"
  Const        r55, "s_store_id"
  // s_store_name: s.s_store_name,
  Const        r56, "s_store_name"
  Const        r57, "s_store_name"
  // join sr in store_returns on ss.ss_ticket_number == sr.sr_ticket_number && ss.ss_item_sk == sr.sr_item_sk
  Const        r59, 0
  Move         r58, r59
L18:
  LessInt      r60, r58, r34
  JumpIfFalse  r60, L1
  Index        r61, r33, r58
  Move         r62, r61
  Const        r63, "ss_ticket_number"
  Index        r64, r32, r63
  Const        r65, "sr_ticket_number"
  Index        r66, r62, r65
  Equal        r67, r64, r66
  Const        r68, "ss_item_sk"
  Index        r69, r32, r68
  Const        r70, "sr_item_sk"
  Index        r71, r62, r70
  Equal        r72, r69, r71
  Move         r73, r67
  JumpIfFalse  r73, L2
  Move         r73, r72
L2:
  JumpIfFalse  r73, L3
  // join cs in catalog_sales on sr.sr_customer_sk == cs.cs_bill_customer_sk && sr.sr_item_sk == cs.cs_item_sk
  IterPrep     r74, r2
  Len          r75, r74
  Const        r76, "sr_customer_sk"
  Const        r77, "cs_bill_customer_sk"
  Const        r78, "sr_item_sk"
  Const        r79, "cs_item_sk"
  // where d1.d_moy == 4 && d1.d_year == 1999 && d2.d_moy >= 4 && d2.d_moy <= 7 && d3.d_year in [1999,2000,2001]
  Const        r80, "d_moy"
  Const        r81, "d_year"
  Const        r82, "d_moy"
  Const        r83, "d_moy"
  Const        r84, "d_year"
  // ss_quantity: ss.ss_quantity,
  Const        r85, "ss_quantity"
  Const        r86, "ss_quantity"
  // sr_return_quantity: sr.sr_return_quantity,
  Const        r87, "sr_return_quantity"
  Const        r88, "sr_return_quantity"
  // cs_quantity: cs.cs_quantity,
  Const        r89, "cs_quantity"
  Const        r90, "cs_quantity"
  // i_item_id: i.i_item_id,
  Const        r91, "i_item_id"
  Const        r92, "i_item_id"
  // i_item_desc: i.i_item_desc,
  Const        r93, "i_item_desc"
  Const        r94, "i_item_desc"
  // s_store_id: s.s_store_id,
  Const        r95, "s_store_id"
  Const        r96, "s_store_id"
  // s_store_name: s.s_store_name,
  Const        r97, "s_store_name"
  Const        r98, "s_store_name"
  // join cs in catalog_sales on sr.sr_customer_sk == cs.cs_bill_customer_sk && sr.sr_item_sk == cs.cs_item_sk
  Const        r100, 0
  Move         r99, r100
L17:
  LessInt      r101, r99, r75
  JumpIfFalse  r101, L3
  Index        r102, r74, r99
  Move         r103, r102
  Const        r104, "sr_customer_sk"
  Index        r105, r62, r104
  Const        r106, "cs_bill_customer_sk"
  Index        r107, r103, r106
  Equal        r108, r105, r107
  Const        r109, "sr_item_sk"
  Index        r110, r62, r109
  Const        r111, "cs_item_sk"
  Index        r112, r103, r111
  Equal        r113, r110, r112
  Move         r114, r108
  JumpIfFalse  r114, L4
  Move         r114, r113
L4:
  JumpIfFalse  r114, L5
  // join d1 in date_dim on d1.d_date_sk == ss.ss_sold_date_sk
  IterPrep     r115, r3
  Len          r116, r115
  Const        r117, "d_date_sk"
  Const        r118, "ss_sold_date_sk"
  // where d1.d_moy == 4 && d1.d_year == 1999 && d2.d_moy >= 4 && d2.d_moy <= 7 && d3.d_year in [1999,2000,2001]
  Const        r119, "d_moy"
  Const        r120, "d_year"
  Const        r121, "d_moy"
  Const        r122, "d_moy"
  Const        r123, "d_year"
  // ss_quantity: ss.ss_quantity,
  Const        r124, "ss_quantity"
  Const        r125, "ss_quantity"
  // sr_return_quantity: sr.sr_return_quantity,
  Const        r126, "sr_return_quantity"
  Const        r127, "sr_return_quantity"
  // cs_quantity: cs.cs_quantity,
  Const        r128, "cs_quantity"
  Const        r129, "cs_quantity"
  // i_item_id: i.i_item_id,
  Const        r130, "i_item_id"
  Const        r131, "i_item_id"
  // i_item_desc: i.i_item_desc,
  Const        r132, "i_item_desc"
  Const        r133, "i_item_desc"
  // s_store_id: s.s_store_id,
  Const        r134, "s_store_id"
  Const        r135, "s_store_id"
  // s_store_name: s.s_store_name,
  Const        r136, "s_store_name"
  Const        r137, "s_store_name"
  // join d1 in date_dim on d1.d_date_sk == ss.ss_sold_date_sk
  Const        r139, 0
  Move         r138, r139
L16:
  LessInt      r140, r138, r116
  JumpIfFalse  r140, L5
  Index        r141, r115, r138
  Move         r142, r141
  Const        r143, "d_date_sk"
  Index        r144, r142, r143
  Const        r145, "ss_sold_date_sk"
  Index        r146, r32, r145
  Equal        r147, r144, r146
  JumpIfFalse  r147, L6
  // join d2 in date_dim on d2.d_date_sk == sr.sr_returned_date_sk
  IterPrep     r148, r3
  Len          r149, r148
  Const        r150, "d_date_sk"
  Const        r151, "sr_returned_date_sk"
  // where d1.d_moy == 4 && d1.d_year == 1999 && d2.d_moy >= 4 && d2.d_moy <= 7 && d3.d_year in [1999,2000,2001]
  Const        r152, "d_moy"
  Const        r153, "d_year"
  Const        r154, "d_moy"
  Const        r155, "d_moy"
  Const        r156, "d_year"
  // ss_quantity: ss.ss_quantity,
  Const        r157, "ss_quantity"
  Const        r158, "ss_quantity"
  // sr_return_quantity: sr.sr_return_quantity,
  Const        r159, "sr_return_quantity"
  Const        r160, "sr_return_quantity"
  // cs_quantity: cs.cs_quantity,
  Const        r161, "cs_quantity"
  Const        r162, "cs_quantity"
  // i_item_id: i.i_item_id,
  Const        r163, "i_item_id"
  Const        r164, "i_item_id"
  // i_item_desc: i.i_item_desc,
  Const        r165, "i_item_desc"
  Const        r166, "i_item_desc"
  // s_store_id: s.s_store_id,
  Const        r167, "s_store_id"
  Const        r168, "s_store_id"
  // s_store_name: s.s_store_name,
  Const        r169, "s_store_name"
  Const        r170, "s_store_name"
  // join d2 in date_dim on d2.d_date_sk == sr.sr_returned_date_sk
  Const        r172, 0
  Move         r171, r172
L15:
  LessInt      r173, r171, r149
  JumpIfFalse  r173, L6
  Index        r174, r148, r171
  Move         r175, r174
  Const        r176, "d_date_sk"
  Index        r177, r175, r176
  Const        r178, "sr_returned_date_sk"
  Index        r179, r62, r178
  Equal        r180, r177, r179
  JumpIfFalse  r180, L7
  // join d3 in date_dim on d3.d_date_sk == cs.cs_sold_date_sk
  IterPrep     r181, r3
  Len          r182, r181
  Const        r183, "d_date_sk"
  Const        r184, "cs_sold_date_sk"
  // where d1.d_moy == 4 && d1.d_year == 1999 && d2.d_moy >= 4 && d2.d_moy <= 7 && d3.d_year in [1999,2000,2001]
  Const        r185, "d_moy"
  Const        r186, "d_year"
  Const        r187, "d_moy"
  Const        r188, "d_moy"
  Const        r189, "d_year"
  // ss_quantity: ss.ss_quantity,
  Const        r190, "ss_quantity"
  Const        r191, "ss_quantity"
  // sr_return_quantity: sr.sr_return_quantity,
  Const        r192, "sr_return_quantity"
  Const        r193, "sr_return_quantity"
  // cs_quantity: cs.cs_quantity,
  Const        r194, "cs_quantity"
  Const        r195, "cs_quantity"
  // i_item_id: i.i_item_id,
  Const        r196, "i_item_id"
  Const        r197, "i_item_id"
  // i_item_desc: i.i_item_desc,
  Const        r198, "i_item_desc"
  Const        r199, "i_item_desc"
  // s_store_id: s.s_store_id,
  Const        r200, "s_store_id"
  Const        r201, "s_store_id"
  // s_store_name: s.s_store_name,
  Const        r202, "s_store_name"
  Const        r203, "s_store_name"
  // join d3 in date_dim on d3.d_date_sk == cs.cs_sold_date_sk
  Const        r205, 0
  Move         r204, r205
L14:
  LessInt      r206, r204, r182
  JumpIfFalse  r206, L7
  Index        r207, r181, r204
  Move         r208, r207
  Const        r209, "d_date_sk"
  Index        r210, r208, r209
  Const        r211, "cs_sold_date_sk"
  Index        r212, r103, r211
  Equal        r213, r210, r212
  JumpIfFalse  r213, L8
  // join s in store on s.s_store_sk == ss.ss_store_sk
  IterPrep     r214, r4
  Len          r215, r214
  Const        r216, "s_store_sk"
  Const        r217, "ss_store_sk"
  // where d1.d_moy == 4 && d1.d_year == 1999 && d2.d_moy >= 4 && d2.d_moy <= 7 && d3.d_year in [1999,2000,2001]
  Const        r218, "d_moy"
  Const        r219, "d_year"
  Const        r220, "d_moy"
  Const        r221, "d_moy"
  Const        r222, "d_year"
  // ss_quantity: ss.ss_quantity,
  Const        r223, "ss_quantity"
  Const        r224, "ss_quantity"
  // sr_return_quantity: sr.sr_return_quantity,
  Const        r225, "sr_return_quantity"
  Const        r226, "sr_return_quantity"
  // cs_quantity: cs.cs_quantity,
  Const        r227, "cs_quantity"
  Const        r228, "cs_quantity"
  // i_item_id: i.i_item_id,
  Const        r229, "i_item_id"
  Const        r230, "i_item_id"
  // i_item_desc: i.i_item_desc,
  Const        r231, "i_item_desc"
  Const        r232, "i_item_desc"
  // s_store_id: s.s_store_id,
  Const        r233, "s_store_id"
  Const        r234, "s_store_id"
  // s_store_name: s.s_store_name,
  Const        r235, "s_store_name"
  Const        r236, "s_store_name"
  // join s in store on s.s_store_sk == ss.ss_store_sk
  Const        r238, 0
  Move         r237, r238
L13:
  LessInt      r239, r237, r215
  JumpIfFalse  r239, L8
  Index        r240, r214, r237
  Move         r241, r240
  Const        r242, "s_store_sk"
  Index        r243, r241, r242
  Const        r244, "ss_store_sk"
  Index        r245, r32, r244
  Equal        r246, r243, r245
  JumpIfFalse  r246, L9
  // join i in item on i.i_item_sk == ss.ss_item_sk
  IterPrep     r247, r5
  Len          r248, r247
  Const        r249, "i_item_sk"
  Const        r250, "ss_item_sk"
  // where d1.d_moy == 4 && d1.d_year == 1999 && d2.d_moy >= 4 && d2.d_moy <= 7 && d3.d_year in [1999,2000,2001]
  Const        r251, "d_moy"
  Const        r252, "d_year"
  Const        r253, "d_moy"
  Const        r254, "d_moy"
  Const        r255, "d_year"
  // ss_quantity: ss.ss_quantity,
  Const        r256, "ss_quantity"
  Const        r257, "ss_quantity"
  // sr_return_quantity: sr.sr_return_quantity,
  Const        r258, "sr_return_quantity"
  Const        r259, "sr_return_quantity"
  // cs_quantity: cs.cs_quantity,
  Const        r260, "cs_quantity"
  Const        r261, "cs_quantity"
  // i_item_id: i.i_item_id,
  Const        r262, "i_item_id"
  Const        r263, "i_item_id"
  // i_item_desc: i.i_item_desc,
  Const        r264, "i_item_desc"
  Const        r265, "i_item_desc"
  // s_store_id: s.s_store_id,
  Const        r266, "s_store_id"
  Const        r267, "s_store_id"
  // s_store_name: s.s_store_name,
  Const        r268, "s_store_name"
  Const        r269, "s_store_name"
  // join i in item on i.i_item_sk == ss.ss_item_sk
  Const        r271, 0
  Move         r270, r271
L12:
  LessInt      r272, r270, r248
  JumpIfFalse  r272, L9
  Index        r273, r247, r270
  Move         r274, r273
  Const        r275, "i_item_sk"
  Index        r276, r274, r275
  Const        r277, "ss_item_sk"
  Index        r278, r32, r277
  Equal        r279, r276, r278
  JumpIfFalse  r279, L10
  // where d1.d_moy == 4 && d1.d_year == 1999 && d2.d_moy >= 4 && d2.d_moy <= 7 && d3.d_year in [1999,2000,2001]
  Const        r280, "d_moy"
  Index        r281, r142, r280
  Const        r282, "d_moy"
  Index        r283, r175, r282
  Const        r284, 4
  LessEq       r285, r284, r283
  Const        r286, "d_moy"
  Index        r287, r175, r286
  Const        r288, 7
  LessEq       r289, r287, r288
  Const        r290, 4
  Equal        r291, r281, r290
  Const        r292, "d_year"
  Index        r293, r142, r292
  Const        r294, 1999
  Equal        r295, r293, r294
  Const        r296, "d_year"
  Index        r297, r208, r296
  Const        r298, [1999, 2000, 2001]
  In           r299, r297, r298
  Move         r300, r291
  JumpIfFalse  r300, L11
  Move         r300, r295
  JumpIfFalse  r300, L11
  Move         r300, r285
  JumpIfFalse  r300, L11
  Move         r300, r289
  JumpIfFalse  r300, L11
  Move         r300, r299
L11:
  JumpIfFalse  r300, L10
  // ss_quantity: ss.ss_quantity,
  Const        r301, "ss_quantity"
  Const        r302, "ss_quantity"
  Index        r303, r32, r302
  // sr_return_quantity: sr.sr_return_quantity,
  Const        r304, "sr_return_quantity"
  Const        r305, "sr_return_quantity"
  Index        r306, r62, r305
  // cs_quantity: cs.cs_quantity,
  Const        r307, "cs_quantity"
  Const        r308, "cs_quantity"
  Index        r309, r103, r308
  // i_item_id: i.i_item_id,
  Const        r310, "i_item_id"
  Const        r311, "i_item_id"
  Index        r312, r274, r311
  // i_item_desc: i.i_item_desc,
  Const        r313, "i_item_desc"
  Const        r314, "i_item_desc"
  Index        r315, r274, r314
  // s_store_id: s.s_store_id,
  Const        r316, "s_store_id"
  Const        r317, "s_store_id"
  Index        r318, r241, r317
  // s_store_name: s.s_store_name,
  Const        r319, "s_store_name"
  Const        r320, "s_store_name"
  Index        r321, r241, r320
  // ss_quantity: ss.ss_quantity,
  Move         r322, r301
  Move         r323, r303
  // sr_return_quantity: sr.sr_return_quantity,
  Move         r324, r304
  Move         r325, r306
  // cs_quantity: cs.cs_quantity,
  Move         r326, r307
  Move         r327, r309
  // i_item_id: i.i_item_id,
  Move         r328, r310
  Move         r329, r312
  // i_item_desc: i.i_item_desc,
  Move         r330, r313
  Move         r331, r315
  // s_store_id: s.s_store_id,
  Move         r332, r316
  Move         r333, r318
  // s_store_name: s.s_store_name,
  Move         r334, r319
  Move         r335, r321
  // select {
  MakeMap      r336, 7, r322
  // from ss in store_sales
  Append       r337, r6, r336
  Move         r6, r337
L10:
  // join i in item on i.i_item_sk == ss.ss_item_sk
  Const        r338, 1
  Add          r270, r270, r338
  Jump         L12
L9:
  // join s in store on s.s_store_sk == ss.ss_store_sk
  Const        r339, 1
  Add          r237, r237, r339
  Jump         L13
L8:
  // join d3 in date_dim on d3.d_date_sk == cs.cs_sold_date_sk
  Const        r340, 1
  Add          r204, r204, r340
  Jump         L14
L7:
  // join d2 in date_dim on d2.d_date_sk == sr.sr_returned_date_sk
  Const        r341, 1
  Add          r171, r171, r341
  Jump         L15
L6:
  // join d1 in date_dim on d1.d_date_sk == ss.ss_sold_date_sk
  Const        r342, 1
  Add          r138, r138, r342
  Jump         L16
L5:
  // join cs in catalog_sales on sr.sr_customer_sk == cs.cs_bill_customer_sk && sr.sr_item_sk == cs.cs_item_sk
  Const        r343, 1
  Add          r99, r99, r343
  Jump         L17
L3:
  // join sr in store_returns on ss.ss_ticket_number == sr.sr_ticket_number && ss.ss_item_sk == sr.sr_item_sk
  Const        r344, 1
  Add          r58, r58, r344
  Jump         L18
L1:
  // from ss in store_sales
  Const        r345, 1
  AddInt       r28, r28, r345
  Jump         L19
L0:
  // from b in base
  Const        r346, []
  // group by { item_id: b.i_item_id, item_desc: b.i_item_desc, s_store_id: b.s_store_id, s_store_name: b.s_store_name } into g
  Const        r347, "item_id"
  Const        r348, "i_item_id"
  Const        r349, "item_desc"
  Const        r350, "i_item_desc"
  Const        r351, "s_store_id"
  Const        r352, "s_store_id"
  Const        r353, "s_store_name"
  Const        r354, "s_store_name"
  // i_item_id: g.key.item_id,
  Const        r355, "i_item_id"
  Const        r356, "key"
  Const        r357, "item_id"
  // i_item_desc: g.key.item_desc,
  Const        r358, "i_item_desc"
  Const        r359, "key"
  Const        r360, "item_desc"
  // s_store_id: g.key.s_store_id,
  Const        r361, "s_store_id"
  Const        r362, "key"
  Const        r363, "s_store_id"
  // s_store_name: g.key.s_store_name,
  Const        r364, "s_store_name"
  Const        r365, "key"
  Const        r366, "s_store_name"
  // store_sales_quantity: sum(from x in g select x.ss_quantity),
  Const        r367, "store_sales_quantity"
  Const        r368, "ss_quantity"
  // store_returns_quantity: sum(from x in g select x.sr_return_quantity),
  Const        r369, "store_returns_quantity"
  Const        r370, "sr_return_quantity"
  // catalog_sales_quantity: sum(from x in g select x.cs_quantity)
  Const        r371, "catalog_sales_quantity"
  Const        r372, "cs_quantity"
  // from b in base
  IterPrep     r373, r6
  Len          r374, r373
  Const        r375, 0
  MakeMap      r376, 0, r0
  Const        r378, []
  Move         r377, r378
L22:
  LessInt      r379, r375, r374
  JumpIfFalse  r379, L20
  Index        r380, r373, r375
  Move         r381, r380
  // group by { item_id: b.i_item_id, item_desc: b.i_item_desc, s_store_id: b.s_store_id, s_store_name: b.s_store_name } into g
  Const        r382, "item_id"
  Const        r383, "i_item_id"
  Index        r384, r381, r383
  Const        r385, "item_desc"
  Const        r386, "i_item_desc"
  Index        r387, r381, r386
  Const        r388, "s_store_id"
  Const        r389, "s_store_id"
  Index        r390, r381, r389
  Const        r391, "s_store_name"
  Const        r392, "s_store_name"
  Index        r393, r381, r392
  Move         r394, r382
  Move         r395, r384
  Move         r396, r385
  Move         r397, r387
  Move         r398, r388
  Move         r399, r390
  Move         r400, r391
  Move         r401, r393
  MakeMap      r402, 4, r394
  Str          r403, r402
  In           r404, r403, r376
  JumpIfTrue   r404, L21
  // from b in base
  Const        r405, []
  Const        r406, "__group__"
  Const        r407, true
  Const        r408, "key"
  // group by { item_id: b.i_item_id, item_desc: b.i_item_desc, s_store_id: b.s_store_id, s_store_name: b.s_store_name } into g
  Move         r409, r402
  // from b in base
  Const        r410, "items"
  Move         r411, r405
  Const        r412, "count"
  Const        r413, 0
  Move         r414, r406
  Move         r415, r407
  Move         r416, r408
  Move         r417, r409
  Move         r418, r410
  Move         r419, r411
  Move         r420, r412
  Move         r421, r413
  MakeMap      r422, 4, r414
  SetIndex     r376, r403, r422
  Append       r423, r377, r422
  Move         r377, r423
L21:
  Const        r424, "items"
  Index        r425, r376, r403
  Index        r426, r425, r424
  Append       r427, r426, r380
  SetIndex     r425, r424, r427
  Const        r428, "count"
  Index        r429, r425, r428
  Const        r430, 1
  AddInt       r431, r429, r430
  SetIndex     r425, r428, r431
  Const        r432, 1
  AddInt       r375, r375, r432
  Jump         L22
L20:
  Const        r434, 0
  Move         r433, r434
  Len          r435, r377
L30:
  LessInt      r436, r433, r435
  JumpIfFalse  r436, L23
  Index        r437, r377, r433
  Move         r438, r437
  // i_item_id: g.key.item_id,
  Const        r439, "i_item_id"
  Const        r440, "key"
  Index        r441, r438, r440
  Const        r442, "item_id"
  Index        r443, r441, r442
  // i_item_desc: g.key.item_desc,
  Const        r444, "i_item_desc"
  Const        r445, "key"
  Index        r446, r438, r445
  Const        r447, "item_desc"
  Index        r448, r446, r447
  // s_store_id: g.key.s_store_id,
  Const        r449, "s_store_id"
  Const        r450, "key"
  Index        r451, r438, r450
  Const        r452, "s_store_id"
  Index        r453, r451, r452
  // s_store_name: g.key.s_store_name,
  Const        r454, "s_store_name"
  Const        r455, "key"
  Index        r456, r438, r455
  Const        r457, "s_store_name"
  Index        r458, r456, r457
  // store_sales_quantity: sum(from x in g select x.ss_quantity),
  Const        r459, "store_sales_quantity"
  Const        r460, []
  Const        r461, "ss_quantity"
  IterPrep     r462, r438
  Len          r463, r462
  Const        r465, 0
  Move         r464, r465
L25:
  LessInt      r466, r464, r463
  JumpIfFalse  r466, L24
  Index        r467, r462, r464
  Move         r468, r467
  Const        r469, "ss_quantity"
  Index        r470, r468, r469
  Append       r471, r460, r470
  Move         r460, r471
  Const        r472, 1
  AddInt       r464, r464, r472
  Jump         L25
L24:
  Sum          r473, r460
  // store_returns_quantity: sum(from x in g select x.sr_return_quantity),
  Const        r474, "store_returns_quantity"
  Const        r475, []
  Const        r476, "sr_return_quantity"
  IterPrep     r477, r438
  Len          r478, r477
  Const        r480, 0
  Move         r479, r480
L27:
  LessInt      r481, r479, r478
  JumpIfFalse  r481, L26
  Index        r482, r477, r479
  Move         r468, r482
  Const        r483, "sr_return_quantity"
  Index        r484, r468, r483
  Append       r485, r475, r484
  Move         r475, r485
  Const        r486, 1
  AddInt       r479, r479, r486
  Jump         L27
L26:
  Sum          r487, r475
  // catalog_sales_quantity: sum(from x in g select x.cs_quantity)
  Const        r488, "catalog_sales_quantity"
  Const        r489, []
  Const        r490, "cs_quantity"
  IterPrep     r491, r438
  Len          r492, r491
  Const        r494, 0
  Move         r493, r494
L29:
  LessInt      r495, r493, r492
  JumpIfFalse  r495, L28
  Index        r496, r491, r493
  Move         r468, r496
  Const        r497, "cs_quantity"
  Index        r498, r468, r497
  Append       r499, r489, r498
  Move         r489, r499
  Const        r500, 1
  AddInt       r493, r493, r500
  Jump         L29
L28:
  Sum          r501, r489
  // i_item_id: g.key.item_id,
  Move         r502, r439
  Move         r503, r443
  // i_item_desc: g.key.item_desc,
  Move         r504, r444
  Move         r505, r448
  // s_store_id: g.key.s_store_id,
  Move         r506, r449
  Move         r507, r453
  // s_store_name: g.key.s_store_name,
  Move         r508, r454
  Move         r509, r458
  // store_sales_quantity: sum(from x in g select x.ss_quantity),
  Move         r510, r459
  Move         r511, r473
  // store_returns_quantity: sum(from x in g select x.sr_return_quantity),
  Move         r512, r474
  Move         r513, r487
  // catalog_sales_quantity: sum(from x in g select x.cs_quantity)
  Move         r514, r488
  Move         r515, r501
  // select {
  MakeMap      r516, 7, r502
  // from b in base
  Append       r517, r346, r516
  Move         r346, r517
  Const        r518, 1
  AddInt       r433, r433, r518
  Jump         L30
L23:
  // json(result)
  JSON         r346
  // expect result == [
  Const        r519, [{"catalog_sales_quantity": 5, "i_item_desc": "Desc1", "i_item_id": "ITEM1", "s_store_id": "S1", "s_store_name": "Store1", "store_returns_quantity": 2, "store_sales_quantity": 10}]
  Equal        r520, r346, r519
  Expect       r520
  Return       r0
