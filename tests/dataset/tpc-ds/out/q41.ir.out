func main (regs=49)
  // let item = [
  Const        r0, [{"category": "Women", "color": "blue", "manufact": 1, "manufact_id": 100, "product_name": "Blue Shirt", "size": "M", "units": "pack"}, {"category": "Women", "color": "red", "manufact": 1, "manufact_id": 120, "product_name": "Red Dress", "size": "M", "units": "pack"}, {"category": "Men", "color": "black", "manufact": 2, "manufact_id": 200, "product_name": "Pants", "size": "L", "units": "pair"}]
  // let lower = 100
  Const        r1, 100
  // from i1 in item
  Const        r2, []
  // where i1.manufact_id >= lower && i1.manufact_id <= lower + 40 &&
  Const        r3, "manufact_id"
  // count(from i2 in item where i2.manufact == i1.manufact && i2.category == i1.category select i2) > 1
  Const        r4, "manufact"
  Const        r5, "category"
  // select i1.product_name
  Const        r6, "product_name"
  // from i1 in item
  IterPrep     r7, r0
  Len          r8, r7
  Const        r10, 0
  Move         r9, r10
L8:
  LessInt      r11, r9, r8
  JumpIfFalse  r11, L0
  Index        r12, r7, r9
  Move         r13, r12
  // where i1.manufact_id >= lower && i1.manufact_id <= lower + 40 &&
  Index        r14, r13, r3
  Const        r15, 40
  Const        r16, 140
  LessEq       r17, r1, r14
  Index        r18, r13, r3
  LessEq       r19, r18, r16
  // count(from i2 in item where i2.manufact == i1.manufact && i2.category == i1.category select i2) > 1
  Const        r20, []
  IterPrep     r21, r0
  Len          r22, r21
  Move         r23, r10
L4:
  LessInt      r24, r23, r22
  JumpIfFalse  r24, L1
  Index        r25, r21, r23
  Move         r26, r25
  Index        r27, r26, r4
  Index        r28, r13, r4
  Equal        r29, r27, r28
  Index        r30, r26, r5
  Index        r31, r13, r5
  Equal        r32, r30, r31
  Move         r33, r29
  JumpIfFalse  r33, L2
  Move         r33, r32
L2:
  JumpIfFalse  r33, L3
  Append       r34, r20, r26
  Move         r20, r34
L3:
  Const        r35, 1
  AddInt       r23, r23, r35
  Jump         L4
L1:
  Count        r36, r20
  LessInt      r37, r35, r36
  // where i1.manufact_id >= lower && i1.manufact_id <= lower + 40 &&
  Move         r38, r17
  JumpIfFalse  r38, L5
  Move         r38, r19
L5:
  Move         r39, r38
  JumpIfFalse  r39, L6
  Move         r39, r37
L6:
  JumpIfFalse  r39, L7
  // select i1.product_name
  Index        r40, r13, r6
  // order by i1.product_name
  Index        r41, r13, r6
  Move         r42, r41
  // from i1 in item
  Move         r43, r40
  MakeList     r44, 2, r42
  Append       r45, r2, r44
  Move         r2, r45
L7:
  AddInt       r9, r9, r35
  Jump         L8
L0:
  // order by i1.product_name
  Sort         r46, r2
  // from i1 in item
  Move         r2, r46
  // json(result)
  JSON         r2
  // expect result == ["Blue Shirt", "Red Dress"]
  Const        r47, ["Blue Shirt", "Red Dress"]
  Equal        r48, r2, r47
  Expect       r48
  Return       r0
