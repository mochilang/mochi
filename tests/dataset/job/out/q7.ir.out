func main (regs=250)
  // let aka_name = [
  Const        r0, [{"name": "Anna Mae", "person_id": 1}, {"name": "Chris", "person_id": 2}]
  Move         r1, r0
  // let cast_info = [
  Const        r2, [{"movie_id": 10, "person_id": 1}, {"movie_id": 20, "person_id": 2}]
  Move         r3, r2
  // let info_type = [
  Const        r4, [{"id": 1, "info": "mini biography"}, {"id": 2, "info": "trivia"}]
  Move         r5, r4
  // let link_type = [
  Const        r6, [{"id": 1, "link": "features"}, {"id": 2, "link": "references"}]
  Move         r7, r6
  // let movie_link = [
  Const        r8, [{"link_type_id": 1, "linked_movie_id": 10}, {"link_type_id": 2, "linked_movie_id": 20}]
  Move         r9, r8
  // let name = [
  Const        r10, [{"gender": "m", "id": 1, "name": "Alan Brown", "name_pcode_cf": "B"}, {"gender": "f", "id": 2, "name": "Zoe", "name_pcode_cf": "Z"}]
  Move         r11, r10
  // let person_info = [
  Const        r12, [{"info_type_id": 1, "note": "Volker Boehm", "person_id": 1}, {"info_type_id": 1, "note": "Other", "person_id": 2}]
  Move         r13, r12
  // let title = [
  Const        r14, [{"id": 10, "production_year": 1990, "title": "Feature Film"}, {"id": 20, "production_year": 2000, "title": "Late Film"}]
  Move         r15, r14
  // from an in aka_name
  Const        r16, []
  IterPrep     r17, r1
  Len          r18, r17
  Const        r19, 0
L32:
  Less         r20, r19, r18
  JumpIfFalse  r20, L0
  Index        r21, r17, r19
  Move         r22, r21
  // join n in name on n.id == an.person_id
  IterPrep     r23, r11
  Len          r24, r23
  Const        r25, 0
L31:
  Less         r26, r25, r24
  JumpIfFalse  r26, L1
  Index        r27, r23, r25
  Move         r28, r27
  Const        r29, "id"
  Index        r30, r28, r29
  Const        r31, "person_id"
  Index        r32, r22, r31
  Equal        r33, r30, r32
  JumpIfFalse  r33, L2
  // join pi in person_info on pi.person_id == an.person_id
  IterPrep     r34, r13
  Len          r35, r34
  Const        r36, 0
L30:
  Less         r37, r36, r35
  JumpIfFalse  r37, L2
  Index        r38, r34, r36
  Move         r39, r38
  Const        r40, "person_id"
  Index        r41, r39, r40
  Const        r42, "person_id"
  Index        r43, r22, r42
  Equal        r44, r41, r43
  JumpIfFalse  r44, L3
  // join it in info_type on it.id == pi.info_type_id
  IterPrep     r45, r5
  Len          r46, r45
  Const        r47, 0
L29:
  Less         r48, r47, r46
  JumpIfFalse  r48, L3
  Index        r49, r45, r47
  Move         r50, r49
  Const        r51, "id"
  Index        r52, r50, r51
  Const        r53, "info_type_id"
  Index        r54, r39, r53
  Equal        r55, r52, r54
  JumpIfFalse  r55, L4
  // join ci in cast_info on ci.person_id == n.id
  IterPrep     r56, r3
  Len          r57, r56
  Const        r58, 0
L28:
  Less         r59, r58, r57
  JumpIfFalse  r59, L4
  Index        r60, r56, r58
  Move         r61, r60
  Const        r62, "person_id"
  Index        r63, r61, r62
  Const        r64, "id"
  Index        r65, r28, r64
  Equal        r66, r63, r65
  JumpIfFalse  r66, L5
  // join t in title on t.id == ci.movie_id
  IterPrep     r67, r15
  Len          r68, r67
  Const        r69, 0
L27:
  Less         r70, r69, r68
  JumpIfFalse  r70, L5
  Index        r71, r67, r69
  Move         r72, r71
  Const        r73, "id"
  Index        r74, r72, r73
  Const        r75, "movie_id"
  Index        r76, r61, r75
  Equal        r77, r74, r76
  JumpIfFalse  r77, L6
  // join ml in movie_link on ml.linked_movie_id == t.id
  IterPrep     r78, r9
  Len          r79, r78
  Const        r80, 0
L26:
  Less         r81, r80, r79
  JumpIfFalse  r81, L6
  Index        r82, r78, r80
  Move         r83, r82
  Const        r84, "linked_movie_id"
  Index        r85, r83, r84
  Const        r86, "id"
  Index        r87, r72, r86
  Equal        r88, r85, r87
  JumpIfFalse  r88, L7
  // join lt in link_type on lt.id == ml.link_type_id
  IterPrep     r89, r7
  Len          r90, r89
  Const        r91, 0
L25:
  Less         r92, r91, r90
  JumpIfFalse  r92, L7
  Index        r93, r89, r91
  Move         r94, r93
  Const        r95, "id"
  Index        r96, r94, r95
  Const        r97, "link_type_id"
  Index        r98, r83, r97
  Equal        r99, r96, r98
  JumpIfFalse  r99, L8
  Const        r100, "name"
  Index        r101, r22, r100
  // an.name.contains("a") &&
  Const        r102, "a"
  In           r103, r102, r101
  // n.name_pcode_cf >= "A" && n.name_pcode_cf <= "F" &&
  Const        r104, "name_pcode_cf"
  Index        r105, r28, r104
  Const        r106, "A"
  LessEq       r107, r106, r105
  Const        r108, "name_pcode_cf"
  Index        r109, r28, r108
  Const        r110, "F"
  LessEq       r111, r109, r110
  // t.production_year >= 1980 && t.production_year <= 1995 &&
  Const        r112, "production_year"
  Index        r113, r72, r112
  Const        r114, 1980
  LessEq       r115, r114, r113
  Const        r116, "production_year"
  Index        r117, r72, r116
  Const        r118, 1995
  LessEq       r119, r117, r118
  // it.info == "mini biography" &&
  Const        r120, "info"
  Index        r121, r50, r120
  Const        r122, "mini biography"
  Equal        r123, r121, r122
  // lt.link == "features" &&
  Const        r124, "link"
  Index        r125, r94, r124
  Const        r126, "features"
  Equal        r127, r125, r126
  // pi.note == "Volker Boehm" &&
  Const        r128, "note"
  Index        r129, r39, r128
  Const        r130, "Volker Boehm"
  Equal        r131, r129, r130
  // pi.person_id == an.person_id &&
  Const        r132, "person_id"
  Index        r133, r39, r132
  Const        r134, "person_id"
  Index        r135, r22, r134
  Equal        r136, r133, r135
  // pi.person_id == ci.person_id &&
  Const        r137, "person_id"
  Index        r138, r39, r137
  Const        r139, "person_id"
  Index        r140, r61, r139
  Equal        r141, r138, r140
  // an.person_id == ci.person_id &&
  Const        r142, "person_id"
  Index        r143, r22, r142
  Const        r144, "person_id"
  Index        r145, r61, r144
  Equal        r146, r143, r145
  // ci.movie_id == ml.linked_movie_id
  Const        r147, "movie_id"
  Index        r148, r61, r147
  Const        r149, "linked_movie_id"
  Index        r150, r83, r149
  Equal        r151, r148, r150
  // an.name.contains("a") &&
  Move         r152, r103
  JumpIfFalse  r152, L9
  Move         r152, r123
L9:
  // it.info == "mini biography" &&
  Move         r153, r152
  JumpIfFalse  r153, L10
  Move         r153, r127
L10:
  // lt.link == "features" &&
  Move         r154, r153
  JumpIfFalse  r154, L11
  Move         r154, r107
L11:
  // n.name_pcode_cf >= "A" && n.name_pcode_cf <= "F" &&
  Move         r155, r154
  JumpIfFalse  r155, L12
  Move         r155, r111
L12:
  Move         r156, r155
  JumpIfFalse  r156, L13
  // (n.gender == "m" || (n.gender == "f" && n.name.starts_with("B"))) &&
  Const        r157, "gender"
  Index        r158, r28, r157
  Const        r159, "m"
  Equal        r160, r158, r159
  Move         r161, r160
  JumpIfTrue   r161, L14
  Const        r162, "gender"
  Index        r163, r28, r162
  Const        r164, "f"
  Equal        r165, r163, r164
  Move         r166, r165
  JumpIfFalse  r166, L15
  Const        r167, "name"
  Index        r168, r28, r167
  Const        r169, "B"
  Const        r170, 0
  Const        r171, 1
  Len          r172, r168
  LessEq       r173, r171, r172
  JumpIfFalse  r173, L16
  Slice        r175, r168, r170, r171
  Equal        r176, r175, r169
  Move         r174, r176
  Jump         L17
L16:
  Const        r174, false
L17:
  Move         r166, r174
L15:
  Move         r161, r166
L14:
  // n.name_pcode_cf >= "A" && n.name_pcode_cf <= "F" &&
  Move         r156, r161
L13:
  // (n.gender == "m" || (n.gender == "f" && n.name.starts_with("B"))) &&
  Move         r177, r156
  JumpIfFalse  r177, L18
  Move         r177, r131
L18:
  // pi.note == "Volker Boehm" &&
  Move         r178, r177
  JumpIfFalse  r178, L19
  Move         r178, r115
L19:
  // t.production_year >= 1980 && t.production_year <= 1995 &&
  Move         r179, r178
  JumpIfFalse  r179, L20
  Move         r179, r119
L20:
  Move         r180, r179
  JumpIfFalse  r180, L21
  Move         r180, r136
L21:
  // pi.person_id == an.person_id &&
  Move         r181, r180
  JumpIfFalse  r181, L22
  Move         r181, r141
L22:
  // pi.person_id == ci.person_id &&
  Move         r182, r181
  JumpIfFalse  r182, L23
  Move         r182, r146
L23:
  // an.person_id == ci.person_id &&
  Move         r183, r182
  JumpIfFalse  r183, L24
  Move         r183, r151
L24:
  // where (
  JumpIfFalse  r183, L8
  // select { person_name: n.name, movie_title: t.title }
  Const        r184, "person_name"
  Const        r185, "name"
  Index        r186, r28, r185
  Const        r187, "movie_title"
  Const        r188, "title"
  Index        r189, r72, r188
  Move         r190, r184
  Move         r191, r186
  Move         r192, r187
  Move         r193, r189
  MakeMap      r194, 2, r190
  // from an in aka_name
  Append       r195, r16, r194
  Move         r16, r195
L8:
  // join lt in link_type on lt.id == ml.link_type_id
  Const        r196, 1
  Add          r197, r91, r196
  Move         r91, r197
  Jump         L25
L7:
  // join ml in movie_link on ml.linked_movie_id == t.id
  Const        r198, 1
  Add          r199, r80, r198
  Move         r80, r199
  Jump         L26
L6:
  // join t in title on t.id == ci.movie_id
  Const        r200, 1
  Add          r201, r69, r200
  Move         r69, r201
  Jump         L27
L5:
  // join ci in cast_info on ci.person_id == n.id
  Const        r202, 1
  Add          r203, r58, r202
  Move         r58, r203
  Jump         L28
L4:
  // join it in info_type on it.id == pi.info_type_id
  Const        r204, 1
  Add          r205, r47, r204
  Move         r47, r205
  Jump         L29
L3:
  // join pi in person_info on pi.person_id == an.person_id
  Const        r206, 1
  Add          r207, r36, r206
  Move         r36, r207
  Jump         L30
L2:
  // join n in name on n.id == an.person_id
  Const        r208, 1
  Add          r209, r25, r208
  Move         r25, r209
  Jump         L31
L1:
  // from an in aka_name
  Const        r210, 1
  Add          r211, r19, r210
  Move         r19, r211
  Jump         L32
L0:
  // let rows =
  Move         r212, r16
  // of_person: min(from r in rows select r.person_name),
  Const        r213, "of_person"
  Const        r214, []
  IterPrep     r215, r212
  Len          r216, r215
  Const        r217, 0
L34:
  Less         r218, r217, r216
  JumpIfFalse  r218, L33
  Index        r219, r215, r217
  Move         r220, r219
  Const        r221, "person_name"
  Index        r222, r220, r221
  Append       r223, r214, r222
  Move         r214, r223
  Const        r224, 1
  Add          r225, r217, r224
  Move         r217, r225
  Jump         L34
L33:
  Min          r226, r214
  // biography_movie: min(from r in rows select r.movie_title)
  Const        r227, "biography_movie"
  Const        r228, []
  IterPrep     r229, r212
  Len          r230, r229
  Const        r231, 0
L36:
  Less         r232, r231, r230
  JumpIfFalse  r232, L35
  Index        r233, r229, r231
  Move         r220, r233
  Const        r234, "movie_title"
  Index        r235, r220, r234
  Append       r236, r228, r235
  Move         r228, r236
  Const        r237, 1
  Add          r238, r231, r237
  Move         r231, r238
  Jump         L36
L35:
  Min          r239, r228
  // of_person: min(from r in rows select r.person_name),
  Move         r240, r213
  Move         r241, r226
  // biography_movie: min(from r in rows select r.movie_title)
  Move         r242, r227
  Move         r243, r239
  // {
  MakeMap      r244, 2, r240
  Move         r245, r244
  // let result = [
  MakeList     r246, 1, r245
  Move         r247, r246
  // json(result)
  JSON         r247
  // expect result == [
  Const        r248, [{"biography_movie": "Feature Film", "of_person": "Alan Brown"}]
  Equal        r249, r247, r248
  Expect       r249
  Return       r0
