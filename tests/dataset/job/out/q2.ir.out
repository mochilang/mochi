func main (regs=15)
  // let company_name = [
  Const        r0, [{"country_code": "[de]", "id": 1}, {"country_code": "[us]", "id": 2}]
L8:
  // let keyword = [
  Const        r1, [{"id": 1, "keyword": "character-name-in-title"}, {"id": 2, "keyword": "other"}]
L11:
  // let movie_companies = [
  Const        r2, [{"company_id": 1, "movie_id": 100}, {"company_id": 2, "movie_id": 200}]
L9:
  // let movie_keyword = [
  Const        r3, [{"keyword_id": 1, "movie_id": 100}, {"keyword_id": 2, "movie_id": 200}]
L10:
  // let title = [
  Const        r4, [{"id": 100, "title": "Der Film"}, {"id": 200, "title": "Other Movie"}]
L7:
  // from cn in company_name
  Const        r5, []
L5:
  // where cn.country_code == "[de]" &&
  Const        r6, "country_code"
L4:
  // k.keyword == "character-name-in-title" &&
  Const        r7, "keyword"
  // mc.movie_id == mk.movie_id
  Const        r8, "movie_id"
  Const        r9, "movie_id"
L6:
  // select t.title
  Const        r6, "title"
L12:
  // from cn in company_name
  IterPrep     r7, r0
  Len          r8, r7
  Const        r9, 0
  LessInt      r6, r9, r8
  JumpIfFalse  r6, L0
  Index        r8, r7, r9
  // join mc in movie_companies on mc.company_id == cn.id
  IterPrep     r6, r2
  Len          r7, r6
  Const        r2, "company_id"
  Const        r2, "id"
  // where cn.country_code == "[de]" &&
  Const        r2, "country_code"
  // k.keyword == "character-name-in-title" &&
  Const        r2, "keyword"
  // mc.movie_id == mk.movie_id
  Const        r2, "movie_id"
  Const        r2, "movie_id"
  // select t.title
  Const        r2, "title"
  // join mc in movie_companies on mc.company_id == cn.id
  Const        r2, 0
  LessInt      r10, r2, r7
  JumpIfFalse  r10, L1
  Index        r7, r6, r2
  Const        r10, "company_id"
  Index        r6, r7, r10
  Const        r10, "id"
  Index        r11, r8, r10
  Equal        r10, r6, r11
  JumpIfFalse  r10, L2
  // join t in title on mc.movie_id == t.id
  IterPrep     r6, r4
  Len          r11, r6
  Const        r10, "movie_id"
  Const        r4, "id"
  // where cn.country_code == "[de]" &&
  Const        r10, "country_code"
  // k.keyword == "character-name-in-title" &&
  Const        r4, "keyword"
  // mc.movie_id == mk.movie_id
  Const        r10, "movie_id"
  Const        r4, "movie_id"
  // select t.title
  Const        r10, "title"
  // join t in title on mc.movie_id == t.id
  Const        r4, 0
  LessInt      r10, r4, r11
  JumpIfFalse  r10, L2
  Index        r11, r6, r4
  Const        r10, "movie_id"
  Index        r6, r7, r10
  Const        r10, "id"
  Index        r12, r11, r10
  Equal        r10, r6, r12
  JumpIfFalse  r10, L3
  // join mk in movie_keyword on mk.movie_id == t.id
  IterPrep     r6, r3
  Len          r12, r6
  Const        r10, "movie_id"
  Const        r3, "id"
  // where cn.country_code == "[de]" &&
  Const        r10, "country_code"
  // k.keyword == "character-name-in-title" &&
  Const        r3, "keyword"
  // mc.movie_id == mk.movie_id
  Const        r10, "movie_id"
  Const        r3, "movie_id"
  // select t.title
  Const        r10, "title"
  // join mk in movie_keyword on mk.movie_id == t.id
  Const        r3, 0
  LessInt      r10, r3, r12
  JumpIfFalse  r10, L3
  Index        r12, r6, r3
  Const        r10, "movie_id"
  Index        r6, r12, r10
  Const        r10, "id"
  Index        r13, r11, r10
  Equal        r10, r6, r13
  JumpIfFalse  r10, L4
  // join k in keyword on mk.keyword_id == k.id
  IterPrep     r6, r1
  Len          r13, r6
  Const        r10, "keyword_id"
  Const        r1, "id"
  // where cn.country_code == "[de]" &&
  Const        r10, "country_code"
  // k.keyword == "character-name-in-title" &&
  Const        r1, "keyword"
  // mc.movie_id == mk.movie_id
  Const        r10, "movie_id"
  Const        r1, "movie_id"
  // select t.title
  Const        r10, "title"
  // join k in keyword on mk.keyword_id == k.id
  Const        r1, 0
  LessInt      r10, r1, r13
  JumpIfFalse  r10, L4
  Index        r13, r6, r1
  Const        r10, "keyword_id"
  Index        r6, r12, r10
  Const        r10, "id"
  Index        r14, r13, r10
  Equal        r10, r6, r14
  JumpIfFalse  r10, L5
  // where cn.country_code == "[de]" &&
  Const        r6, "country_code"
  Index        r14, r8, r6
  Const        r10, "[de]"
  Equal        r8, r14, r10
  // k.keyword == "character-name-in-title" &&
  Const        r6, "keyword"
  Index        r14, r13, r6
  Const        r10, "character-name-in-title"
  Equal        r13, r14, r10
  // mc.movie_id == mk.movie_id
  Const        r6, "movie_id"
  Index        r14, r7, r6
  Const        r10, "movie_id"
  Index        r7, r12, r10
  Equal        r6, r14, r7
  // where cn.country_code == "[de]" &&
  Move         r12, r8
  JumpIfFalse  r12, L6
  // k.keyword == "character-name-in-title" &&
  Move         r10, r13
  JumpIfFalse  r10, L7
  Move         r10, r6
  // where cn.country_code == "[de]" &&
  JumpIfFalse  r10, L5
  // select t.title
  Const        r14, "title"
  Index        r7, r11, r14
  // from cn in company_name
  Append       r5, r5, r7
  // join k in keyword on mk.keyword_id == k.id
  Const        r8, 1
  Add          r1, r1, r8
  Jump         L8
  // join mk in movie_keyword on mk.movie_id == t.id
  Const        r12, 1
  Add          r3, r3, r12
  Jump         L9
L3:
  // join t in title on mc.movie_id == t.id
  Const        r13, 1
  Add          r4, r4, r13
  Jump         L10
L2:
  // join mc in movie_companies on mc.company_id == cn.id
  Const        r6, 1
  Add          r2, r2, r6
  Jump         L11
L1:
  // from cn in company_name
  Const        r10, 1
  AddInt       r9, r9, r10
  Jump         L12
L0:
  // let result = min(titles)
  Min          r14, r5
  // json(result)
  JSON         r14
  // expect result == "Der Film"
  Const        r7, "Der Film"
  Equal        r1, r14, r7
  Expect       r1
  Return       r0
