# Generated by Mochi compiler v0.10.25 on 2025-07-13T11:54:51Z
require 'ostruct'

def _json(v)
  require 'json'
  obj = v
  if v.is_a?(Array)
    obj = v.map { |it| it.respond_to?(:to_h) ? it.to_h : it }
  elsif v.respond_to?(:to_h)
    obj = v.to_h
  end
  puts(JSON.generate(obj))
end
def _min(v)
  list = nil
  if v.respond_to?(:Items)
    list = v.Items
  elsif v.is_a?(Array)
    list = v
  elsif v.respond_to?(:to_a)
    list = v.to_a
  end
  return 0 if !list || list.empty?
  list.min
end

$company_type = [OpenStruct.new(ct_id: 1, kind: "production companies"), OpenStruct.new(ct_id: 2, kind: "other")]
$info_type = [OpenStruct.new(it_id: 10, info: "languages")]
$title = [OpenStruct.new(t_id: 100, title: "B Movie", production_year: 2010), OpenStruct.new(t_id: 200, title: "A Film", production_year: 2012), OpenStruct.new(t_id: 300, title: "Old Movie", production_year: 2000)]
$movie_companies = [OpenStruct.new(movie_id: 100, company_type_id: 1, note: "ACME (France) (theatrical)"), OpenStruct.new(movie_id: 200, company_type_id: 1, note: "ACME (France) (theatrical)"), OpenStruct.new(movie_id: 300, company_type_id: 1, note: "ACME (France) (theatrical)")]
$movie_info = [OpenStruct.new(movie_id: 100, info: "German", info_type_id: 10), OpenStruct.new(movie_id: 200, info: "Swedish", info_type_id: 10), OpenStruct.new(movie_id: 300, info: "German", info_type_id: 10)]
$candidate_titles = (begin
	_res = []
	for ct in $company_type
		for mc in $movie_companies
			if (mc.company_type_id == ct.ct_id)
				for mi in $movie_info
					if (mi.movie_id == mc.movie_id)
						for it in $info_type
							if (it.it_id == mi.info_type_id)
								for t in $title
									if (t.t_id == mc.movie_id)
										if (((((ct.kind == "production companies") && (mc.note.include?("(theatrical)"))) && (mc.note.include?("(France)"))) && (t.production_year > 2005)) && ((["Sweden", "Norway", "Germany", "Denmark", "Swedish", "Denish", "Norwegian", "German"].include?(mi.info))))
											_res << t.title
										end
									end
								end
							end
						end
					end
				end
			end
		end
	end
	_res
end)
$result = [OpenStruct.new(typical_european_movie: _min($candidate_titles))]
_json($result)
raise "expect failed" unless ($result == [OpenStruct.new(typical_european_movie: "A Film")])
