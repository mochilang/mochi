" Generated by Mochi compiler v0.10.25 on 2025-07-13T14:24:44Z
"
| aka_name cast_info company_name movie_companies name role_type title eligible result |
aka_name := {Dictionary from:{'person_id'->1. 'name'->'Y. S.'}}.
cast_info := {Dictionary from:{'person_id'->1. 'movie_id'->10. 'note'->'(voice: English version)'. 'role_id'->1000}}.
company_name := {Dictionary from:{'id'->50. 'country_code'->'[jp]'}}.
movie_companies := {Dictionary from:{'movie_id'->10. 'company_id'->50. 'note'->'Studio (Japan)'}}.
name := {Dictionary from:{'id'->1. name->'Yoko Ono'}. Dictionary from:{'id'->2. name->'Yuichi'}}.
role_type := {Dictionary from:{'id'->1000. 'role'->'actress'}}.
title := {Dictionary from:{'id'->10. title->'Dubbed Film'}}.
eligible := [ | tmp |
  tmp := OrderedCollection new.
  aka_name do: [:an1 |
    name do: [:n1 |
      cast_info do: [:ci |
        title do: [:t |
          movie_companies do: [:mc |
            company_name do: [:cn |
              role_type do: [:rt |
                (((((((((((((((((((((ci at: 'note') = ('(voice: English version)'))) and: [(((cn at: 'country_code') = '[jp]'))])) and: [((mc at: 'note' at: 'contains') value: '(Japan)')])) and: [((mc at: 'note' at: 'contains') value: '(USA)' not)])) and: [((n1 at: 'name' at: 'contains') value: 'Yo')])) and: [((n1 at: 'name' at: 'contains') value: 'Yu' not)])) and: [(((rt at: 'role') = 'actress'))]) and: [(n1.id = an1.person_id)]) and: [(ci.person_id = an1.person_id)]) and: [(t.id = ci.movie_id)]) and: [(mc.movie_id = ci.movie_id)]) and: [(cn.id = mc.company_id)]) and: [(rt.id = ci.role_id)])) ifTrue: [
                  tmp add: Dictionary from:{'pseudonym'->an1 at: 'name'. 'movie_title'->t at: 'title'}.
                ].
              ].
            ].
          ].
        ].
      ].
    ].
  ].
  tmp
] value.
result := {Dictionary from:{'actress_pseudonym'->([ | tmp |
  tmp := OrderedCollection new.
  eligible do: [:x |
    tmp add: x at: 'pseudonym'.
  ].
  tmp
] value min). 'japanese_movie_dubbed'->([ | tmp |
  tmp := OrderedCollection new.
  eligible do: [:x |
    tmp add: x at: 'movie_title'.
  ].
  tmp
] value min)}}.
json value: result.
((result = ({Dictionary from:{'actress_pseudonym'->'Y. S.'. 'japanese_movie_dubbed'->'Dubbed Film'}}))) ifTrue: [Transcript show:'ok'; cr] ifFalse: [Transcript show:'fail'; cr].
