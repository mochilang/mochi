" Generated by Mochi compiler v0.10.25 on 2025-07-13T14:24:44Z
"
| cast_info keyword movie_keyword name title result |
cast_info := {Dictionary from:{'movie_id'->1. 'person_id'->101}. Dictionary from:{'movie_id'->2. 'person_id'->102}}.
keyword := {Dictionary from:{'id'->100. keyword->'marvel-cinematic-universe'}. Dictionary from:{'id'->200. keyword->'other'}}.
movie_keyword := {Dictionary from:{'movie_id'->1. 'keyword_id'->100}. Dictionary from:{'movie_id'->2. 'keyword_id'->200}}.
name := {Dictionary from:{'id'->101. name->'Downey Robert Jr.'}. Dictionary from:{'id'->102. name->'Chris Evans'}}.
title := {Dictionary from:{'id'->1. title->'Iron Man 3'. 'production_year'->2013}. Dictionary from:{'id'->2. title->'Old Movie'. 'production_year'->2000}}.
result := [ | tmp |
  tmp := OrderedCollection new.
  cast_info do: [:ci |
    movie_keyword do: [:mk |
      keyword do: [:k |
        name do: [:n |
          title do: [:t |
            (((((((((((((k at: 'keyword') = 'marvel-cinematic-universe')) and: [((n at: 'name' at: 'contains') value: 'Downey')])) and: [((n at: 'name' at: 'contains') value: 'Robert')])) and: [(((t at: 'production_year') > 2010))]) and: [(ci.movie_id = mk.movie_id)]) and: [(mk.keyword_id = k.id)]) and: [(ci.person_id = n.id)]) and: [(ci.movie_id = t.id)])) ifTrue: [
              tmp add: Dictionary from:{movie_keyword->k at: 'keyword'. 'actor_name'->n at: 'name'. 'marvel_movie'->t at: 'title'}.
            ].
          ].
        ].
      ].
    ].
  ].
  tmp
] value.
json value: result.
((result = ({Dictionary from:{movie_keyword->'marvel-cinematic-universe'. 'actor_name'->'Downey Robert Jr.'. 'marvel_movie'->'Iron Man 3'}}))) ifTrue: [Transcript show:'ok'; cr] ifFalse: [Transcript show:'fail'; cr].
