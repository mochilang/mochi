# Generated by Mochi compiler v0.10.27 on 2025-07-17T17:45:34Z
from __future__ import annotations
import dataclasses
import json


@dataclasses.dataclass
class Auto1:
    voiced_char: str
    voicing_actress: str
    voiced_animation: str

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto10:
    movie_id: int
    company_id: int

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto11:
    movie_id: int
    info_type_id: int
    info: str

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto12:
    movie_id: int
    keyword_id: int

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto13:
    id: int
    name: str
    gender: str

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto14:
    person_id: int
    info_type_id: int

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto15:
    id: int
    role: str

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto16:
    id: int
    title: str
    production_year: int

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto2:
    person_id: int

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto3:
    movie_id: int
    subject_id: int
    status_id: int

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto4:
    id: int
    kind: str

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto5:
    id: int
    name: str

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto6:
    movie_id: int
    person_id: int
    role_id: int
    person_role_id: int
    note: str

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto7:
    id: int
    country_code: str

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto8:
    id: int
    info: str

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


@dataclasses.dataclass
class Auto9:
    id: int
    keyword: str

    def __getitem__(self, key):
        return getattr(self, key)

    def __contains__(self, key):
        return hasattr(self, key)


from typing import Any, TypeVar, Generic, Callable

T = TypeVar("T")
K = TypeVar("K")
UNDEFINED = object()


def _min(v):
    if hasattr(v, "Items"):
        v = v.Items
    if not isinstance(v, list):
        raise Exception("min() expects list or group")
    vals = [it for it in v if it is not None]
    if not vals:
        return 0
    return min(vals)


def test_Q29_finds_the_actress_voicing_the_Queen_in_Shrek_2():
    assert result == [
        Auto1(
            voiced_char="Queen",
            voicing_actress="Angela Aniston",
            voiced_animation="Shrek 2",
        )
    ]


aka_name = [Auto2(person_id=1), Auto2(person_id=2)]
complete_cast = [
    Auto3(movie_id=1, subject_id=1, status_id=2),
    Auto3(movie_id=2, subject_id=1, status_id=2),
]
comp_cast_type = [
    Auto4(id=1, kind="cast"),
    Auto4(id=2, kind="complete+verified"),
    Auto4(id=3, kind="other"),
]
char_name = [Auto5(id=1, name="Queen"), Auto5(id=2, name="Princess")]
cast_info = [
    Auto6(movie_id=1, person_id=1, role_id=1, person_role_id=1, note="(voice)"),
    Auto6(movie_id=2, person_id=2, role_id=1, person_role_id=2, note="(voice)"),
]
company_name = [Auto7(id=1, country_code="[us]"), Auto7(id=2, country_code="[uk]")]
info_type = [
    Auto8(id=1, info="release dates"),
    Auto8(id=2, info="trivia"),
    Auto8(id=3, info="other"),
]
keyword = [Auto9(id=1, keyword="computer-animation"), Auto9(id=2, keyword="action")]
movie_companies = [Auto10(movie_id=1, company_id=1), Auto10(movie_id=2, company_id=2)]
movie_info = [
    Auto11(movie_id=1, info_type_id=1, info="USA:2004"),
    Auto11(movie_id=2, info_type_id=1, info="USA:1995"),
]
movie_keyword = [Auto12(movie_id=1, keyword_id=1), Auto12(movie_id=2, keyword_id=2)]
name = [
    Auto13(id=1, name="Angela Aniston", gender="f"),
    Auto13(id=2, name="Bob Brown", gender="m"),
]
person_info = [Auto14(person_id=1, info_type_id=2), Auto14(person_id=2, info_type_id=2)]
role_type = [Auto15(id=1, role="actress"), Auto15(id=2, role="actor")]
title = [
    Auto16(id=1, title="Shrek 2", production_year=2004),
    Auto16(id=2, title="Old Film", production_year=1999),
]
matches = [
    Auto1(
        voiced_char=chn["name"], voicing_actress=n["name"], voiced_animation=t["title"]
    )
    for an in aka_name
    for cc in complete_cast
    for cct1 in comp_cast_type
    for cct2 in comp_cast_type
    for chn in char_name
    for ci in cast_info
    for cn in company_name
    for it in info_type
    for it3 in info_type
    for k in keyword
    for mc in movie_companies
    for mi in movie_info
    for mk in movie_keyword
    for n in name
    for pi in person_info
    for rt in role_type
    for t in title
    if (
        (
            (
                (
                    (
                        (
                            (
                                (
                                    (
                                        (
                                            (
                                                (
                                                    (
                                                        (
                                                            (
                                                                (
                                                                    (
                                                                        (
                                                                            (
                                                                                (
                                                                                    (
                                                                                        (
                                                                                            (
                                                                                                (
                                                                                                    (
                                                                                                        (
                                                                                                            (
                                                                                                                (
                                                                                                                    (
                                                                                                                        (
                                                                                                                            (
                                                                                                                                (
                                                                                                                                    (
                                                                                                                                        (
                                                                                                                                            (
                                                                                                                                                (
                                                                                                                                                    (
                                                                                                                                                        (
                                                                                                                                                            (
                                                                                                                                                                (
                                                                                                                                                                    (
                                                                                                                                                                        cct1[
                                                                                                                                                                            "kind"
                                                                                                                                                                        ]
                                                                                                                                                                        == "cast"
                                                                                                                                                                        and cct2[
                                                                                                                                                                            "kind"
                                                                                                                                                                        ]
                                                                                                                                                                        == "complete+verified"
                                                                                                                                                                    )
                                                                                                                                                                    and chn[
                                                                                                                                                                        "name"
                                                                                                                                                                    ]
                                                                                                                                                                    == "Queen"
                                                                                                                                                                )
                                                                                                                                                                and (
                                                                                                                                                                    (
                                                                                                                                                                        ci[
                                                                                                                                                                            "note"
                                                                                                                                                                        ]
                                                                                                                                                                        == "(voice)"
                                                                                                                                                                        or ci[
                                                                                                                                                                            "note"
                                                                                                                                                                        ]
                                                                                                                                                                        == "(voice) (uncredited)"
                                                                                                                                                                    )
                                                                                                                                                                    or ci[
                                                                                                                                                                        "note"
                                                                                                                                                                    ]
                                                                                                                                                                    == "(voice: English version)"
                                                                                                                                                                )
                                                                                                                                                            )
                                                                                                                                                            and cn[
                                                                                                                                                                "country_code"
                                                                                                                                                            ]
                                                                                                                                                            == "[us]"
                                                                                                                                                        )
                                                                                                                                                        and it[
                                                                                                                                                            "info"
                                                                                                                                                        ]
                                                                                                                                                        == "release dates"
                                                                                                                                                    )
                                                                                                                                                    and it3[
                                                                                                                                                        "info"
                                                                                                                                                    ]
                                                                                                                                                    == "trivia"
                                                                                                                                                )
                                                                                                                                                and k[
                                                                                                                                                    "keyword"
                                                                                                                                                ]
                                                                                                                                                == "computer-animation"
                                                                                                                                            )
                                                                                                                                            and (
                                                                                                                                                str(
                                                                                                                                                    mi[
                                                                                                                                                        "info"
                                                                                                                                                    ]
                                                                                                                                                ).startswith(
                                                                                                                                                    "Japan:200"
                                                                                                                                                )
                                                                                                                                                or str(
                                                                                                                                                    mi[
                                                                                                                                                        "info"
                                                                                                                                                    ]
                                                                                                                                                ).startswith(
                                                                                                                                                    "USA:200"
                                                                                                                                                )
                                                                                                                                            )
                                                                                                                                        )
                                                                                                                                        and n[
                                                                                                                                            "gender"
                                                                                                                                        ]
                                                                                                                                        == "f"
                                                                                                                                    )
                                                                                                                                    and "An"
                                                                                                                                    in n[
                                                                                                                                        "name"
                                                                                                                                    ]
                                                                                                                                )
                                                                                                                                and rt[
                                                                                                                                    "role"
                                                                                                                                ]
                                                                                                                                == "actress"
                                                                                                                            )
                                                                                                                            and t[
                                                                                                                                "title"
                                                                                                                            ]
                                                                                                                            == "Shrek 2"
                                                                                                                        )
                                                                                                                        and t[
                                                                                                                            "production_year"
                                                                                                                        ]
                                                                                                                        >= 2000
                                                                                                                    )
                                                                                                                    and t[
                                                                                                                        "production_year"
                                                                                                                    ]
                                                                                                                    <= 2010
                                                                                                                )
                                                                                                                and t[
                                                                                                                    "id"
                                                                                                                ]
                                                                                                                == mi[
                                                                                                                    "movie_id"
                                                                                                                ]
                                                                                                            )
                                                                                                            and t[
                                                                                                                "id"
                                                                                                            ]
                                                                                                            == mc[
                                                                                                                "movie_id"
                                                                                                            ]
                                                                                                        )
                                                                                                        and t[
                                                                                                            "id"
                                                                                                        ]
                                                                                                        == ci[
                                                                                                            "movie_id"
                                                                                                        ]
                                                                                                    )
                                                                                                    and t[
                                                                                                        "id"
                                                                                                    ]
                                                                                                    == mk[
                                                                                                        "movie_id"
                                                                                                    ]
                                                                                                )
                                                                                                and t[
                                                                                                    "id"
                                                                                                ]
                                                                                                == cc[
                                                                                                    "movie_id"
                                                                                                ]
                                                                                            )
                                                                                            and mc[
                                                                                                "movie_id"
                                                                                            ]
                                                                                            == ci[
                                                                                                "movie_id"
                                                                                            ]
                                                                                        )
                                                                                        and mc[
                                                                                            "movie_id"
                                                                                        ]
                                                                                        == mi[
                                                                                            "movie_id"
                                                                                        ]
                                                                                    )
                                                                                    and mc[
                                                                                        "movie_id"
                                                                                    ]
                                                                                    == mk[
                                                                                        "movie_id"
                                                                                    ]
                                                                                )
                                                                                and mc[
                                                                                    "movie_id"
                                                                                ]
                                                                                == cc[
                                                                                    "movie_id"
                                                                                ]
                                                                            )
                                                                            and mi[
                                                                                "movie_id"
                                                                            ]
                                                                            == ci[
                                                                                "movie_id"
                                                                            ]
                                                                        )
                                                                        and mi[
                                                                            "movie_id"
                                                                        ]
                                                                        == mk[
                                                                            "movie_id"
                                                                        ]
                                                                    )
                                                                    and mi["movie_id"]
                                                                    == cc["movie_id"]
                                                                )
                                                                and ci["movie_id"]
                                                                == mk["movie_id"]
                                                            )
                                                            and ci["movie_id"]
                                                            == cc["movie_id"]
                                                        )
                                                        and mk["movie_id"]
                                                        == cc["movie_id"]
                                                    )
                                                    and cn["id"] == mc["company_id"]
                                                )
                                                and it["id"] == mi["info_type_id"]
                                            )
                                            and n["id"] == ci["person_id"]
                                        )
                                        and rt["id"] == ci["role_id"]
                                    )
                                    and n["id"] == an["person_id"]
                                )
                                and ci["person_id"] == an["person_id"]
                            )
                            and chn["id"] == ci["person_role_id"]
                        )
                        and n["id"] == pi["person_id"]
                    )
                    and ci["person_id"] == pi["person_id"]
                )
                and it3["id"] == pi["info_type_id"]
            )
            and k["id"] == mk["keyword_id"]
        )
        and cct1["id"] == cc["subject_id"]
    )
    and cct2["id"] == cc["status_id"]
]
result = [
    Auto1(
        voiced_char=_min([x.voiced_char for x in matches]),
        voicing_actress=_min([x.voicing_actress for x in matches]),
        voiced_animation=_min([x.voiced_animation for x in matches]),
    )
]
print(json.dumps(result, separators=(",", ":"), default=lambda o: vars(o)))
test_Q29_finds_the_actress_voicing_the_Queen_in_Shrek_2()
