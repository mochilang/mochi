// Generated by Mochi compiler v0.10.28 on 2025-07-18T03:32:19Z
import 'dart:io';
import 'dart:convert';

bool _in(dynamic item, dynamic col) {
  if (col is Map) return col.containsKey(item);
  if (col is Iterable || col is String) return col.contains(item);
  return false;
}

var customer = [
  {'c_custkey': 1},
  {'c_custkey': 2},
  {'c_custkey': 3},
];

var orders = [
  {
  'o_orderkey': 100,
  'o_custkey': 1,
  'o_comment': 'fast delivery',
},
  {
  'o_orderkey': 101,
  'o_custkey': 1,
  'o_comment': 'no comment',
},
  {
  'o_orderkey': 102,
  'o_custkey': 2,
  'o_comment': 'special requests only',
},
];

var per_customer = (() {
  var _q0 = <dynamic>[];
  for (var c in customer) {
    _q0.add({
  'c_count': (() {
  var _q1 = <dynamic>[];
  for (var o in orders) {
    if (!(((o['o_custkey'] == c['c_custkey'] && (!(_in('special', o['o_comment']))) && (!(_in('requests', o['o_comment']))))) ?? false)) continue;
    _q1.add(o);
  }
  return _q1;
})().length,
});
  }
  return _q0;
})();

var grouped = (() {
  var _q2 = <dynamic>[];
  var _g3 = <String, List<dynamic>>{};
  for (var x in per_customer) {
    var _k4 = x['c_count'];
    var _k4_s = jsonEncode(_k4);
    _g3.putIfAbsent(_k4_s, () => <dynamic>[]).add(x);
  }
  for (var entry in _g3.entries) {
    var g = entry.value;
    var _k4 = jsonDecode(entry.key);
    _q2.add([-(_k4 as num), {'c_count': _k4, 'custdist': g.length}]);
  }
  _q2.sort((a,b) => (a[0] as Comparable).compareTo(b[0]));
  _q2 = [for (var x in _q2) x[1]];
  return _q2;
})();

void main() {
  print(jsonEncode(grouped));
}
