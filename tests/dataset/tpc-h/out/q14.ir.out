func main (regs=103)
  // let part = [
  Const        r0, [{"p_partkey": 1, "p_type": "PROMO LUXURY"}, {"p_partkey": 2, "p_type": "STANDARD BRASS"}]
  Move         r1, r0
  // let lineitem = [
  Const        r2, [{"l_discount": 0.1, "l_extendedprice": 1000, "l_partkey": 1, "l_shipdate": "1995-09-05"}, {"l_discount": 0, "l_extendedprice": 800, "l_partkey": 2, "l_shipdate": "1995-09-20"}, {"l_discount": 0.2, "l_extendedprice": 500, "l_partkey": 1, "l_shipdate": "1995-10-02"}]
  // let start_date = "1995-09-01"
  Const        r4, "1995-09-01"
  // let end_date = "1995-10-01"
  Const        r6, "1995-10-01"
  // from l in lineitem
  IterPrep     r9, r2
  Len          r10, r9
  // join p in part on p.p_partkey == l.l_partkey
  IterPrep     r11, r1
  Len          r12, r11
  // from l in lineitem
  Const        r13, 0
  Less         r14, r13, r10
  JumpIfFalse  r14, L0
  Index        r15, r9, r13
L5:
  // join p in part on p.p_partkey == l.l_partkey
  Const        r17, 0
  Less         r18, r17, r12
  JumpIfFalse  r18, L1
  Index        r19, r11, r17
  Const        r21, "p_partkey"
L4:
  Index        r22, r19, r21
  Const        r23, "l_partkey"
  Index        r24, r15, r23
  Equal        r25, r22, r24
  JumpIfFalse  r25, L2
  // where l.l_shipdate >= start_date && l.l_shipdate < end_date
  Const        r26, "l_shipdate"
  Index        r27, r15, r26
  LessEq       r28, r4, r27
  Const        r29, "l_shipdate"
  Index        r30, r15, r29
  Less         r31, r30, r6
  JumpIfFalse  r28, L3
  JumpIfFalse  r31, L2
L3:
  // join p in part on p.p_partkey == l.l_partkey
  Jump         L4
  // from l in lineitem
  Jump         L5
  // let promo_sum = sum(from x in filtered where x.is_promo select x.revenue)
  IterPrep     r58, r51
  Len          r59, r58
  Const        r60, 0
  Less         r61, r60, r59
L2:
  JumpIfFalse  r61, L6
L1:
  Index        r62, r58, r60
  Const        r64, "is_promo"
  Index        r65, r62, r64
  JumpIfFalse  r65, L6
L0:
  Jump         L0
  // let total_sum = sum(from x in filtered select x.revenue)
  IterPrep     r74, r51
  Len          r75, r74
  Const        r76, 0
  Less         r77, r76, r75
  JumpIfFalse  r77, L7
  Jump         L8
L6:
  Const        r84, 0
  // let result = 100.0 * promo_sum / total_sum
  Const        r86, 100
  MulFloat     r87, r86, r72
L8:
  DivFloat     r88, r87, r84
  // json(result)
  JSON         r88
  // let expected = 100.0 * promo / total  // â‰ˆ 52.94
  Const        r100, 52.94117647058823
  // expect result == expected
  EqualFloat   r102, r88, r100
  Expect       r102
  Return       r0
