func main (regs=112)
  // let orders = [
  Const        r0, [{"o_orderdate": "1993-07-01", "o_orderkey": 1, "o_orderpriority": "1-URGENT"}, {"o_orderdate": "1993-07-15", "o_orderkey": 2, "o_orderpriority": "2-HIGH"}, {"o_orderdate": "1993-08-01", "o_orderkey": 3, "o_orderpriority": "3-NORMAL"}]
  Move         r1, r0
  // let lineitem = [
  Const        r2, [{"l_commitdate": "1993-07-10", "l_orderkey": 1, "l_receiptdate": "1993-07-12"}, {"l_commitdate": "1993-07-12", "l_orderkey": 1, "l_receiptdate": "1993-07-10"}, {"l_commitdate": "1993-07-20", "l_orderkey": 2, "l_receiptdate": "1993-07-25"}, {"l_commitdate": "1993-08-02", "l_orderkey": 3, "l_receiptdate": "1993-08-01"}, {"l_commitdate": "1993-08-05", "l_orderkey": 3, "l_receiptdate": "1993-08-10"}]
  // let start_date = "1993-07-01"
  Const        r4, "1993-07-01"
  // let end_date = "1993-08-01"
  Const        r6, "1993-08-01"
  // from o in orders
  IterPrep     r9, r1
  Len          r10, r9
  Const        r11, 0
  Less         r12, r11, r10
  JumpIfFalse  r12, L0
  Index        r13, r9, r11
L3:
  Move         r14, r13
  // where o.o_orderdate >= start_date && o.o_orderdate < end_date
  Const        r15, "o_orderdate"
  Index        r16, r14, r15
  LessEq       r17, r4, r16
  Const        r18, "o_orderdate"
  Index        r19, r14, r18
  Less         r20, r19, r6
  JumpIfFalse  r17, L1
  JumpIfFalse  r20, L2
  // from o in orders
  Jump         L3
L1:
  // from o in date_filtered_orders
  IterPrep     r27, r22
  Len          r28, r27
  Const        r29, 0
L2:
  Less         r30, r29, r28
  JumpIfFalse  r30, L4
  Index        r31, r27, r29
L0:
  // from l in lineitem
  IterPrep     r33, r2
  Len          r34, r33
  Const        r35, 0
  Less         r36, r35, r34
  JumpIfFalse  r36, L5
  Index        r37, r33, r35
  // where l.l_orderkey == o.o_orderkey && l.l_commitdate < l.l_receiptdate
  Const        r39, "l_orderkey"
  Index        r40, r37, r39
  Const        r41, "l_commitdate"
  Index        r42, r37, r41
  Const        r43, "l_receiptdate"
  Index        r44, r37, r43
L8:
  Less         r45, r42, r44
  Const        r46, "o_orderkey"
  Index        r47, r31, r46
  Equal        r48, r40, r47
  JumpIfFalse  r48, L6
  JumpIfFalse  r45, L7
  // from l in lineitem
  Jump         L8
L10:
  // where exists(
  Exists       r53, r50
  JumpIfFalse  r53, L9
  // from o in date_filtered_orders
  Jump         L10
  // from o in late_orders
  IterPrep     r59, r26
L6:
  Len          r60, r59
  Const        r61, 0
L7:
  MakeMap      r62, 0, r0
  Less         r64, r61, r60
L5:
  JumpIfFalse  r64, L11
  Index        r65, r59, r61
  // group by o.o_orderpriority into g
  Const        r66, "o_orderpriority"
L9:
  Index        r67, r65, r66
  Str          r68, r67
  In           r69, r68, r62
  JumpIfTrue   r69, L11
L4:
  // from o in late_orders
  Const        r71, "__group__"
  Const        r72, true
  Const        r73, "key"
  // group by o.o_orderpriority into g
  Move         r74, r67
  // from o in late_orders
  MakeMap      r77, 2, r71
  SetIndex     r62, r68, r77
L12:
  Const        r79, "items"
  Index        r80, r62, r68
  Index        r81, r80, r79
  Append       r82, r81, r65
  SetIndex     r80, r79, r82
  Jump         L12
  Jump         L13
L11:
  // order by g.key
  Sort         r108, r105
  // json(result)
  JSON         r108
  // expect result == [
  Const        r110, [{"o_orderpriority": "1-URGENT", "order_count": 1}, {"o_orderpriority": "2-HIGH", "order_count": 1}]
  Equal        r111, r108, r110
  Expect       r111
  Return       r0
