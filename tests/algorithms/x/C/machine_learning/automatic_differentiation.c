// Generated by Mochi 0.10.32 on 2025-08-16 12:42 +0700
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>


size_t append_len;
static char* str_float(double v) {
    char buf[64];
    snprintf(buf, sizeof(buf), "%f", v);
    char *p = buf + strlen(buf) - 1;
    while (p > buf && *p == '0') *p-- = '\0';
    if (p > buf && *p == '.') *p = '\0';
    return strdup(buf);
}

static void panic(const char *msg) {
    fputs(msg, stderr);
    fputc('\n', stderr);
    exit(1);
}

typedef struct Dual Dual;

struct Dual {
    double value;
    double deriv;
};

Dual dual(double v, double d);
double pow_float(double base, long long exp);
Dual add(Dual a, Dual b);
Dual sub(Dual a, Dual b);
Dual mul(Dual a, Dual b);
Dual user_div(Dual a, Dual b);
Dual power(Dual a, long long p);
void user_main();
int main(void);

Dual dual(double v, double d) {
    return (Dual){.value = v, .deriv = d};
}

double pow_float(double base, long long exp) {
    double res = 1LL;
    long long i = 0LL;
    while (i < exp) {
        res = res * base;
        i = i + 1LL;
    }
    return res;
}

Dual add(Dual a, Dual b) {
    return (Dual){.value = a.value + b.value, .deriv = a.deriv + b.deriv};
}

Dual sub(Dual a, Dual b) {
    return (Dual){.value = a.value - b.value, .deriv = a.deriv - b.deriv};
}

Dual mul(Dual a, Dual b) {
    return (Dual){.value = a.value * b.value, .deriv = (a.deriv * b.value) + (b.deriv * a.value)};
}

Dual user_div(Dual a, Dual b) {
    return (Dual){.value = a.value / b.value, .deriv = ((a.deriv * b.value) - (b.deriv * a.value)) / (b.value * b.value)};
}

Dual power(Dual a, long long p) {
    return (Dual){.value = pow_float(a.value, p), .deriv = ((1LL * p) * pow_float(a.value, p - 1LL)) * a.deriv};
}

void user_main() {
    Dual a = dual(2LL, 1LL);
    Dual b = dual(1LL, 0LL);
    Dual c = add(a, b);
    Dual d = mul(a, b);
    Dual e = user_div(c, d);
    puts(str_float(e.deriv));
    Dual x = dual(2LL, 1LL);
    Dual y = power(x, 3LL);
    puts(str_float(y.deriv));
}

int main(void) {
    user_main();
    return 0;
}
