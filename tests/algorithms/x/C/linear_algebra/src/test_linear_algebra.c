// Generated by Mochi 0.10.32 on 2025-08-16 11:14 +0700
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <malloc.h>
#include <math.h>

size_t vector_add_len;
size_t vector_sub_len;
size_t vector_scalar_mul_len;
size_t zero_vector_len;
size_t unit_basis_vector_len;
size_t axpy_len;
size_t copy_vector_len;
size_t submatrix_len;
size_t *submatrix_lens;
size_t matrix_mul_vector_len;
size_t matrix_mul_scalar_len;
size_t *matrix_mul_scalar_lens;
size_t matrix_add_len;
size_t *matrix_add_lens;
size_t matrix_sub_len;
size_t *matrix_sub_lens;
size_t square_zero_matrix_len;
size_t *square_zero_matrix_lens;

size_t append_len;
static char* str_concat(const char *a, const char *b) {
    size_t len1 = strlen(a);
    size_t len2 = strlen(b);
    char *res = malloc(len1 + len2 + 1);
    memcpy(res, a, len1);
    memcpy(res + len1, b, len2);
    res[len1 + len2] = 0;
    return res;
}

static double* list_append_double(double *arr, size_t *len, double val) {
    arr = realloc(arr, (*len + 1) * sizeof(double));
    arr[*len] = val;
    (*len)++;
    return arr;
}

static long long** list_append_intptr(long long **arr, size_t *len, long long *val) {
    arr = realloc(arr, (*len + 1) * sizeof(long long*));
    arr[*len] = val;
    (*len)++;
    return arr;
}

static size_t* list_append_szt(size_t *arr, size_t *len, size_t val) {
    arr = realloc(arr, (*len + 1) * sizeof(size_t));
    arr[*len] = val;
    (*len)++;
    return arr;
}

#include <time.h>
static int seeded_now = 0;
static long long now_seed = 0;
static long long _now(void) {
    if (!seeded_now) {
        const char *s = getenv("MOCHI_NOW_SEED");
        if (s && *s) {
            now_seed = atoll(s);
            seeded_now = 1;
        }
    }
    if (seeded_now) {
        now_seed = (now_seed * 1664525 + 1013904223) % 2147483647;
        return now_seed;
    }
    struct timespec ts;
    clock_gettime(CLOCK_REALTIME, &ts);
    return (long long)(ts.tv_sec * 1000000000LL + ts.tv_nsec);
}

static long long _mem(void) {
    long long size = 0, rss = 0;
    FILE *f = fopen("/proc/self/statm", "r");
    if (f) {
        if (fscanf(f, "%lld %lld", &size, &rss) != 2) rss = 0;
        fclose(f);
    }
    return rss * (long long)sysconf(_SC_PAGESIZE);
}

static void panic(const char *msg) {
    fputs(msg, stderr);
    fputc('\n', stderr);
    exit(1);
}

static const char* _substring(const char *s, int start, int end) {
    int len = (int)strlen(s);
    if (start < 0) start = 0;
    if (end > len) end = len;
    if (start > end) start = end;
    char *res = malloc(end - start + 1);
    memcpy(res, s + start, end - start);
    res[end - start] = 0;
    return res;
}

static long long* list_append_long_long(long long *arr, size_t *len, long long val) {
    arr = realloc(arr, (*len + 1) * sizeof(long long));
    arr[*len] = val;
    (*len)++;
    return arr;
}

long long vx_init[3] = {1LL, 2LL, 3LL};
long long *vx = vx_init;
size_t vx_len = 3;
long long vs_init[6] = {0LL, 0LL, 0LL, 0LL, 0LL, 1LL};
long long *vs = vs_init;
size_t vs_len = 6;
long long vsize_init[4] = {1LL, 2LL, 3LL, 4LL};
long long *vsize = vsize_init;
size_t vsize_len = 4;
long long va_init[3] = {1LL, 2LL, 3LL};
long long *va = va_init;
size_t va_len = 3;
long long vb_init[3] = {1LL, 1LL, 1LL};
long long *vb = vb_init;
size_t vb_len = 3;
long long *vsum = NULL;
size_t vsum_len = 0;
long long *vsub = NULL;
size_t vsub_len = 0;
double *vmul = NULL;
size_t vmul_len = 0;
long long *zvec = NULL;
size_t zvec_len = 0;
const char* zstr = "";
long long zcount = 0LL;
long long zi = 0LL;
long long *vcopy = NULL;
size_t vcopy_len = 0;
long long vchange_init[3] = {1LL, 0LL, 0LL};
long long *vchange = vchange_init;
size_t vchange_len = 3;
long long ma_0[3] = {1LL, 2LL, 3LL};
long long ma_1[3] = {2LL, 4LL, 5LL};
long long ma_2[3] = {6LL, 7LL, 8LL};
long long *ma_init[3] = {ma_0, ma_1, ma_2};
long long **ma = ma_init;
size_t ma_len = 3;
size_t ma_lens_init[3] = {3, 3, 3};
size_t *ma_lens = ma_lens_init;
size_t ma_lens_len = 3;
long long mb_0[3] = {1LL, 2LL, 3LL};
long long mb_1[3] = {4LL, 5LL, 6LL};
long long mb_2[3] = {7LL, 8LL, 9LL};
long long *mb_init[3] = {mb_0, mb_1, mb_2};
long long **mb = mb_init;
size_t mb_len = 3;
size_t mb_lens_init[3] = {3, 3, 3};
size_t *mb_lens = mb_lens_init;
size_t mb_lens_len = 3;
long long *mv = NULL;
size_t mv_len = 0;
long long **msc = NULL;
size_t msc_len = 0;
size_t *msc_lens = NULL;
size_t msc_lens_len = 0;
long long mc_0[3] = {1LL, 2LL, 3LL};
long long mc_1[3] = {2LL, 4LL, 5LL};
long long mc_2[3] = {6LL, 7LL, 8LL};
long long *mc_init[3] = {mc_0, mc_1, mc_2};
long long **mc = mc_init;
size_t mc_len = 3;
size_t mc_lens_init[3] = {3, 3, 3};
size_t *mc_lens = mc_lens_init;
size_t mc_lens_len = 3;
long long **madd = NULL;
size_t madd_len = 0;
size_t *madd_lens = NULL;
size_t madd_lens_len = 0;
long long **msub = NULL;
size_t msub_len = 0;
size_t *msub_lens = NULL;
size_t msub_lens_len = 0;
long long **mzero = NULL;
size_t mzero_len = 0;
size_t *mzero_lens = NULL;
size_t mzero_lens_len = 0;

const char* int_to_string(long long n);
const char* float_to_string(double x, long long dec);
long long vector_component(long long * v, size_t v_len, long long i);
const char* vector_str_int(long long * v, size_t v_len);
const char* vector_str_float(double * v, size_t v_len, long long dec);
long long * vector_add(long long * a, size_t a_len, long long * b, size_t b_len);
long long * vector_sub(long long * a, size_t a_len, long long * b, size_t b_len);
double * vector_scalar_mul(long long * v, size_t v_len, double s);
long long vector_dot(long long * a, size_t a_len, long long * b, size_t b_len);
double sqrt_newton(double x);
double euclidean_length(long long * v, size_t v_len);
long long * zero_vector(long long n);
long long * unit_basis_vector(long long n, long long idx);
long long * axpy(long long a, long long * x, size_t x_len, long long * y, size_t y_len);
long long * copy_vector(long long * x, size_t x_len);
void change_component(long long * v, size_t v_len, long long idx, long long val);
const char* matrix_str(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len);
long long * * submatrix(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long row, long long col);
long long determinant(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len);
long long matrix_minor(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long row, long long col);
long long matrix_cofactor(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long row, long long col);
long long * matrix_mul_vector(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long * v, size_t v_len);
long long * * matrix_mul_scalar(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long s);
void matrix_change_component(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long i, long long j, long long val);
long long matrix_component(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long i, long long j);
long long * * matrix_add(long long * * a, size_t a_len, size_t* a_lens, size_t a_lens_len, long long * * b, size_t b_len, size_t* b_lens, size_t b_lens_len);
long long * * matrix_sub(long long * * a, size_t a_len, size_t* a_lens, size_t a_lens_len, long long * * b, size_t b_len, size_t* b_lens, size_t b_lens_len);
long long * * square_zero_matrix(long long n);
void assert_int(const char* name, long long actual, long long expected);
void assert_str(const char* name, const char* actual, const char* expected);
void assert_float(const char* name, double actual, double expected, double eps);
int main(void);

const char* int_to_string(long long n) {
    if (n == 0LL) {
        return "0";
    }
    long long num = n;
    long long neg = 0LL;
    if (num < 0LL) {
        neg = 1LL;
        num = -(num);
    }
    const char* res = "";
    while (num > 0LL) {
        long long digit = num % 10LL;
        const char* ch = _substring("0123456789", digit, digit + 1LL);
        res = str_concat(ch, res);
        num = num / 10LL;
    }
    if (neg) {
        res = str_concat("-", res);
    }
    return res;
}

const char* float_to_string(double x, long long dec) {
    long long neg = 0LL;
    double num = x;
    if (num < 0LL) {
        neg = 1LL;
        num = -(num);
    }
    long long int_part = (int)(num);
    const char* res = int_to_string(int_part);
    if (dec > 0LL) {
        res = str_concat(res, ".");
        double frac = num - (double)(int_part);
        long long i = 0LL;
        while (i < dec) {
            frac = frac * 10LL;
            long long digit = (int)(frac);
            res = str_concat(res, _substring("0123456789", digit, digit + 1LL));
            frac = frac - (double)(digit);
            i = i + 1LL;
        }
    }
    if (neg) {
        res = str_concat("-", res);
    }
    return res;
}

long long vector_component(long long * v, size_t v_len, long long i) {
    return v[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? v_len + _mochi_idx : _mochi_idx;})];
}

const char* vector_str_int(long long * v, size_t v_len) {
    const char* s = "(";
    long long i = 0LL;
    while (i < v_len) {
        s = str_concat(s, int_to_string(v[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? v_len + _mochi_idx : _mochi_idx;})]));
        if ((i + 1LL) < v_len) {
            s = str_concat(s, ",");
        }
        i = i + 1LL;
    }
    s = str_concat(s, ")");
    return s;
}

const char* vector_str_float(double * v, size_t v_len, long long dec) {
    const char* s = "(";
    long long i = 0LL;
    while (i < v_len) {
        s = str_concat(s, float_to_string(v[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? v_len + _mochi_idx : _mochi_idx;})], dec));
        if ((i + 1LL) < v_len) {
            s = str_concat(s, ",");
        }
        i = i + 1LL;
    }
    s = str_concat(s, ")");
    return s;
}

long long * vector_add(long long * a, size_t a_len, long long * b, size_t b_len) {
    long long *res = NULL;
    size_t res_len = 0;
    long long i = 0LL;
    while (i < a_len) {
        res = list_append_long_long(res, &res_len, a[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? a_len + _mochi_idx : _mochi_idx;})] + b[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? b_len + _mochi_idx : _mochi_idx;})]);
        i = i + 1LL;
    }
    return vector_add_len = res_len, res;
}

long long * vector_sub(long long * a, size_t a_len, long long * b, size_t b_len) {
    long long *res = NULL;
    size_t res_len = 0;
    long long i = 0LL;
    while (i < a_len) {
        res = list_append_long_long(res, &res_len, a[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? a_len + _mochi_idx : _mochi_idx;})] - b[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? b_len + _mochi_idx : _mochi_idx;})]);
        i = i + 1LL;
    }
    return vector_sub_len = res_len, res;
}

double * vector_scalar_mul(long long * v, size_t v_len, double s) {
    double *res = NULL;
    size_t res_len = 0;
    long long i = 0LL;
    while (i < v_len) {
        res = list_append_double(res, &res_len, (double)(v[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? v_len + _mochi_idx : _mochi_idx;})]) * s);
        i = i + 1LL;
    }
    return vector_scalar_mul_len = res_len, res;
}

long long vector_dot(long long * a, size_t a_len, long long * b, size_t b_len) {
    long long sum = 0LL;
    long long i = 0LL;
    while (i < a_len) {
        sum = sum + (a[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? a_len + _mochi_idx : _mochi_idx;})] * b[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? b_len + _mochi_idx : _mochi_idx;})]);
        i = i + 1LL;
    }
    return sum;
}

double sqrt_newton(double x) {
    if (x == 0LL) {
        return 0LL;
    }
    double low = 0LL;
    double high = x;
    if (x < 1LL) {
        high = 1LL;
    }
    double mid = 0LL;
    long long i = 0LL;
    while (i < 40LL) {
        mid = (low + high) / 2LL;
        if ((mid * mid) > x) {
            high = mid;
        } else {
            low = mid;
        }
        i = i + 1LL;
    }
    return mid;
}

double euclidean_length(long long * v, size_t v_len) {
    double sum = 0LL;
    long long i = 0LL;
    while (i < v_len) {
        double val = (double)(v[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? v_len + _mochi_idx : _mochi_idx;})]);
        sum = sum + (val * val);
        i = i + 1LL;
    }
    return sqrt_newton(sum);
}

long long * zero_vector(long long n) {
    long long *v = NULL;
    size_t v_len = 0;
    long long i = 0LL;
    while (i < n) {
        v = list_append_long_long(v, &v_len, 0LL);
        i = i + 1LL;
    }
    return zero_vector_len = v_len, v;
}

long long * unit_basis_vector(long long n, long long idx) {
    long long *v = zero_vector(n);
    size_t v_len = zero_vector_len;
    v[(int)(idx)] = 1LL;
    return unit_basis_vector_len = v_len, v;
}

long long * axpy(long long a, long long * x, size_t x_len, long long * y, size_t y_len) {
    long long *res = NULL;
    size_t res_len = 0;
    long long i = 0LL;
    while (i < x_len) {
        res = list_append_long_long(res, &res_len, (a * x[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? x_len + _mochi_idx : _mochi_idx;})]) + y[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? y_len + _mochi_idx : _mochi_idx;})]);
        i = i + 1LL;
    }
    return axpy_len = res_len, res;
}

long long * copy_vector(long long * x, size_t x_len) {
    long long *res = NULL;
    size_t res_len = 0;
    long long i = 0LL;
    while (i < x_len) {
        res = list_append_long_long(res, &res_len, x[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? x_len + _mochi_idx : _mochi_idx;})]);
        i = i + 1LL;
    }
    return copy_vector_len = res_len, res;
}

void change_component(long long * v, size_t v_len, long long idx, long long val) {
    v[(int)(idx)] = val;
}

const char* matrix_str(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len) {
    const char* s = "";
    long long i = 0LL;
    while (i < m_len) {
        s = str_concat(s, "|");
        long long j = 0LL;
        while (j < m_lens[0LL]) {
            s = str_concat(s, int_to_string(m[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? m_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = j; _mochi_idx < 0 ? m_lens[i] + _mochi_idx : _mochi_idx;})]));
            if ((j + 1LL) < m_lens[0LL]) {
                s = str_concat(s, ",");
            }
            j = j + 1LL;
        }
        s = str_concat(s, "|\n");
        i = i + 1LL;
    }
    return s;
}

long long * * submatrix(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long row, long long col) {
    long long **res = NULL;
    size_t res_len = 0;
    size_t *res_lens = NULL;
    size_t res_lens_len = 0;
    long long i = 0LL;
    while (i < m_len) {
        if (i != row) {
            long long *r = NULL;
            size_t r_len = 0;
            long long j = 0LL;
            while (j < m_lens[0LL]) {
                if (j != col) {
                    r = list_append_long_long(r, &r_len, m[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? m_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = j; _mochi_idx < 0 ? m_lens[i] + _mochi_idx : _mochi_idx;})]);
                }
                j = j + 1LL;
            }
            res = list_append_intptr(res, &res_len, r);
            res_lens = list_append_szt(res_lens, &res_lens_len, r_len);
        }
        i = i + 1LL;
    }
    return submatrix_lens = res_lens, submatrix_len = res_len, res;
}

long long determinant(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len) {
    long long n = m_len;
    if (n == 1LL) {
        return m[(int)({long long _mochi_idx = 0LL; _mochi_idx < 0 ? m_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = 0LL; _mochi_idx < 0 ? m_lens[0LL] + _mochi_idx : _mochi_idx;})];
    }
    if (n == 2LL) {
        return (m[(int)({long long _mochi_idx = 0LL; _mochi_idx < 0 ? m_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = 0LL; _mochi_idx < 0 ? m_lens[0LL] + _mochi_idx : _mochi_idx;})] * m[(int)({long long _mochi_idx = 1LL; _mochi_idx < 0 ? m_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = 1LL; _mochi_idx < 0 ? m_lens[1LL] + _mochi_idx : _mochi_idx;})]) - (m[(int)({long long _mochi_idx = 0LL; _mochi_idx < 0 ? m_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = 1LL; _mochi_idx < 0 ? m_lens[0LL] + _mochi_idx : _mochi_idx;})] * m[(int)({long long _mochi_idx = 1LL; _mochi_idx < 0 ? m_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = 0LL; _mochi_idx < 0 ? m_lens[1LL] + _mochi_idx : _mochi_idx;})]);
    }
    long long det = 0LL;
    long long c = 0LL;
    while (c < n) {
        long long **sub = submatrix(m, m_len, m_lens, m_len, 0LL, c);
        size_t sub_len = submatrix_len;
        size_t *sub_lens = submatrix_lens;
        size_t sub_lens_len = submatrix_len;
        long long sign = 1LL;
        if ((c % 2LL) == 1LL) {
            sign = -1LL;
        }
        det = det + ((sign * m[(int)({long long _mochi_idx = 0LL; _mochi_idx < 0 ? m_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = c; _mochi_idx < 0 ? m_lens[0LL] + _mochi_idx : _mochi_idx;})]) * determinant(sub, sub_len, sub_lens, sub_len));
        c = c + 1LL;
    }
    return det;
}

long long matrix_minor(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long row, long long col) {
    return ({long long** __tmp3 = submatrix(m, m_len, m_lens, m_len, row, col); determinant(__tmp3, submatrix_len, submatrix_lens, submatrix_len);});
}

long long matrix_cofactor(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long row, long long col) {
    long long sign = 1LL;
    if (((row + col) % 2LL) == 1LL) {
        sign = -1LL;
    }
    return sign * matrix_minor(m, m_len, m_lens, m_len, row, col);
}

long long * matrix_mul_vector(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long * v, size_t v_len) {
    long long *res = NULL;
    size_t res_len = 0;
    long long i = 0LL;
    while (i < m_len) {
        long long sum = 0LL;
        long long j = 0LL;
        while (j < m_lens[0LL]) {
            sum = sum + (m[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? m_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = j; _mochi_idx < 0 ? m_lens[i] + _mochi_idx : _mochi_idx;})] * v[(int)({long long _mochi_idx = j; _mochi_idx < 0 ? v_len + _mochi_idx : _mochi_idx;})]);
            j = j + 1LL;
        }
        res = list_append_long_long(res, &res_len, sum);
        i = i + 1LL;
    }
    return matrix_mul_vector_len = res_len, res;
}

long long * * matrix_mul_scalar(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long s) {
    long long **res = NULL;
    size_t res_len = 0;
    size_t *res_lens = NULL;
    size_t res_lens_len = 0;
    long long i = 0LL;
    while (i < m_len) {
        long long *row = NULL;
        size_t row_len = 0;
        long long j = 0LL;
        while (j < m_lens[0LL]) {
            row = list_append_long_long(row, &row_len, m[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? m_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = j; _mochi_idx < 0 ? m_lens[i] + _mochi_idx : _mochi_idx;})] * s);
            j = j + 1LL;
        }
        res = list_append_intptr(res, &res_len, row);
        res_lens = list_append_szt(res_lens, &res_lens_len, row_len);
        i = i + 1LL;
    }
    return matrix_mul_scalar_lens = res_lens, matrix_mul_scalar_len = res_len, res;
}

void matrix_change_component(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long i, long long j, long long val) {
    m[(int)(i)][(int)(j)] = val;
}

long long matrix_component(long long * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long i, long long j) {
    return m[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? m_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = j; _mochi_idx < 0 ? m_lens[i] + _mochi_idx : _mochi_idx;})];
}

long long * * matrix_add(long long * * a, size_t a_len, size_t* a_lens, size_t a_lens_len, long long * * b, size_t b_len, size_t* b_lens, size_t b_lens_len) {
    long long **res = NULL;
    size_t res_len = 0;
    size_t *res_lens = NULL;
    size_t res_lens_len = 0;
    long long i = 0LL;
    while (i < a_len) {
        long long *row = NULL;
        size_t row_len = 0;
        long long j = 0LL;
        while (j < a_lens[0LL]) {
            row = list_append_long_long(row, &row_len, a[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? a_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = j; _mochi_idx < 0 ? a_lens[i] + _mochi_idx : _mochi_idx;})] + b[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? b_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = j; _mochi_idx < 0 ? b_lens[i] + _mochi_idx : _mochi_idx;})]);
            j = j + 1LL;
        }
        res = list_append_intptr(res, &res_len, row);
        res_lens = list_append_szt(res_lens, &res_lens_len, row_len);
        i = i + 1LL;
    }
    return matrix_add_lens = res_lens, matrix_add_len = res_len, res;
}

long long * * matrix_sub(long long * * a, size_t a_len, size_t* a_lens, size_t a_lens_len, long long * * b, size_t b_len, size_t* b_lens, size_t b_lens_len) {
    long long **res = NULL;
    size_t res_len = 0;
    size_t *res_lens = NULL;
    size_t res_lens_len = 0;
    long long i = 0LL;
    while (i < a_len) {
        long long *row = NULL;
        size_t row_len = 0;
        long long j = 0LL;
        while (j < a_lens[0LL]) {
            row = list_append_long_long(row, &row_len, a[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? a_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = j; _mochi_idx < 0 ? a_lens[i] + _mochi_idx : _mochi_idx;})] - b[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? b_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = j; _mochi_idx < 0 ? b_lens[i] + _mochi_idx : _mochi_idx;})]);
            j = j + 1LL;
        }
        res = list_append_intptr(res, &res_len, row);
        res_lens = list_append_szt(res_lens, &res_lens_len, row_len);
        i = i + 1LL;
    }
    return matrix_sub_lens = res_lens, matrix_sub_len = res_len, res;
}

long long * * square_zero_matrix(long long n) {
    long long **m = NULL;
    size_t m_len = 0;
    size_t *m_lens = NULL;
    size_t m_lens_len = 0;
    long long i = 0LL;
    while (i < n) {
        m = list_append_intptr(m, &m_len, zero_vector(n));
        m_lens = list_append_szt(m_lens, &m_lens_len, zero_vector_len);
        i = i + 1LL;
    }
    return square_zero_matrix_lens = m_lens, square_zero_matrix_len = m_len, m;
}

void assert_int(const char* name, long long actual, long long expected) {
    if (actual == expected) {
        puts(str_concat(name, " ok"));
    } else {
        puts(str_concat(str_concat(str_concat(str_concat(name, " fail "), int_to_string(actual)), " != "), int_to_string(expected)));
    }
}

void assert_str(const char* name, const char* actual, const char* expected) {
    if (strcmp(actual, expected) == 0) {
        puts(str_concat(name, " ok"));
    } else {
        puts(str_concat(name, " fail"));
        puts(actual);
        puts(expected);
    }
}

void assert_float(const char* name, double actual, double expected, double eps) {
    double diff = actual - expected;
    if (diff < 0LL) {
        diff = -(diff);
    }
    if (diff <= eps) {
        puts(str_concat(name, " ok"));
    } else {
        puts(str_concat(name, " fail"));
    }
}

int main(void) {
    {
        long long __start = _now();
        assert_int("component0", vector_component(vx, vx_len, 0LL), 1LL);
        assert_int("component2", vector_component(vx, vx_len, 2LL), 3LL);
        assert_str("str_vector", vector_str_int(vs, vs_len), "(0,0,0,0,0,1)");
        assert_int("size", 4LL, 4LL);
        vsum = vector_add(va, va_len, vb, vb_len);
        vsum_len = vector_add_len;
        assert_int("add0", vector_component(vsum, vsum_len, 0LL), 2LL);
        assert_int("add1", vector_component(vsum, vsum_len, 1LL), 3LL);
        assert_int("add2", vector_component(vsum, vsum_len, 2LL), 4LL);
        vsub = vector_sub(va, va_len, vb, vb_len);
        vsub_len = vector_sub_len;
        assert_int("sub0", vector_component(vsub, vsub_len, 0LL), 0LL);
        assert_int("sub1", vector_component(vsub, vsub_len, 1LL), 1LL);
        assert_int("sub2", vector_component(vsub, vsub_len, 2LL), 2LL);
        vmul = vector_scalar_mul(va, va_len, 3LL);
        vmul_len = vector_scalar_mul_len;
        assert_str("scalar_mul", vector_str_float(vmul, vmul_len, 1LL), "(3.0,6.0,9.0)");
        assert_int("dot_product", vector_dot(({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 2LL; tmp[1] = -1LL; tmp[2] = 4LL; tmp;}), 3, ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = -2LL; tmp[2] = -1LL; tmp;}), 3), 0LL);
        zvec = zero_vector(10LL);
        zvec_len = zero_vector_len;
        zstr = vector_str_int(zvec, zvec_len);
        while (zi < strlen(zstr)) {
            if (strcmp(_substring(zstr, zi, zi + 1LL), "0") == 0) {
                zcount = zcount + 1LL;
            }
            zi = zi + 1LL;
        }
        assert_int("zero_vector", (long long)zcount, 10LL);
        assert_str("unit_basis", ({long long* __tmp4 = unit_basis_vector(3LL, 1LL); vector_str_int(__tmp4, unit_basis_vector_len);}), "(0,1,0)");
        assert_str("axpy", ({long long* __tmp5 = axpy(2LL, ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = 2LL; tmp[2] = 3LL; tmp;}), 3, ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = 0LL; tmp[2] = 1LL; tmp;}), 3); vector_str_int(__tmp5, axpy_len);}), "(3,4,7)");
        vcopy = copy_vector(({long long *tmp = malloc(6 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = 0LL; tmp[2] = 0LL; tmp[3] = 0LL; tmp[4] = 0LL; tmp[5] = 0LL; tmp;}), 6);
        vcopy_len = copy_vector_len;
        assert_str("copy", vector_str_int(vcopy, vcopy_len), "(1,0,0,0,0,0)");
        change_component(vchange, vchange_len, 0LL, 0LL);
        change_component(vchange, vchange_len, 1LL, 1LL);
        assert_str("change_component", vector_str_int(vchange, vchange_len), "(0,1,0)");
        assert_str("matrix_str", matrix_str(ma, ma_len, ma_lens, ma_len), "|1,2,3|\n|2,4,5|\n|6,7,8|\n");
        assert_int("determinant", determinant(ma, ma_len, ma_lens, ma_len), -5LL);
        mv = matrix_mul_vector(mb, mb_len, mb_lens, mb_len, ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = 2LL; tmp[2] = 3LL; tmp;}), 3);
        mv_len = matrix_mul_vector_len;
        assert_str("matrix_vec_mul", vector_str_int(mv, mv_len), "(14,32,50)");
        msc = matrix_mul_scalar(mb, mb_len, mb_lens, mb_len, 2LL);
        msc_len = matrix_mul_scalar_len;
        msc_lens = matrix_mul_scalar_lens;
        assert_str("matrix_scalar_mul", matrix_str(msc, msc_len, msc_lens, msc_len), "|2,4,6|\n|8,10,12|\n|14,16,18|\n");
        matrix_change_component(mc, mc_len, mc_lens, mc_len, 0LL, 2LL, 5LL);
        assert_str("change_component_matrix", matrix_str(mc, mc_len, mc_lens, mc_len), "|1,2,5|\n|2,4,5|\n|6,7,8|\n");
        assert_int("matrix_component", matrix_component(mc, mc_len, mc_lens, mc_len, 2LL, 1LL), 7LL);
        madd = matrix_add(({long long** tmp = malloc(3 * sizeof(long long*)); tmp[0] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = 2LL; tmp[2] = 3LL; tmp;}); tmp[1] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 2LL; tmp[1] = 4LL; tmp[2] = 5LL; tmp;}); tmp[2] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 6LL; tmp[1] = 7LL; tmp[2] = 8LL; tmp;}); tmp;}), 3, ({size_t *tmp = malloc(3 * sizeof(size_t)); tmp[0] = 3; tmp[1] = 3; tmp[2] = 3; tmp;}), 3, ({long long** tmp = malloc(3 * sizeof(long long*)); tmp[0] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = 2LL; tmp[2] = 7LL; tmp;}); tmp[1] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 2LL; tmp[1] = 4LL; tmp[2] = 5LL; tmp;}); tmp[2] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 6LL; tmp[1] = 7LL; tmp[2] = 10LL; tmp;}); tmp;}), 3, ({size_t *tmp = malloc(3 * sizeof(size_t)); tmp[0] = 3; tmp[1] = 3; tmp[2] = 3; tmp;}), 3);
        madd_len = matrix_add_len;
        madd_lens = matrix_add_lens;
        assert_str("matrix_add", matrix_str(madd, madd_len, madd_lens, madd_len), "|2,4,10|\n|4,8,10|\n|12,14,18|\n");
        msub = matrix_sub(({long long** tmp = malloc(3 * sizeof(long long*)); tmp[0] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = 2LL; tmp[2] = 3LL; tmp;}); tmp[1] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 2LL; tmp[1] = 4LL; tmp[2] = 5LL; tmp;}); tmp[2] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 6LL; tmp[1] = 7LL; tmp[2] = 8LL; tmp;}); tmp;}), 3, ({size_t *tmp = malloc(3 * sizeof(size_t)); tmp[0] = 3; tmp[1] = 3; tmp[2] = 3; tmp;}), 3, ({long long** tmp = malloc(3 * sizeof(long long*)); tmp[0] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = 2LL; tmp[2] = 7LL; tmp;}); tmp[1] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 2LL; tmp[1] = 4LL; tmp[2] = 5LL; tmp;}); tmp[2] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 6LL; tmp[1] = 7LL; tmp[2] = 10LL; tmp;}); tmp;}), 3, ({size_t *tmp = malloc(3 * sizeof(size_t)); tmp[0] = 3; tmp[1] = 3; tmp[2] = 3; tmp;}), 3);
        msub_len = matrix_sub_len;
        msub_lens = matrix_sub_lens;
        assert_str("matrix_sub", matrix_str(msub, msub_len, msub_lens, msub_len), "|0,0,-4|\n|0,0,0|\n|0,0,-2|\n");
        mzero = square_zero_matrix(5LL);
        mzero_len = square_zero_matrix_len;
        mzero_lens = square_zero_matrix_lens;
        assert_str("square_zero_matrix", matrix_str(mzero, mzero_len, mzero_lens, mzero_len), "|0,0,0,0,0|\n|0,0,0,0,0|\n|0,0,0,0,0|\n|0,0,0,0,0|\n|0,0,0,0,0|\n");
        long long __end = _now();
        long long __dur_us = (__end - __start) / 1000;
        long long __mem_bytes = _mem();
        printf("{\n  \"duration_us\": %-lld,\n  \"memory_bytes\": %-lld,\n  \"name\": \"main\"\n}\n", __dur_us, __mem_bytes);
    }
    return 0;
}
