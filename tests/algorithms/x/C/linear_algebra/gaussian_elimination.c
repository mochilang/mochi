// Generated by Mochi 0.10.32 on 2025-08-16 11:14 +0700
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <malloc.h>
#include <math.h>

size_t retroactive_resolution_len;
size_t *retroactive_resolution_lens;
size_t gaussian_elimination_len;
size_t *gaussian_elimination_lens;

size_t append_len;
static double* list_append_double(double *arr, size_t *len, double val) {
    arr = realloc(arr, (*len + 1) * sizeof(double));
    arr[*len] = val;
    (*len)++;
    return arr;
}

static long long** list_append_intptr(long long **arr, size_t *len, long long *val) {
    arr = realloc(arr, (*len + 1) * sizeof(long long*));
    arr[*len] = val;
    (*len)++;
    return arr;
}

static double** list_append_doubleptr(double **arr, size_t *len, double *val) {
    arr = realloc(arr, (*len + 1) * sizeof(double*));
    arr[*len] = val;
    (*len)++;
    return arr;
}

static size_t* list_append_szt(size_t *arr, size_t *len, size_t val) {
    arr = realloc(arr, (*len + 1) * sizeof(size_t));
    arr[*len] = val;
    (*len)++;
    return arr;
}

#include <time.h>
static int seeded_now = 0;
static long long now_seed = 0;
static long long _now(void) {
    if (!seeded_now) {
        const char *s = getenv("MOCHI_NOW_SEED");
        if (s && *s) {
            now_seed = atoll(s);
            seeded_now = 1;
        }
    }
    if (seeded_now) {
        now_seed = (now_seed * 1664525 + 1013904223) % 2147483647;
        return now_seed;
    }
    struct timespec ts;
    clock_gettime(CLOCK_REALTIME, &ts);
    return (long long)(ts.tv_sec * 1000000000LL + ts.tv_nsec);
}

static long long _mem(void) {
    long long size = 0, rss = 0;
    FILE *f = fopen("/proc/self/statm", "r");
    if (f) {
        if (fscanf(f, "%lld %lld", &size, &rss) != 2) rss = 0;
        fclose(f);
    }
    return rss * (long long)sysconf(_SC_PAGESIZE);
}

static void panic(const char *msg) {
    fputs(msg, stderr);
    fputc('\n', stderr);
    exit(1);
}

double * * retroactive_resolution(double * * coefficients, size_t coefficients_len, size_t* coefficients_lens, size_t coefficients_lens_len, double * * vector, size_t vector_len, size_t* vector_lens, size_t vector_lens_len);
double * * gaussian_elimination(double * * coefficients, size_t coefficients_len, size_t* coefficients_lens, size_t coefficients_lens_len, double * * vector, size_t vector_len, size_t* vector_lens, size_t vector_lens_len);
int main(void);

double * * retroactive_resolution(double * * coefficients, size_t coefficients_len, size_t* coefficients_lens, size_t coefficients_lens_len, double * * vector, size_t vector_len, size_t* vector_lens, size_t vector_lens_len) {
    long long rows = coefficients_len;
    double **x = NULL;
    size_t x_len = 0;
    size_t *x_lens = NULL;
    size_t x_lens_len = 0;
    long long i = 0LL;
    while (i < rows) {
        double *inner = NULL;
        size_t inner_len = 0;
        inner = list_append_double(inner, &inner_len, 0LL);
        x = list_append_doubleptr(x, &x_len, inner);
        x_lens = list_append_szt(x_lens, &x_lens_len, inner_len);
        i = i + 1LL;
    }
    long long r = rows - 1LL;
    while (r >= 0LL) {
        double total = 0LL;
        long long c = r + 1LL;
        while (c < rows) {
            total = total + (coefficients[(int)({long long _mochi_idx = r; _mochi_idx < 0 ? coefficients_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = c; _mochi_idx < 0 ? coefficients_lens[r] + _mochi_idx : _mochi_idx;})] * x[(int)({long long _mochi_idx = c; _mochi_idx < 0 ? x_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = 0LL; _mochi_idx < 0 ? x_lens[c] + _mochi_idx : _mochi_idx;})]);
            c = c + 1LL;
        }
        x[(int)(r)][(int)(0LL)] = (vector[(int)({long long _mochi_idx = r; _mochi_idx < 0 ? vector_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = 0LL; _mochi_idx < 0 ? vector_lens[r] + _mochi_idx : _mochi_idx;})] - total) / coefficients[(int)({long long _mochi_idx = r; _mochi_idx < 0 ? coefficients_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = r; _mochi_idx < 0 ? coefficients_lens[r] + _mochi_idx : _mochi_idx;})];
        r = r - 1LL;
    }
    return retroactive_resolution_lens = x_lens, retroactive_resolution_len = x_len, x;
}

double * * gaussian_elimination(double * * coefficients, size_t coefficients_len, size_t* coefficients_lens, size_t coefficients_lens_len, double * * vector, size_t vector_len, size_t* vector_lens, size_t vector_lens_len) {
    long long rows = coefficients_len;
    long long columns = coefficients_lens[0LL];
    if (rows != columns) {
        {
            size_t *__tmp0_lens = malloc(0 * sizeof(size_t));
            double** __tmp0_data = malloc(0 * sizeof(double*));
            gaussian_elimination_lens = __tmp0_lens;
            gaussian_elimination_len = 0;
            return __tmp0_data;
        }
    }
    double **augmented = NULL;
    size_t augmented_len = 0;
    size_t *augmented_lens = NULL;
    size_t augmented_lens_len = 0;
    long long i = 0LL;
    while (i < rows) {
        double *row = NULL;
        size_t row_len = 0;
        long long j = 0LL;
        while (j < columns) {
            row = list_append_double(row, &row_len, coefficients[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? coefficients_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = j; _mochi_idx < 0 ? coefficients_lens[i] + _mochi_idx : _mochi_idx;})]);
            j = j + 1LL;
        }
        row = list_append_double(row, &row_len, vector[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? vector_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = 0LL; _mochi_idx < 0 ? vector_lens[i] + _mochi_idx : _mochi_idx;})]);
        augmented = list_append_doubleptr(augmented, &augmented_len, row);
        augmented_lens = list_append_szt(augmented_lens, &augmented_lens_len, row_len);
        i = i + 1LL;
    }
    long long row_idx = 0LL;
    while (row_idx < (rows - 1LL)) {
        double pivot = augmented[(int)({long long _mochi_idx = row_idx; _mochi_idx < 0 ? augmented_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = row_idx; _mochi_idx < 0 ? augmented_lens[row_idx] + _mochi_idx : _mochi_idx;})];
        long long col = row_idx + 1LL;
        while (col < rows) {
            double factor = augmented[(int)({long long _mochi_idx = col; _mochi_idx < 0 ? augmented_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = row_idx; _mochi_idx < 0 ? augmented_lens[col] + _mochi_idx : _mochi_idx;})] / pivot;
            long long k = row_idx;
            while (k < (columns + 1LL)) {
                augmented[(int)(col)][(int)(k)] = augmented[(int)({long long _mochi_idx = col; _mochi_idx < 0 ? augmented_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = k; _mochi_idx < 0 ? augmented_lens[col] + _mochi_idx : _mochi_idx;})] - (factor * augmented[(int)({long long _mochi_idx = row_idx; _mochi_idx < 0 ? augmented_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = k; _mochi_idx < 0 ? augmented_lens[row_idx] + _mochi_idx : _mochi_idx;})]);
                k = k + 1LL;
            }
            col = col + 1LL;
        }
        row_idx = row_idx + 1LL;
    }
    double **coeffs = NULL;
    size_t coeffs_len = 0;
    size_t *coeffs_lens = NULL;
    size_t coeffs_lens_len = 0;
    double **vec = NULL;
    size_t vec_len = 0;
    size_t *vec_lens = NULL;
    size_t vec_lens_len = 0;
    long long r = 0LL;
    while (r < rows) {
        double *row = NULL;
        size_t row_len = 0;
        long long c = 0LL;
        while (c < columns) {
            row = list_append_double(row, &row_len, augmented[(int)({long long _mochi_idx = r; _mochi_idx < 0 ? augmented_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = c; _mochi_idx < 0 ? augmented_lens[r] + _mochi_idx : _mochi_idx;})]);
            c = c + 1LL;
        }
        coeffs = list_append_doubleptr(coeffs, &coeffs_len, row);
        coeffs_lens = list_append_szt(coeffs_lens, &coeffs_lens_len, row_len);
        vec = list_append_doubleptr(vec, &vec_len, ({double* tmp = malloc(1 * sizeof(double)); tmp[0] = augmented[(int)({long long _mochi_idx = r; _mochi_idx < 0 ? augmented_len + _mochi_idx : _mochi_idx;})][(int)({long long _mochi_idx = columns; _mochi_idx < 0 ? augmented_lens[r] + _mochi_idx : _mochi_idx;})]; tmp;}));
        vec_lens = list_append_szt(vec_lens, &vec_lens_len, 1);
        r = r + 1LL;
    }
    double **x = retroactive_resolution(coeffs, coeffs_len, coeffs_lens, coeffs_len, vec, vec_len, vec_lens, vec_len);
    size_t x_len = retroactive_resolution_len;
    size_t *x_lens = retroactive_resolution_lens;
    size_t x_lens_len = retroactive_resolution_len;
    return gaussian_elimination_lens = x_lens, gaussian_elimination_len = x_len, x;
}

int main(void) {
    {
        long long __start = _now();
        printf("%d\n", gaussian_elimination(({long long** tmp = malloc(3 * sizeof(long long*)); tmp[0] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = -4LL; tmp[2] = -2LL; tmp;}); tmp[1] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 5LL; tmp[1] = 2LL; tmp[2] = -2LL; tmp;}); tmp[2] = ({long long *tmp = malloc(3 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = -1LL; tmp[2] = 0LL; tmp;}); tmp;}), 3, ({size_t *tmp = malloc(3 * sizeof(size_t)); tmp[0] = 3; tmp[1] = 3; tmp[2] = 3; tmp;}), 3, ({long long** tmp = malloc(3 * sizeof(long long*)); tmp[0] = ({long long *tmp = malloc(1 * sizeof(long long)); tmp[0] = -2LL; tmp;}); tmp[1] = ({long long *tmp = malloc(1 * sizeof(long long)); tmp[0] = -3LL; tmp;}); tmp[2] = ({long long *tmp = malloc(1 * sizeof(long long)); tmp[0] = 4LL; tmp;}); tmp;}), 3, ({size_t *tmp = malloc(3 * sizeof(size_t)); tmp[0] = 1; tmp[1] = 1; tmp[2] = 1; tmp;}), 3));
        printf("%d\n", gaussian_elimination(({long long** tmp = malloc(2 * sizeof(long long*)); tmp[0] = ({long long *tmp = malloc(2 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = 2LL; tmp;}); tmp[1] = ({long long *tmp = malloc(2 * sizeof(long long)); tmp[0] = 5LL; tmp[1] = 2LL; tmp;}); tmp;}), 2, ({size_t *tmp = malloc(2 * sizeof(size_t)); tmp[0] = 2; tmp[1] = 2; tmp;}), 2, ({long long** tmp = malloc(2 * sizeof(long long*)); tmp[0] = ({long long *tmp = malloc(1 * sizeof(long long)); tmp[0] = 5LL; tmp;}); tmp[1] = ({long long *tmp = malloc(1 * sizeof(long long)); tmp[0] = 5LL; tmp;}); tmp;}), 2, ({size_t *tmp = malloc(2 * sizeof(size_t)); tmp[0] = 1; tmp[1] = 1; tmp;}), 2));
        long long __end = _now();
        long long __dur_us = (__end - __start) / 1000;
        long long __mem_bytes = _mem();
        printf("{\n  \"duration_us\": %-lld,\n  \"memory_bytes\": %-lld,\n  \"name\": \"main\"\n}\n", __dur_us, __mem_bytes);
    }
    return 0;
}
