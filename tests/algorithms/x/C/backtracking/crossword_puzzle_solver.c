// Generated by Mochi 0.10.32 on 2025-08-06 16:21 +0700
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <malloc.h>


#include <time.h>
#include <stdlib.h>
static int seeded_now = 0;
static long long now_seed = 0;
static long long _now(void) {
    if (!seeded_now) {
        const char *s = getenv("MOCHI_NOW_SEED");
        if (s && *s) {
            now_seed = atoll(s);
            seeded_now = 1;
        }
    }
    if (seeded_now) {
        now_seed = (now_seed * 1664525 + 1013904223) % 2147483647;
        return now_seed;
    }
    struct timespec ts;
    clock_gettime(CLOCK_REALTIME, &ts);
    return (long long)(ts.tv_sec * 1000000000LL + ts.tv_nsec);
}

static long long _mem(void) {
    long long size = 0, rss = 0;
    FILE *f = fopen("/proc/self/statm", "r");
    if (f) {
        if (fscanf(f, "%lld %lld", &size, &rss) != 2) rss = 0;
        fclose(f);
    }
    return rss * (long long)sysconf(_SC_PAGESIZE);
}

const char* puzzle_0[3] = {"", "", ""};
const char* puzzle_1[3] = {"", "", ""};
const char* puzzle_2[3] = {"", "", ""};
const char* *puzzle_init[3] = {puzzle_0, puzzle_1, puzzle_2};
const char* **puzzle = puzzle_init;
size_t puzzle_len = 3;
size_t puzzle_lens_init[3] = {3, 3, 3};
size_t *puzzle_lens = puzzle_lens_init;
size_t puzzle_lens_len = 3;
const char* words_init[3] = {"cat", "dog", "car"};
const char* *words = words_init;
size_t words_len = 3;
int used_init[3] = {0LL, 0LL, 0LL};
int *used = used_init;
size_t used_len = 3;

long long is_valid(const char* * * puzzle, size_t puzzle_len, size_t* puzzle_lens, size_t puzzle_lens_len, const char* word, long long row, long long col, int vertical);
int place_word(const char* * * puzzle, size_t puzzle_len, size_t* puzzle_lens, size_t puzzle_lens_len, const char* word, long long row, long long col, int vertical);
int remove_word(const char* * * puzzle, size_t puzzle_len, size_t* puzzle_lens, size_t puzzle_lens_len, const char* word, long long row, long long col, int vertical);
long long solve_crossword(const char* * * puzzle, size_t puzzle_len, size_t* puzzle_lens, size_t puzzle_lens_len, const char* * words, size_t words_len, int * used, size_t used_len);
int main(void);

long long is_valid(const char* * * puzzle, size_t puzzle_len, size_t* puzzle_lens, size_t puzzle_lens_len, const char* word, long long row, long long col, int vertical) {
    for (int i = 0LL; i < strlen(word); i++) {
        if (vertical) {
            if (((row + i) >= puzzle_len) || (strcmp(puzzle[(int)(row + i)][(int)(col)], "") != 0)) {
                return 0LL;
            }
        } else {
            if (((col + i) >= puzzle_lens[0LL]) || (strcmp(puzzle[(int)(row)][(int)(col + i)], "") != 0)) {
                return 0LL;
            }
        }
    }
    return 1LL;
}

int place_word(const char* * * puzzle, size_t puzzle_len, size_t* puzzle_lens, size_t puzzle_lens_len, const char* word, long long row, long long col, int vertical) {
    for (int i = 0LL; i < strlen(word); i++) {
        const char* ch = (const char[]){word[i], 0};
        if (vertical) {
            puzzle[(int)(row + i)][(int)(col)] = ch;
        } else {
            puzzle[(int)(row)][(int)(col + i)] = ch;
        }
    }
}

int remove_word(const char* * * puzzle, size_t puzzle_len, size_t* puzzle_lens, size_t puzzle_lens_len, const char* word, long long row, long long col, int vertical) {
    for (int i = 0LL; i < strlen(word); i++) {
        if (vertical) {
            puzzle[(int)(row + i)][(int)(col)] = "";
        } else {
            puzzle[(int)(row)][(int)(col + i)] = "";
        }
    }
}

long long solve_crossword(const char* * * puzzle, size_t puzzle_len, size_t* puzzle_lens, size_t puzzle_lens_len, const char* * words, size_t words_len, int * used, size_t used_len) {
    for (int row = 0LL; row < puzzle_len; row++) {
        for (int col = 0LL; col < puzzle_lens[0LL]; col++) {
            if (strcmp(puzzle[(int)(row)][(int)(col)], "") == 0) {
                for (int i = 0LL; i < words_len; i++) {
                    if (!(used[(int)(i)])) {
                        const char* word = words[(int)(i)];
                        {
                            long long vertical_arr[] = {1LL, 0LL};
                            size_t vertical_len = sizeof(vertical_arr) / sizeof(vertical_arr[0]);
                            for (size_t __i = 0; __i < vertical_len; __i++) {
                                long long vertical = vertical_arr[__i];
                                if (is_valid(puzzle, puzzle_len, puzzle_lens, puzzle_len, word, row, col, vertical)) {
                                    place_word(puzzle, puzzle_len, puzzle_lens, puzzle_len, word, row, col, vertical);
                                    used[(int)(i)] = 1LL;
                                    if (solve_crossword(puzzle, puzzle_len, puzzle_lens, puzzle_len, words, words_len, used, used_len)) {
                                        return 1LL;
                                    }
                                    used[(int)(i)] = 0LL;
                                    remove_word(puzzle, puzzle_len, puzzle_lens, puzzle_len, word, row, col, vertical);
                                }
                            }
                        }
                    }
                }
                return 0LL;
            }
        }
    }
    return 1LL;
}

int main(void) {
    {
        long long __start = _now();
        if (solve_crossword(puzzle, puzzle_len, puzzle_lens, puzzle_len, words, words_len, used, used_len)) {
            puts("Solution found:");
            {
                const char* row_arr[3][3] = {{"", "", ""}, {"", "", ""}, {"", "", ""}};
                size_t row_len = 3;
                for (size_t __i = 0; __i < row_len; __i++) {
                    const char* row[3] = {0};
                    memcpy(row, row_arr[__i], sizeof(row_arr[__i]));
                    printf("%d\n", row);
                }
            }
        } else {
            puts("No solution found:");
        }
        long long __end = _now();
        long long __dur_us = (__end - __start) / 1000;
        long long __mem_bytes = _mem();
        printf("{\n  \"duration_us\": %-lld,\n  \"memory_bytes\": %-lld,\n  \"name\": \"main\"\n}\n", __dur_us, __mem_bytes);
    }
    return 0;
}
