// Generated by Mochi 0.10.32 on 2025-08-24 16:59 +0700
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <malloc.h>

size_t inorder_len;

size_t append_len;
static char* str_concat(const char *a, const char *b) {
    size_t len1 = strlen(a);
    size_t len2 = strlen(b);
    char *res = malloc(len1 + len2 + 1);
    memcpy(res, a, len1);
    memcpy(res + len1, b, len2);
    res[len1 + len2] = 0;
    return res;
}

static char* str_int(long long v) {
    char buf[32];
    snprintf(buf, sizeof(buf), "%lld", v);
    return strdup(buf);
}

static char* str_list_int(const long long *arr, size_t len) {
    size_t cap = len * 32 + 2;
    char *buf = malloc(cap);
    size_t pos = 0;
    buf[pos++] = '[';
    for (size_t i = 0; i < len; i++) {
        char tmp[32];
        snprintf(tmp, sizeof(tmp), "%lld", arr[i]);
        size_t n = strlen(tmp);
        if (pos + n + 2 >= cap) { cap = cap * 2 + n + 2; buf = realloc(buf, cap); }
        memcpy(buf + pos, tmp, n);
        pos += n;
        if (i + 1 < len) buf[pos++] = ' ';
    }
    buf[pos++] = ']';
    buf[pos] = 0;
    return buf;
}

static const char** list_append_str(const char **arr, size_t *len, const char *val) {
    arr = realloc((void*)arr, (*len + 1) * sizeof(char*));
    arr[*len] = val;
    (*len)++;
    return arr;
}

static size_t concat_len;
static long long* concat_long_long(long long *a, size_t a_len, const long long *b, size_t b_len) {
    long long *res = realloc(a, (a_len + b_len) * sizeof(long long));
    if (b_len > 0) memcpy(res + a_len, b, b_len * sizeof(long long));
    concat_len = a_len + b_len;
    return res;
}

#include <time.h>
static int seeded_now = 0;
static long long now_seed = 0;
static long long _now(void) {
    if (!seeded_now) {
        const char *s = getenv("MOCHI_NOW_SEED");
        if (s && *s) {
            now_seed = atoll(s);
            seeded_now = 1;
        }
    }
    if (seeded_now) {
        now_seed = (now_seed * 1664525 + 1013904223) % 2147483647;
        return now_seed;
    }
    struct timespec ts;
    clock_gettime(CLOCK_REALTIME, &ts);
    return (long long)(ts.tv_sec * 1000000000LL + ts.tv_nsec);
}

static long long _mem(void) {
    long long size = 0, rss = 0;
    FILE *f = fopen("/proc/self/statm", "r");
    if (f) {
        if (fscanf(f, "%lld %lld", &size, &rss) != 2) rss = 0;
        fclose(f);
    }
    return rss * (long long)sysconf(_SC_PAGESIZE);
}

static void panic(const char *msg) {
    fputs(msg, stderr);
    fputc('\n', stderr);
    exit(1);
}

typedef struct Tree Tree;

struct Tree {
    long long *values;
    size_t values_len;
    long long *left;
    size_t left_len;
    long long *right;
    size_t right_len;
    long long root;
};

static Tree* list_append_Tree(Tree *arr, size_t *len, Tree val) {
    arr = realloc(arr, (*len + 1) * sizeof(Tree));
    arr[*len] = val;
    (*len)++;
    return arr;
}

void mirror_node(long long * left, size_t left_len, long long * right, size_t right_len, long long idx);
Tree mirror(Tree tree);
long long * inorder(Tree tree, long long idx);
Tree make_tree_zero();
Tree make_tree_seven();
Tree make_tree_nine();
void user_main();
int main(void);

void mirror_node(long long * left, size_t left_len, long long * right, size_t right_len, long long idx) {
    if (idx == -1LL) {
        return 0;
    }
    long long temp = left[(int)({long long _mochi_idx = idx; _mochi_idx < 0 ? left_len + _mochi_idx : _mochi_idx;})];
    left[(int)(idx)] = right[(int)({long long _mochi_idx = idx; _mochi_idx < 0 ? right_len + _mochi_idx : _mochi_idx;})];
    right[(int)(idx)] = temp;
    mirror_node(left, left_len, right, right_len, left[(int)({long long _mochi_idx = idx; _mochi_idx < 0 ? left_len + _mochi_idx : _mochi_idx;})]);
    mirror_node(left, left_len, right, right_len, right[(int)({long long _mochi_idx = idx; _mochi_idx < 0 ? right_len + _mochi_idx : _mochi_idx;})]);
}

Tree mirror(Tree tree) {
    mirror_node(tree.left, tree.left_len, tree.right, tree.right_len, tree.root);
    return tree;
}

long long * inorder(Tree tree, long long idx) {
    if (idx == -1LL) {
        {
            long long* __tmp2_data = malloc(0 * sizeof(long long));
            inorder_len = 0;
            return __tmp2_data;
        }
    }
    long long *left_vals = inorder(tree, tree.left[(int)({long long _mochi_idx = idx; _mochi_idx < 0 ? tree.left_len + _mochi_idx : _mochi_idx;})]);
    size_t left_vals_len = inorder_len;
    long long *right_vals = inorder(tree, tree.right[(int)({long long _mochi_idx = idx; _mochi_idx < 0 ? tree.right_len + _mochi_idx : _mochi_idx;})]);
    size_t right_vals_len = inorder_len;
    {
        long long* __ret3 = concat_long_long(concat_long_long(left_vals, left_vals_len, ({long long *tmp = malloc(1 * sizeof(long long)); tmp[0] = tree.values[(int)({long long _mochi_idx = idx; _mochi_idx < 0 ? tree.values_len + _mochi_idx : _mochi_idx;})]; tmp;}), 1), concat_len, right_vals, right_vals_len);
        inorder_len = concat_len;
        return __ret3;
    }
}

Tree make_tree_zero() {
    return (Tree){.values = ({long long *tmp = malloc(1 * sizeof(long long)); tmp[0] = 0LL; tmp;}), .values_len = 1, .left = ({long long *tmp = malloc(1 * sizeof(long long)); tmp[0] = -1LL; tmp;}), .left_len = 1, .right = ({long long *tmp = malloc(1 * sizeof(long long)); tmp[0] = -1LL; tmp;}), .right_len = 1, .root = 0LL};
}

Tree make_tree_seven() {
    return (Tree){.values = ({long long *tmp = malloc(7 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = 2LL; tmp[2] = 3LL; tmp[3] = 4LL; tmp[4] = 5LL; tmp[5] = 6LL; tmp[6] = 7LL; tmp;}), .values_len = 7, .left = ({long long *tmp = malloc(7 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = 3LL; tmp[2] = 5LL; tmp[3] = -1LL; tmp[4] = -1LL; tmp[5] = -1LL; tmp[6] = -1LL; tmp;}), .left_len = 7, .right = ({long long *tmp = malloc(7 * sizeof(long long)); tmp[0] = 2LL; tmp[1] = 4LL; tmp[2] = 6LL; tmp[3] = -1LL; tmp[4] = -1LL; tmp[5] = -1LL; tmp[6] = -1LL; tmp;}), .right_len = 7, .root = 0LL};
}

Tree make_tree_nine() {
    return (Tree){.values = ({long long *tmp = malloc(9 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = 2LL; tmp[2] = 3LL; tmp[3] = 4LL; tmp[4] = 5LL; tmp[5] = 6LL; tmp[6] = 7LL; tmp[7] = 8LL; tmp[8] = 9LL; tmp;}), .values_len = 9, .left = ({long long *tmp = malloc(9 * sizeof(long long)); tmp[0] = 1LL; tmp[1] = 3LL; tmp[2] = -1LL; tmp[3] = 6LL; tmp[4] = -1LL; tmp[5] = -1LL; tmp[6] = -1LL; tmp[7] = -1LL; tmp[8] = -1LL; tmp;}), .left_len = 9, .right = ({long long *tmp = malloc(9 * sizeof(long long)); tmp[0] = 2LL; tmp[1] = 4LL; tmp[2] = 5LL; tmp[3] = 7LL; tmp[4] = 8LL; tmp[5] = -1LL; tmp[6] = -1LL; tmp[7] = -1LL; tmp[8] = -1LL; tmp;}), .right_len = 9, .root = 0LL};
}

void user_main() {
    const char* *names = NULL;
    size_t names_len = 0;
    names = list_append_str(names, &names_len, "zero");
    names = list_append_str(names, &names_len, "seven");
    names = list_append_str(names, &names_len, "nine");
    Tree *trees = NULL;
    size_t trees_len = 0;
    trees = list_append_Tree(trees, &trees_len, make_tree_zero());
    trees = list_append_Tree(trees, &trees_len, make_tree_seven());
    trees = list_append_Tree(trees, &trees_len, make_tree_nine());
    long long i = 0LL;
    while (i < 3LL) {
        Tree tree = trees[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? trees_len + _mochi_idx : _mochi_idx;})];
        puts(str_concat(str_concat(str_concat("      The ", names[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? names_len + _mochi_idx : _mochi_idx;})]), " tree: "), ({long long *__tmp4 = inorder(tree, tree.root); char *__res = str_list_int(__tmp4, inorder_len); __res;})));
        Tree mirrored = mirror(tree);
        puts(str_concat(str_concat(str_concat("Mirror of ", names[(int)({long long _mochi_idx = i; _mochi_idx < 0 ? names_len + _mochi_idx : _mochi_idx;})]), " tree: "), ({long long *__tmp5 = inorder(mirrored, mirrored.root); char *__res = str_list_int(__tmp5, inorder_len); __res;})));
        i = i + 1LL;
    }
}

int main(void) {
    {
        long long __start = _now();
        user_main();
        long long __end = _now();
        long long __dur_us = (__end - __start) / 1000;
        long long __mem_bytes = _mem();
        printf("{\n  \"duration_us\": %-lld,\n  \"memory_bytes\": %-lld,\n  \"name\": \"main\"\n}\n", __dur_us, __mem_bytes);
    }
    return 0;
}
