# Code generated by Mochi transpiler 2025-08-24 15:35 +0700
defmodule Main do
  @data_dir nil
  defp _input() do
    case IO.gets("") do
      nil -> ""
      :eof -> ""
      line -> String.trim(line)
    end
  end
  defp _bench_now() do
    System.monotonic_time(:microsecond)
  end
  defp _mem() do
    :erlang.process_info(self(), :memory) |> elem(1)
  end
  def binomial_coefficient(n, k) do
    try do
      result = 1
      kk = k
      kk = if k > n - k do
        kk = n - k
        kk
      else
        kk
      end
      {result} = Enum.reduce((0..(kk - 1)//1), {result}, fn i, {result} ->
        result = result * (n - i)
        result = div(result, (i + 1))
        {result}
      end)
      throw {:return, result}
    catch
      {:return, val} -> val
    end
  end
  def catalan_number(node_count) do
    try do
      throw {:return, div(binomial_coefficient(2 * node_count, node_count), (node_count + 1))}
    catch
      {:return, val} -> val
    end
  end
  def factorial(n) do
    try do
      if n < 0 do
        IO.puts("factorial() not defined for negative values")
        throw {:return, 0}
      end
      result = 1
      {result} = Enum.reduce((1..((n + 1) - 1)//1), {result}, fn i, {result} ->
        result = result * i
        {result}
      end)
      throw {:return, result}
    catch
      {:return, val} -> val
    end
  end
  def binary_tree_count(node_count) do
    try do
      throw {:return, catalan_number(node_count) * factorial(node_count)}
    catch
      {:return, val} -> val
    end
  end
  def main() do
    :erlang.garbage_collect()
    mem_start = _mem()
    t_start = _bench_now()
    IO.puts("Enter the number of nodes:")
    Process.put(:input_str, _input())
    Process.put(:node_count, String.to_integer(Process.get(:input_str)))
    if Process.get(:node_count) <= 0 do
      IO.puts("We need some nodes to work with.")
    else
      bst = catalan_number(Process.get(:node_count))
      bt = binary_tree_count(Process.get(:node_count))
      IO.puts("Given #{Process.get(:node_count)} nodes, there are #{bt} binary trees and #{bst} binary search trees.")
    end
    mem_end = _mem()
    duration_us = max(_bench_now() - t_start, 1)
    :erlang.garbage_collect()
    mem_diff = abs(mem_end - mem_start)
    IO.puts("{\n  \"duration_us\": #{duration_us},\n  \"memory_bytes\": #{mem_diff},\n  \"name\": \"main\"\n}")
  end
end
Main.main()
