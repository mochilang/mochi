// Generated by Mochi 0.10.65 (commit 5cabcd7927) on 2025-08-14 17:09 +0700
#pragma warning disable 0169, 0649
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.Json;
using System.Collections;
using System.Globalization;

class Node {
    public string pos;
    public string[] path;
    public override string ToString() => $"Node {{pos = \"{pos}\", path = {path}}}";
}
#pragma warning disable CS0162
class Program {
    static bool seededNow = false;
    static long nowSeed = 0;
    static long _now() {
        if (!seededNow) {
            var s = Environment.GetEnvironmentVariable("MOCHI_NOW_SEED");
            if (long.TryParse(s, out var v)) {
                nowSeed = v;
                seededNow = true;
            } else if (!string.IsNullOrEmpty(Environment.GetEnvironmentVariable("MOCHI_BENCHMARK"))) {
                nowSeed = 1170750916L;
                seededNow = true;
            }
        }
        var r = nowSeed;
        nowSeed++;
        return r;
    }
    static long _mem() {
        return GC.GetTotalAllocatedBytes(true);
    }
    static long _len(object v) {
        if (v is Array a) return a.Length;
        if (v is string s) return s.Length;
        if (v is System.Collections.ICollection c) return c.Count;
        return Convert.ToString(v).Length;
    }
    static T _idx<T>(T[] arr, long i) {
        if (arr == null) return default(T);
        if (i < 0) i += arr.Length;
        if (i < 0 || i >= arr.Length) return default(T);
        return arr[(int)i];
    }
    static string _substr(string s, long start, long end) {
        if (start < 0) start = 0;
        if (end < 0) end = 0;
        if (start > s.Length) start = s.Length;
        if (end > s.Length) end = s.Length;
        if (start > end) start = end;
        return s.Substring((int)start, (int)(end - start));
    }
    static string _fmt(object v) {
        if (v is Array a) {
            var parts = new List<string>();
            foreach (var x in a) parts.Add(_fmt(x));
            return "[" + string.Join(", ", parts) + "]";
        }
        if (v is System.Collections.IDictionary d) {
            var keys = new List<string>();
            foreach (var k in d.Keys) keys.Add(k.ToString());
            keys.Sort();
            var parts = new List<string>();
            foreach (var k in keys) parts.Add(k + ":" + _fmt(d[k]));
            return "map[" + string.Join(", ", parts) + "]";
        }
        if (v is System.Collections.IEnumerable e && !(v is string)) {
            var parts = new List<string>();
            foreach (var x in e) parts.Add(_fmt(x));
            return string.Join(", ", parts);
        }
        if (v is string s) return "\"" + s.Replace("\"", "\\\"") + "\"";
        if (v is bool b) return b ? "true" : "false";
        return Convert.ToString(v, CultureInfo.InvariantCulture);
    }
    static string _fmtStr(object v) {
        if (v is Array a) {
            var parts = new List<string>();
            foreach (var x in a) parts.Add(_fmtStr(x));
            return "[" + string.Join(" ", parts) + "]";
        }
        if (v is System.Collections.IDictionary d) {
            var keys = new List<string>();
            foreach (var k in d.Keys) keys.Add(k.ToString());
            keys.Sort();
            var parts = new List<string>();
            foreach (var k in keys) parts.Add(k + ":" + _fmtStr(d[k]));
            return "map[" + string.Join(" ", parts) + "]";
        }
        if (v is System.Collections.IEnumerable e && !(v is string)) {
            var parts = new List<string>();
            foreach (var x in e) parts.Add(_fmtStr(x));
            return string.Join(" ", parts);
        }
        if (v is string s) return "\"" + s.Replace("\"", "\\\"") + "\"";
        if (v is bool b) return b ? "true" : "false";
        if (v is double dv) return dv.ToString("R", CultureInfo.InvariantCulture);
        if (v is float fv) return fv.ToString("R", CultureInfo.InvariantCulture);
        return Convert.ToString(v, CultureInfo.InvariantCulture);
    }
    public static string _fmtTop(object v) {
        if (v is Array a && a.Length > 0 && a.GetValue(0) is Array) {
            var parts = new List<string>();
            foreach (var x in a) parts.Add(_fmt(x));
            return string.Join(" ", parts);
        }
        if (v is string s) return s;
        return _fmt(v);
    }
    static string __name__ = "__main__";
    static long[][] grid_0 = new long[][]{new long[]{0, 0, 0, 0, 0, 0, 0}, new long[]{0, 1, 0, 0, 0, 0, 0}, new long[]{0, 0, 0, 0, 0, 0, 0}, new long[]{0, 0, 1, 0, 0, 0, 0}, new long[]{1, 0, 1, 0, 0, 0, 0}, new long[]{0, 0, 0, 0, 0, 0, 0}, new long[]{0, 0, 0, 0, 1, 0, 0}};
    static long[][] delta_1 = new long[][]{new long[]{-1, 0}, new long[]{0, -1}, new long[]{1, 0}, new long[]{0, 1}};
    static string start_60 = Program.key(0, 0);
    static string goal_61 = Program.key((grid_0.Length - 1), (_idx(grid_0, 0).Length - 1));
    static string[] path1_62 = Program.bfs(start_60, goal_61);
    public static string key(long y_2, long x_3) {
        return ((_fmtStr(y_2) + ",") + _fmtStr(x_3));
    }

    public static long parse_int(string s_4) {
        long value_5 = 0;
        long i_6 = 0;
        while ((i_6 < s_4.Length)) {
            string c_7 = s_4.Substring((int)(i_6), 1);
            value_5 = ((value_5 * 10) + long.Parse(c_7));
            i_6 = (i_6 + 1);
        };
        return value_5;
    }

    public static long[] parse_key(string k_8) {
        long idx_9 = 0;
        while (((idx_9 < k_8.Length) && (_substr(k_8, idx_9, (idx_9 + 1)) != ","))) {
            idx_9 = (idx_9 + 1);
        };
        long y_10 = Program.parse_int(_substr(k_8, 0, idx_9));
        long x_11 = Program.parse_int(_substr(k_8, (idx_9 + 1), k_8.Length));
        return new long[]{y_10, x_11};
    }

    public static string[] neighbors(string pos_12) {
        long[] coords_13 = Program.parse_key(pos_12);
        long y_14 = _idx(coords_13, 0);
        long x_15 = _idx(coords_13, 1);
        string[] res_16 = new string[]{};
        long i_17 = 0;
        while ((i_17 < delta_1.Length)) {
            long ny_18 = (y_14 + _idx(_idx(delta_1, i_17), 0));
            long nx_19 = (x_15 + _idx(_idx(delta_1, i_17), 1));
            if (((((ny_18 >= 0) && (ny_18 < grid_0.Length)) && (nx_19 >= 0)) && (nx_19 < _idx(grid_0, 0).Length))) {
                if ((_idx(_idx(grid_0, ny_18), nx_19) == 0)) {
                    res_16 = ((Func<string[]>)(() => { var _tmp = res_16.ToList(); _tmp.Add(Program.key(ny_18, nx_19)); return _tmp.ToArray(); }))();
                }
            }
            i_17 = (i_17 + 1);
        };
        return res_16;
    }

    public static string[] reverse_list(string[] lst_20) {
        string[] res_21 = new string[]{};
        long i_22 = (lst_20.Length - 1);
        while ((i_22 >= 0)) {
            res_21 = ((Func<string[]>)(() => { var _tmp = res_21.ToList(); _tmp.Add(_idx(lst_20, i_22)); return _tmp.ToArray(); }))();
            i_22 = (i_22 - 1);
        };
        return res_21;
    }

    public static string[] bfs(string start_23, string goal_24) {
        Node[] queue_25 = new Node[]{};
        queue_25 = ((Func<Node[]>)(() => { var _tmp = queue_25.ToList(); _tmp.Add(new Node{pos = start_23, path = new string[]{start_23}}); return _tmp.ToArray(); }))();
        long head_26 = 0;
        Dictionary<string, bool> visited_27 = new Dictionary<string, bool>{{"start_23", true}};
        while ((head_26 < queue_25.Length)) {
            Node node_28 = _idx(queue_25, head_26);
            head_26 = (head_26 + 1);
            if ((node_28.pos == goal_24)) {
                return node_28.path;
            }
            string[] neigh_29 = Program.neighbors(node_28.pos);
            long i_30 = 0;
            while ((i_30 < neigh_29.Length)) {
                string npos_31 = _idx(neigh_29, i_30);
                if ((!(visited_27.ContainsKey(npos_31)))) {
                    visited_27[npos_31] = true;
                    string[] new_path_32 = ((Func<string[]>)(() => { var _tmp = node_28.path.ToList(); _tmp.Add(npos_31); return _tmp.ToArray(); }))();
                    queue_25 = ((Func<Node[]>)(() => { var _tmp = queue_25.ToList(); _tmp.Add(new Node{pos = npos_31, path = new_path_32}); return _tmp.ToArray(); }))();
                }
                i_30 = (i_30 + 1);
            }
        };
        return new string[]{};
    }

    public static string[] bidirectional_bfs(string start_33, string goal_34) {
        Node[] queue_f_35 = new Node[]{};
        Node[] queue_b_36 = new Node[]{};
        queue_f_35 = ((Func<Node[]>)(() => { var _tmp = queue_f_35.ToList(); _tmp.Add(new Node{pos = start_33, path = new string[]{start_33}}); return _tmp.ToArray(); }))();
        queue_b_36 = ((Func<Node[]>)(() => { var _tmp = queue_b_36.ToList(); _tmp.Add(new Node{pos = goal_34, path = new string[]{goal_34}}); return _tmp.ToArray(); }))();
        long head_f_37 = 0;
        long head_b_38 = 0;
        Dictionary<string, string[]> visited_f_39 = new Dictionary<string, string[]>{{"start_33", new string[]{start_33}}};
        Dictionary<string, string[]> visited_b_40 = new Dictionary<string, string[]>{{"goal_34", new string[]{goal_34}}};
        while (((head_f_37 < queue_f_35.Length) && (head_b_38 < queue_b_36.Length))) {
            Node node_f_41 = _idx(queue_f_35, head_f_37);
            head_f_37 = (head_f_37 + 1);
            string[] neigh_f_42 = Program.neighbors(node_f_41.pos);
            long i_43 = 0;
            while ((i_43 < neigh_f_42.Length)) {
                string npos_44 = _idx(neigh_f_42, i_43);
                if ((!(visited_f_39.ContainsKey(npos_44)))) {
                    string[] new_path_45 = ((Func<string[]>)(() => { var _tmp = node_f_41.path.ToList(); _tmp.Add(npos_44); return _tmp.ToArray(); }))();
                    visited_f_39[npos_44] = new_path_45;
                    if ((visited_b_40.ContainsKey(npos_44))) {
                        string[] rev_46 = Program.reverse_list((visited_b_40.ContainsKey(npos_44) ? visited_b_40[npos_44] : null));
                        long j_47 = 1;
                        while ((j_47 < rev_46.Length)) {
                            new_path_45 = ((Func<string[]>)(() => { var _tmp = new_path_45.ToList(); _tmp.Add(_idx(rev_46, j_47)); return _tmp.ToArray(); }))();
                            j_47 = (j_47 + 1);
                        }
                        return new_path_45;
                    }
                    queue_f_35 = ((Func<Node[]>)(() => { var _tmp = queue_f_35.ToList(); _tmp.Add(new Node{pos = npos_44, path = new_path_45}); return _tmp.ToArray(); }))();
                }
                i_43 = (i_43 + 1);
            }
            Node node_b_48 = _idx(queue_b_36, head_b_38);
            head_b_38 = (head_b_38 + 1);
            string[] neigh_b_49 = Program.neighbors(node_b_48.pos);
            long j_50 = 0;
            while ((j_50 < neigh_b_49.Length)) {
                string nposb_51 = _idx(neigh_b_49, j_50);
                if ((!(visited_b_40.ContainsKey(nposb_51)))) {
                    string[] new_path_b_52 = ((Func<string[]>)(() => { var _tmp = node_b_48.path.ToList(); _tmp.Add(nposb_51); return _tmp.ToArray(); }))();
                    visited_b_40[nposb_51] = new_path_b_52;
                    if ((visited_f_39.ContainsKey(nposb_51))) {
                        string[] path_f_53 = (visited_f_39.ContainsKey(nposb_51) ? visited_f_39[nposb_51] : null);
                        new_path_b_52 = Program.reverse_list(new_path_b_52);
                        long t_54 = 1;
                        while ((t_54 < new_path_b_52.Length)) {
                            path_f_53 = ((Func<string[]>)(() => { var _tmp = path_f_53.ToList(); _tmp.Add(_idx(new_path_b_52, t_54)); return _tmp.ToArray(); }))();
                            t_54 = (t_54 + 1);
                        }
                        return path_f_53;
                    }
                    queue_b_36 = ((Func<Node[]>)(() => { var _tmp = queue_b_36.ToList(); _tmp.Add(new Node{pos = nposb_51, path = new_path_b_52}); return _tmp.ToArray(); }))();
                }
                j_50 = (j_50 + 1);
            }
        };
        return new string[]{start_33};
    }

    public static string path_to_string(string[] path_55) {
        if ((path_55.Length == 0)) {
            return "[]";
        };
        long[] first_56 = Program.parse_key(_idx(path_55, 0));
        string s_57 = (((("[(" + _fmtStr(_idx(first_56, 0))) + ", ") + _fmtStr(_idx(first_56, 1))) + ")");
        long i_58 = 1;
        while ((i_58 < path_55.Length)) {
            long[] c_59 = Program.parse_key(_idx(path_55, i_58));
            s_57 = (((((s_57 + ", (") + _fmtStr(_idx(c_59, 0))) + ", ") + _fmtStr(_idx(c_59, 1))) + ")");
            i_58 = (i_58 + 1);
        };
        s_57 = (s_57 + "]");
        return s_57;
    }

    static void Main() {
        _ = __name__;
        {
            var __memStart = _mem();
            var __start = _now();
            Console.WriteLine(Program._fmtTop(Program.path_to_string(path1_62)));
            string[] path2_63 = Program.bidirectional_bfs(start_60, goal_61);
            Console.WriteLine(Program._fmtTop(Program.path_to_string(path2_63)));
            var __end = _now();
            var __memEnd = _mem();
            var __dur = (__end - __start);
            if (__dur <= 0) __dur = 1;
            var __memDiff = __memEnd - __memStart;
            if (__memDiff <= 0) __memDiff = __memEnd;
            var __bench = new Dictionary<string, object>{{"name", "main"}, {"duration_us", __dur}, {"memory_bytes", __memDiff}};
            Console.WriteLine(JsonSerializer.Serialize(__bench));
        }
    }
}
