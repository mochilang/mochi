// Generated by Mochi transpiler
import 'dart:convert';
import 'dart:io';

int _nowSeed = 0;
bool _nowSeeded = false;
void _initNow() {
  var s = Platform.environment['MOCHI_NOW_SEED'];
  if (s != null && s.isNotEmpty) {
    var v = int.tryParse(s);
    if (v != null) {
      _nowSeed = v;
      _nowSeeded = true;
    }
  }
}
int _now() {
  if (_nowSeeded) {
    _nowSeed = (_nowSeed * 1664525 + 1013904223) % 2147483647;
    return _nowSeed;
  }
  return DateTime.now().microsecondsSinceEpoch;
}

String _str(dynamic v) => v.toString();


Never _error(dynamic msg) {
  throw Exception(msg.toString());
}

class Point3d {
  double x;
  double y;
  double z;
  Point3d({required this.x, required this.y, required this.z});
}

class Vector3d {
  double x;
  double y;
  double z;
  Vector3d({required this.x, required this.y, required this.z});
}

Vector3d create_vector(Point3d p1, Point3d p2) {
  double vx = p2.x - p1.x;
  double vy = p2.y - p1.y;
  double vz = p2.z - p1.z;
  return Vector3d(x: vx, y: vy, z: vz);
}

Vector3d get_3d_vectors_cross(Vector3d ab, Vector3d ac) {
  double cx = ab.y * ac.z - ab.z * ac.y;
  double cy = ab.z * ac.x - ab.x * ac.z;
  double cz = ab.x * ac.y - ab.y * ac.x;
  return Vector3d(x: cx, y: cy, z: cz);
}

double pow10(int exp) {
  double result = 1.0;
  int i = 0;
  while (i < exp) {
    result = result * 10.0;
    i = i + 1;
  }
  return result;
}

double round_float(double x, int digits) {
  double factor = pow10(digits);
  double v = x * factor;
  if (v >= 0.0) {
    v = v + 0.5;
  } else {
    v = v - 0.5;
  }
  int t = v.toInt();
  return t.toDouble() / factor;
}

bool is_zero_vector(Vector3d v, int accuracy) {
  return round_float(v.x, accuracy) == 0.0 && round_float(v.y, accuracy) == 0.0 && round_float(v.z, accuracy) == 0.0;
}

bool are_collinear(Point3d a, Point3d b, Point3d c, int accuracy) {
  Vector3d ab = create_vector(a, b);
  Vector3d ac = create_vector(a, c);
  Vector3d cross = get_3d_vectors_cross(ab, ac);
  return is_zero_vector(cross, accuracy);
}

void test_are_collinear() {
  Point3d p1 = Point3d(x: 0.0, y: 0.0, z: 0.0);
  Point3d p2 = Point3d(x: 1.0, y: 1.0, z: 1.0);
  Point3d p3 = Point3d(x: 2.0, y: 2.0, z: 2.0);
  if (!are_collinear(p1, p2, p3, 10)) {
    _error("collinear test failed");
  }
  Point3d q3 = Point3d(x: 1.0, y: 2.0, z: 3.0);
  if (are_collinear(p1, p2, q3, 10)) {
    _error("non-collinear test failed");
  }
}

void _main() {
  test_are_collinear();
  Point3d a = Point3d(x: 4.802293498137402, y: 3.536233125455244, z: 0.0);
  Point3d b = Point3d(x: -2.186788107953106, y: -9.24561398001649, z: 7.141509524846482);
  Point3d c = Point3d(x: 1.530169574640268, y: -2.447927606600034, z: 3.343487096469054);
  print(_str(are_collinear(a, b, c, 10)));
  Point3d d = Point3d(x: 2.399001826862445, y: -2.452009976680793, z: 4.464656666157666);
  Point3d e = Point3d(x: -3.682816335934376, y: 5.753788986533145, z: 9.490993909044244);
  Point3d f = Point3d(x: 1.962903518985307, y: 3.741415730125627, z: 7.0);
  print(_str(are_collinear(d, e, f, 10)));
}

void _start() {
  var _benchMem0 = ProcessInfo.currentRss;
  var _benchSw = Stopwatch()..start();
  _initNow();
  {
  var _benchMem0 = ProcessInfo.currentRss;
  var _benchSw = Stopwatch()..start();
  _main();
  _benchSw.stop();
  var _benchMem1 = ProcessInfo.currentRss;
  print(jsonEncode({"duration_us": _benchSw.elapsedMicroseconds, "memory_bytes": (_benchMem1 - _benchMem0).abs(), "name": "main"}));
}
  _benchSw.stop();
  var _benchMem1 = ProcessInfo.currentRss;
  print(jsonEncode({"duration_us": _benchSw.elapsedMicroseconds, "memory_bytes": (_benchMem1 - _benchMem0).abs(), "name": "_start"}));
}

void main() => _start();
