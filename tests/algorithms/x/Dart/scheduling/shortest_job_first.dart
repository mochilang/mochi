// Generated by Mochi transpiler
dynamic _substr(dynamic s, num start, num end) {
  int n = s.length;
  int s0 = start.toInt();
  int e0 = end.toInt();
  if (s0 < 0) s0 += n;
  if (e0 < 0) e0 += n;
  if (s0 < 0) s0 = 0;
  if (s0 > n) s0 = n;
  if (e0 < 0) e0 = 0;
  if (e0 > n) e0 = n;
  if (s0 > e0) s0 = e0;
  if (s is String) {
    return s.substring(s0, e0);
  }
  return s.sublist(s0, e0);
}

String _str(dynamic v) { if (v is double && v == v.roundToDouble()) { return v.toInt().toString(); } return v.toString(); }

List<int> calculate_waitingtime(List<int> arrival_time, List<int> burst_time, int no_of_processes) {
  List<int> remaining_time = <int>[];
  int i = 0;
  while (i < no_of_processes) {
    remaining_time = (remaining_time..add(burst_time[i]));
    i = i + 1;
  }
  List<int> waiting_time = <int>[];
  i = 0;
  while (i < no_of_processes) {
    waiting_time = (waiting_time..add(0));
    i = i + 1;
  }
  int complete = 0;
  int increment_time = 0;
  int minm = 1000000000;
  int short = 0;
  bool check = false;
  while (complete != no_of_processes) {
    int j = 0;
    while (j < no_of_processes) {
    if (arrival_time[j] <= increment_time && remaining_time[j] > 0 && remaining_time[j] < minm) {
    minm = remaining_time[j];
    short = j;
    check = true;
  }
    j = j + 1;
  }
    if (!check) {
    increment_time = increment_time + 1;
    continue;
  }
    while (remaining_time.length <= short) { remaining_time.add(0); } remaining_time[short] = remaining_time[short] - 1;
    minm = remaining_time[short];
    if (minm == 0) {
    minm = 1000000000;
  }
    if (remaining_time[short] == 0) {
    complete = complete + 1;
    check = false;
    int finish_time = increment_time + 1;
    int finar = finish_time - arrival_time[short];
    while (waiting_time.length <= short) { waiting_time.add(0); } waiting_time[short] = finar - burst_time[short];
    if (waiting_time[short] < 0) {
    while (waiting_time.length <= short) { waiting_time.add(0); } waiting_time[short] = 0;
  };
  }
    increment_time = increment_time + 1;
  }
  return waiting_time;
}

List<int> calculate_turnaroundtime(List<int> burst_time, int no_of_processes, List<int> waiting_time) {
  List<int> turn_around_time = <int>[];
  int i = 0;
  while (i < no_of_processes) {
    turn_around_time = (turn_around_time..add(burst_time[i] + waiting_time[i]));
    i = i + 1;
  }
  return turn_around_time;
}

double to_float(int x) {
  return x * 1.0;
}

dynamic calculate_average_times(List<int> waiting_time, List<int> turn_around_time, int no_of_processes) {
  int total_waiting_time = 0;
  int total_turn_around_time = 0;
  int i = 0;
  while (i < no_of_processes) {
    total_waiting_time = total_waiting_time + waiting_time[i];
    total_turn_around_time = total_turn_around_time + turn_around_time[i];
    i = i + 1;
  }
  double avg_wait = total_waiting_time.toDouble() / no_of_processes.toDouble();
  double avg_turn = total_turn_around_time.toDouble() / no_of_processes.toDouble();
  print("Average waiting time = " + _str(avg_wait));
  print("Average turn around time = " + _str(avg_turn));
}

void main() {
  print("[" + calculate_waitingtime([1, 2, 3, 4], [3, 3, 5, 1], 4).join(', ') + "]");
  print("[" + calculate_waitingtime([1, 2, 3], [2, 5, 1], 3).join(', ') + "]");
  print("[" + calculate_waitingtime([2, 3], [5, 1], 2).join(', ') + "]");
  print("[" + calculate_turnaroundtime([3, 3, 5, 1], 4, [0, 3, 5, 0]).join(', ') + "]");
  print("[" + calculate_turnaroundtime([3, 3], 2, [0, 3]).join(', ') + "]");
  print("[" + calculate_turnaroundtime([8, 10, 1], 3, [1, 0, 3]).join(', ') + "]");
  calculate_average_times([0, 3, 5, 0], [3, 6, 10, 1], 4);
  calculate_average_times([2, 3], [3, 6], 2);
  calculate_average_times([10, 4, 3], [2, 7, 6], 3);
}
