# Code generated by Mochi transpiler.
# Version 0.10.65, generated on 2025-08-13 16:39 +0700
import sys
if hasattr(sys, "set_int_max_str_digits"):
    sys.set_int_max_str_digits(0)
import os
if os.path.dirname(__file__) in sys.path:
    sys.path.remove(os.path.dirname(__file__))


def _append(lst, v):
    if lst is None:
        lst = []
    lst.append(v)
    return lst

SAMPLE_HTML = "<div class=\"grid-x pharmCard\"><p class=\"list-title\">Pharmacy A</p><span class=\"price price-large\">$10.00</span></div><div class=\"grid-x pharmCard\"><p class=\"list-title\">Pharmacy B</p><span class=\"price price-large\">$12.50</span></div>"
def find_substring(s, sub, from_):
    i = from_
    while i <= len(s) - len(sub):
        j = 0
        while j < len(sub) and s[i + j:i + j + 1] == sub[j:j + 1]:
            j = j + 1
        if j == len(sub):
            return i
        i = i + 1
    return -1
def fetch_pharmacy_and_price_list(drug_name, zip_code):
    if drug_name == "" or zip_code == "":
        return None
    results = []
    pos = 0
    block_tag = "<div class=\"grid-x pharmCard\">"
    name_tag = "<p class=\"list-title\">"
    price_tag = "<span class=\"price price-large\">"
    while True:
        div_idx = find_substring(SAMPLE_HTML, block_tag, pos)
        if div_idx < 0:
            break
        name_start = find_substring(SAMPLE_HTML, name_tag, div_idx)
        if name_start < 0:
            break
        name_start = name_start + len(name_tag)
        name_end = find_substring(SAMPLE_HTML, "</p>", name_start)
        if name_end < 0:
            break
        name = SAMPLE_HTML[name_start:name_end]
        price_start = find_substring(SAMPLE_HTML, price_tag, name_end)
        if price_start < 0:
            break
        price_start = price_start + len(price_tag)
        price_end = find_substring(SAMPLE_HTML, "</span>", price_start)
        if price_end < 0:
            break
        price = SAMPLE_HTML[price_start:price_end]
        results = _append(results, {"pharmacy_name": name, "price": price})
        pos = price_end
    return results
pharmacy_price_list = fetch_pharmacy_and_price_list("aspirin", "30303")
if pharmacy_price_list != None:
    i = 0
    while i < len(pharmacy_price_list):
        entry = pharmacy_price_list[i]
        print("Pharmacy: " + entry.get("pharmacy_name", "") + " Price: " + entry.get("price", ""))
        i = i + 1
else:
    print("No results found")

