# Code generated by Mochi transpiler.
# Version 0.10.65, generated on 2025-08-13 16:39 +0700
import sys
if hasattr(sys, "set_int_max_str_digits"):
    sys.set_int_max_str_digits(0)
import os
if os.path.dirname(__file__) in sys.path:
    sys.path.remove(os.path.dirname(__file__))


def _append(lst, v):
    if lst is None:
        lst = []
    lst.append(v)
    return lst

def get_failure_array(pattern):
    failure = [0]
    i = 0
    j = 1
    while j < len(pattern):
        if pattern[i:i + 1] == pattern[j:j + 1]:
            i = i + 1
        else:
            if i > 0:
                i = failure[i - 1]
                continue
        j = j + 1
        failure = _append(failure, i)
    return failure
def knuth_morris_pratt(text, pattern):
    failure = get_failure_array(pattern)
    i = 0
    j = 0
    while i < len(text):
        if pattern[j:j + 1] == text[i:i + 1]:
            if j == len(pattern) - 1:
                return i - j
            j = j + 1
        else:
            if j > 0:
                j = failure[j - 1]
                continue
        i = i + 1
    return -1
text = "abcxabcdabxabcdabcdabcy"
pattern = "abcdabcy"
print(knuth_morris_pratt(text, pattern))

