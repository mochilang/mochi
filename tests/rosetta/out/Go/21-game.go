//go:build ignore

// Generated by Mochi compiler v0.10.28 on 2006-01-02T15:04:05Z

package main

import (
	"fmt"
	"strings"
	"time"
)

type v map[string]any

// line 3
func parseIntStr(str string) int {
	i := 0
	neg := false
	if (len(any(str)) > 0) && (string([]rune(str)[0:1]) == "-") {
		neg = true
		i = 1
	}
	n := 0
	digits := map[string]int{
		"0": 0,
		"1": 1,
		"2": 2,
		"3": 3,
		"4": 4,
		"5": 5,
		"6": 6,
		"7": 7,
		"8": 8,
		"9": 9,
	}
	for i < len(any(str)) {
		n = ((n * 10) + digits[string([]rune(str)[i:(i+1)])])
		i = (i + 1)
	}
	if neg {
		n = -n
	}
	return n
}

// line 31
func main() {
	total := 0
	computer := ((int64(time.Now().UnixNano()) % int64(2)) == 0)
	fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("Enter q to quit at any time\n")), "\n"))
	if computer {
		fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("The computer will choose first")), "\n"))
	} else {
		fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("You will choose first")), "\n"))
	}
	fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("\n\nRunning total is now 0\n\n")), "\n"))
	round := 1
	done := false
	for !(done) {
		fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("ROUND "+fmt.Sprint(any(round))+":\n\n")), "\n"))
		i := 0
		for (i < 2) && (!(done)) {
			if computer {
				choice := 0
				if total < 18 {
					choice = (int64((int64(time.Now().UnixNano()) % int64(3))) + int64(1))
				} else {
					choice = (21 - total)
				}
				total = (total + choice)
				fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("The computer chooses "+fmt.Sprint(any(choice)))), "\n"))
				fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("Running total is now "+fmt.Sprint(any(total)))), "\n"))
				if total == 21 {
					fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("\nSo, commiserations, the computer has won!")), "\n"))
					done = true
				}
			} else {
				for {
					fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("Your choice 1 to 3 : ")), "\n"))
					line := _input()
					if (line == "q") || (line == "Q") {
						fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("OK, quitting the game")), "\n"))
						done = true
						break
					}
					num := parseIntStr(line)
					if (num < 1) || (num > 3) {
						if (total + num) > 21 {
							fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("Too big, try again")), "\n"))
						} else {
							fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("Out of range, try again")), "\n"))
						}
						continue
					}
					if (total + num) > 21 {
						fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("Too big, try again")), "\n"))
						continue
					}
					total = (total + num)
					fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("Running total is now "+fmt.Sprint(any(total)))), "\n"))
					break
				}
				if total == 21 {
					fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("\nSo, congratulations, you've won!")), "\n"))
					done = true
				}
			}
			fmt.Println(strings.TrimSuffix(fmt.Sprintln(any("\n")), "\n"))
			computer = !(computer)
			i = (i + 1)
		}
		round = (round + 1)
	}
}

func main() {
	main()
}

func _input() string {
	var s string
	fmt.Scanln(&s)
	return s
}
