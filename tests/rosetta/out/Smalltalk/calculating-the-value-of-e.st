" Generated by Mochi compiler v0.10.30 on 2006-01-02T15:04:05Z
"
| epsilon absf pow10 r i formatFloat scale scaled n digits intPart fracPart factval e term |
Object subclass: #BreakSignal instanceVariableNames: '' classVariableNames: '' poolDictionaries: '' category: nil!.
epsilon := 1e-15.
absf := [:x | ((x < 0)) ifTrue: [
-x.
] .
x. ].
pow10 := [:n | r := 1.
i := 0.
[(i < n)] whileTrue: [.
r := (r * 10).
i := (i + 1).
].
.
r. ].
formatFloat := [:f :prec | scale := pow10 value: prec.
scaled := (((f * scale)) + 0.5).
n := scaled asInteger.
digits := (n asString).
[(((digits size)) <= prec)] whileTrue: [.
digits := ('0' + digits).
].
.
intPart := (digits copyFrom: 0 to: (((digits size)) - prec)).
fracPart := (digits copyFrom: (((digits size)) - prec) to: (digits size)).
(((intPart + '.')) + fracPart). ].
factval := 1.
e := 2.
n := 2.
term := 1.
[.
[true] whileTrue: [.
factval := (factval * n).
n := (n + 1).
term := (1 / (factval asFloat)).
e := (e + term).
(((absf value: term) < epsilon)) ifTrue: [
BreakSignal signal.
] .
].
] on: BreakSignal do: [:ex | ].
Transcript show: ((('e = ') + (formatFloat value: e value: 15))) printString; cr.
