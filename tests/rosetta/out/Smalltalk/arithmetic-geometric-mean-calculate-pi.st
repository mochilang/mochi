" Generated by Mochi compiler v0.10.26 on 2025-07-16T09:48:36Z
"
| a abs agmPi diff g guess i main pi pow sqrtApprox sum t u |
abs := [:x | ((x < 0)) ifTrue: [
  -x
] .
x ].
sqrtApprox := [:x | guess := x.
i := 0.
[(i < 20)] whileTrue: [
  guess := ((guess + (x / guess)) / 2).
  i := (i + 1).
]
.
guess ].
agmPi := [ | a := 1.
g := (1 / sqrtApprox value: 2).
sum := 0.
pow := 2.
[(abs value: (a - g) > 1e-15)] whileTrue: [
  t := ((a + g) / 2).
  u := sqrtApprox value: (a * g).
  a := t.
  g := u.
  pow := (pow * 2).
  diff := ((a * a) - (g * g)).
  sum := (sum + (diff * pow)).
]
.
pi := (((4 * a) * a) / (1 - sum)).
pi ].
main := [ | Transcript show: ((agmPi value asString)) printString; cr. ].
main value.
