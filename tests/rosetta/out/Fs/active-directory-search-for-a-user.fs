// Generated by Mochi compiler v0.10.26 on 2006-01-02T15:04:05Z
open System

let search_user (directory) (username) =
    directory.[username]
let main () =
    let client: obj = dict [("Base", "dc=example,dc=com"); ("Host", "ldap.example.com"); ("Port", 389); ("GroupFilter", "(memberUid=%s)")]
    let directory: System.Collections.Generic.IDictionary<string, string list> = dict [("username", ["admins"; "users"]); ("john", ["users"])]
    let groups: obj = search_user directory "username"
    if List.length groups > 0 then
        let mutable out: string = "Groups: ["
        let mutable i: int = 0
        while i < List.length groups do
            out <- out + "\"" + groups.[i] + "\""
            if i < List.length groups - 1 then
                out <- out + ", "
            i <- i + 1
        out <- out + "]"
        printfn "%s" out
    else
        printfn "%s" "User not found"
printfn "%A" (main())
