// Generated by Mochi compiler v0.10.26 on 2025-07-16T11:36:06Z
program AmicablePairs;
{$mode objfpc}
{$modeswitch nestedprocvars}
uses SysUtils, fgl, fphttpclient, Classes, Variants, fpjson, jsonparser, fpjsonrtti;

type
  generic TArray<T> = array of T;

function pfacSum(i: integer): integer;
var
  p: integer;
  sum: function(p0: Variant): double is nested;
begin
  sum := 0;
  p := 1;
  while (p <= i div 2) do
  begin
    if (i mod p = 0) then ;
    p := p + 1;
  end;
  result := sum;
  exit;
end;

function pad(n: integer; width: integer): string;
var
  s: Variant;
begin
  s := IntToStr(n);
  while (Length(s) < width) do
  begin
    s := ' ' + s;
  end;
  result := s;
  exit;
end;

function main(): integer;
var
  i: integer;
  m: specialize TArray<integer>;
  n: integer;
  sums: specialize TArray<integer>;
begin
  sums := specialize TArray<integer>([]);
  i := 0;
  while (i < 20000) do
  begin
    sums := specialize _appendList<Variant>(sums, 0);
    i := i + 1;
  end;
  i := 1;
  while (i < 20000) do
  begin
    sums[i] := pfacSum(i);
    i := i + 1;
  end;
  writeln('The amicable pairs below 20,000 are:');
  n := 2;
  while (n < 19999) do
  begin
    m := sums[n];
    if (((m > n) and (m < 20000)) and (n = sums[m])) then ;
    n := n + 1;
  end;
end;

generic function _appendList<T>(arr: specialize TArray<T>; val: T): specialize TArray<T>;
var i,n: Integer;
begin
  n := Length(arr);
  SetLength(Result, n + 1);
  for i := 0 to n - 1 do
    Result[i] := arr[i];
  Result[n] := val;
end;

begin
  main();
end.
