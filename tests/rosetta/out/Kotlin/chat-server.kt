// Generated by Mochi compiler v0.10.28 on 2006-01-02T15:04:05Z
fun <T> append(list: MutableList<T>, item: T): MutableList<T> {
    val res = list.toMutableList()
    res.add(item)
    return res
}
// Code generated from chat-server.mochi

/**
 * Auto-generated from Mochi
 * @param names MutableList<String>
 * @param name String
 * @return MutableList<String>
 */
fun removeName(names: MutableList<String>, name: String): MutableList<String> {
    var out: MutableList<String> = mutableListOf<String>()
    for (n in names) {
        if (n != name) {
            out = append(out, n)
        }
    }
    return out
}

/**
 * Auto-generated from Mochi
 */
fun main(): Unit {
    var clients: MutableList<String> = mutableListOf<String>()
    /**
     * Auto-generated from Mochi
     * @param msg String
     */
    fun broadcast(msg: String): Unit {
        println(msg)
    }
    /**
     * Auto-generated from Mochi
     * @param name String
     */
    fun add(name: String): Unit {
        clients = append(clients, name)
        broadcast("+++ \"" + name + "\" connected +++\n")
    }
    /**
     * Auto-generated from Mochi
     * @param name String
     * @param msg String
     */
    fun send(name: String, msg: String): Unit {
        broadcast(name + "> " + msg + "\n")
    }
    /**
     * Auto-generated from Mochi
     * @param name String
     */
    fun remove(name: String): Unit {
        clients = removeName(clients, name)
        broadcast("--- \"" + name + "\" disconnected ---\n")
    }
    add("Alice")
    add("Bob")
    send("Alice", "Hello Bob!")
    send("Bob", "Hi Alice!")
    remove("Bob")
    remove("Alice")
    broadcast("Server stopping!\n")
}

