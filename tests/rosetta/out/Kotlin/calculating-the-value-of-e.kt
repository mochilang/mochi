// Generated by Mochi compiler v0.10.28 on 2006-01-02T15:04:05Z
// Code generated from calculating-the-value-of-e.mochi

val epsilon = 0.000000000000001

var factval = 1

var e: Double = 2.0

var n = 2

var term: Double = 1.0

/**
 * Auto-generated from Mochi
 * @param x Double
 * @return Double
 */
fun absf(x: Double): Double {
    if (x < 0.0) {
        return -x
    }
    return x
}

/**
 * Auto-generated from Mochi
 * @param n Int
 * @return Double
 */
fun pow10(n: Int): Double {
    var r: Double = 1.0
    var i = 0
    while (i < n) {
        r = r * 10.0
        i = i + 1
    }
    return r
}

/**
 * Auto-generated from Mochi
 * @param f Double
 * @param prec Int
 * @return String
 */
fun formatFloat(f: Double, prec: Int): String {
    val scale = pow10(prec)
    val scaled = (f * scale) + 0.5
    var n = ((scaled).toInt())
    var digits = n.toString()
    while (digits.length <= prec) {
        digits = "0" + digits
    }
    val intPart = digits.substring(0, digits.length - prec)
    val fracPart = digits.substring(digits.length - prec, digits.length)
    return intPart + "." + fracPart
}

fun main() {
    while (true) {
        factval = factval * n
        n = n + 1
        term = 1.0 / (factval as Double)
        e = e + term
        if (absf(term) < epsilon) {
            break
        }
    }
    println("e = " + formatFloat(e, 15))
}
