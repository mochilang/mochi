// Generated by Mochi compiler v0.10.28 on 2006-01-02T15:04:05Z
fun <T> append(list: MutableList<T>, item: T): MutableList<T> {
    val res = list.toMutableList()
    res.add(item)
    return res
}
// Code generated from csv-data-manipulation.mochi

var rows: MutableList<MutableList<String>> = mutableListOf(mutableListOf("A", "B", "C"), mutableListOf("1", "2", "3"), mutableListOf("4", "5", "6"), mutableListOf("7", "8", "9"))

/**
 * Auto-generated from Mochi
 * @param xs MutableList<String>
 * @param sep String
 * @return String
 */
fun join(xs: MutableList<String>, sep: String): String {
    var res = ""
    var i = 0
    while (i < xs.size) {
        if (i > 0) {
            res = res + sep
        }
        res = res + xs[i]
        i = i + 1
    }
    return res
}

/**
 * Auto-generated from Mochi
 * @param str String
 * @return Int
 */
fun parseIntStr(str: String): Int {
    var i = 0
    var neg = false
    if (str.length > 0 && str.substring(0, 1) == "-") {
        neg = true
        i = 1
    }
    var n = 0
    val digits = mutableMapOf("0" to 0, "1" to 1, "2" to 2, "3" to 3, "4" to 4, "5" to 5, "6" to 6, "7" to 7, "8" to 8, "9" to 9)
    while (i < str.length) {
        n = n * 10 + digits[str.substring(i, i + 1)]
        i = i + 1
    }
    if (neg) {
        n = -n
    }
    return n
}

fun main() {
    rows[0] = append(rows[0], "SUM")
    var i = 1
    while (i < rows.size) {
        var sum = 0
        for (s in rows[i]) {
            sum = sum + parseIntStr(s)
        }
        rows[i] = append(rows[i], sum.toString())
        i = i + 1
    }
    for (r in rows) {
        println(join(r, ","))
    }
}
