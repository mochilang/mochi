// Generated by Mochi compiler v0.10.28 on 2006-01-02T15:04:05Z
// Code generated from checkpoint-synchronization-3.mochi

var partList = mutableListOf("A", "B", "C", "D")

var nAssemblies = 3

/**
 * Auto-generated from Mochi
 * @param ch String
 * @return String
 */
fun lower(ch: String): String {
    val up = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
    val low = "abcdefghijklmnopqrstuvwxyz"
    var i = 0
    while (i < up.length) {
        if (ch == up.substring(i, i + 1)) {
            return low.substring(i, i + 1)
        }
        i = i + 1
    }
    return ch
}

fun main() {
    for (p in partList) {
        println(p + " worker running")
    }
    for (cycle in 1 until (nAssemblies + 1)) {
        println("begin assembly cycle " + cycle.toString())
        var a = ""
        for (p in partList) {
            println(p + " worker begins part")
            println(p + " worker completed " + lower(p))
            a = a + lower(p)
        }
        println(a + " assembled.  cycle " + cycle.toString() + " complete")
    }
    for (p in partList) {
        println(p + " worker stopped")
    }
}
