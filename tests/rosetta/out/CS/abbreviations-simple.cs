// Generated by Mochi compiler v0.10.30 on 2025-07-18T17:22:08Z
using System;
using System.Collections.Generic;
using System.Text.Json;

class Program
{
    static List<string> fields(string s)
    {
        List<string> words = new List<string>();
        string cur = "";
        int i = 0;
        while (i < s.Length)
        {
            string ch = s.Substring((int)i, ((int)((i + 1)) - (int)(i)));
            if (((ch == " ") || (ch == "\n")) || (ch == "\t"))
            {
                if (cur.Length > 0)
                {
                    words = new List<string>(words) { cur };
                    cur = "";
                }
            }
            else
            {
                cur = string.Concat(cur, ch);
            }
            i = (i + 1);
        }
        if (cur.Length > 0)
        {
            words = new List<string>(words) { cur };
        }
        return words;
    }

    static string padRight(string s, int width)
    {
        string _out = s;
        int i = s.Length;
        while (i < width)
        {
            _out = string.Concat(_out, " ");
            i = (i + 1);
        }
        return _out;
    }

    static string join(List<string> xs, string sep)
    {
        string res = "";
        int i = 0;
        while (i < xs.Count)
        {
            if (i > 0)
            {
                res = string.Concat(res, sep);
            }
            res = (res + xs[(int)i]);
            i = (i + 1);
        }
        return res;
    }

    static int parseIntStr(string str)
    {
        int i = 0;
        bool neg = false;
        if ((str.Length > 0) && (str.Substring((int)0, ((int)(1) - (int)(0))) == "-"))
        {
            neg = true;
            i = 1;
        }
        int n = 0;
        Digit digits = new Digit { _0 = 0, _1 = 1, _2 = 2, _3 = 3, _4 = 4, _5 = 5, _6 = 6, _7 = 7, _8 = 8, _9 = 9 };
        while (i < str.Length)
        {
            n = ((n * 10) + _indexList(digits, str.Substring((int)i, ((int)((i + 1)) - (int)(i)))));
            i = (i + 1);
        }
        if (neg)
        {
            n = (-n);
        }
        return n;
    }

    static bool isDigits(string s)
    {
        if (s.Length == 0)
        {
            return false;
        }
        int i = 0;
        while (i < s.Length)
        {
            string ch = s.Substring((int)i, ((int)((i + 1)) - (int)(i)));
            if (string.Compare(Convert.ToString(ch), Convert.ToString("0")) < 0 || string.Compare(Convert.ToString(ch), Convert.ToString("9")) > 0)
            {
                return false;
            }
            i = (i + 1);
        }
        return true;
    }

    static Dictionary<string, dynamic> readTable(string table)
    {
        List<string> toks = fields(table);
        List<string> cmds = new List<string>();
        List<int> mins = new List<int>();
        int i = 0;
        while (i < toks.Count)
        {
            string cmd = toks[(int)i];
            int minlen = cmd.Length;
            i = (i + 1);
            if ((i < toks.Count) && isDigits(toks[(int)i]))
            {
                var num = parseIntStr(toks[(int)i]);
                if ((num >= 1) && (num < cmd.Length))
                {
                    minlen = num;
                    i = (i + 1);
                }
            }
            cmds = new List<string>(cmds) { cmd };
            mins = new List<int>(mins) { minlen };
        }
        return new Item { commands = cmds, mins = mins };
    }

    static List<string> validate(List<string> commands, List<int> mins, List<string> words)
    {
        List<string> results = new List<string>();
        int wi = 0;
        while (wi < words.Count)
        {
            string w = words[(int)wi];
            bool found = false;
            int wlen = w.Length;
            int ci = 0;
            while (ci < commands.Count)
            {
                string cmd = commands[(int)ci];
                if (((mins[(int)ci] != 0) && (wlen >= mins[(int)ci])) && (wlen <= cmd.Length))
                {
                    string c = Convert.ToString(cmd).ToUpper();
                    string ww = Convert.ToString(w).ToUpper();
                    if (c.Substring((int)0, ((int)(wlen) - (int)(0))) == ww)
                    {
                        results = new List<string>(results) { c };
                        found = true;
                        break;
                    }
                }
                ci = (ci + 1);
            }
            if (!found)
            {
                results = new List<string>(results) { "*error*" };
            }
            wi = (wi + 1);
        }
        return results;
    }

    static void main()
    {
        string table = string.Concat(string.Concat(string.Concat(string.Concat(string.Concat(string.Concat(string.Concat(string.Concat("", "add 1  alter 3  backup 2  bottom 1  Cappend 2  change 1  Schange  Cinsert 2  Clast 3 "), "compress 4 copy 2 count 3 Coverlay 3 cursor 3  delete 3 Cdelete 2  down 1  duplicate "), "3 xEdit 1 expand 3 extract 3  find 1 Nfind 2 Nfindup 6 NfUP 3 Cfind 2 findUP 3 fUP 2 "), "forward 2  get  help 1 hexType 4  input 1 powerInput 3  join 1 split 2 spltJOIN load "), "locate 1 Clocate 2 lowerCase 3 upperCase 3 Lprefix 2  macro  merge 2 modify 3 move 2 "), "msg  next 1 overlay 1 parse preserve 4 purge 3 put putD query 1 quit  read recover 3 "), "refresh renum 3 repeat 3 replace 1 Creplace 2 reset 3 restore 4 rgtLEFT right 2 left "), "2  save  set  shift 2  si  sort  sos  stack 3 status 4 top  transfer 3  type 1  up 1 ");
        string sentence = "riG   rePEAT copies  put mo   rest    types   fup.    6\npoweRin";
        var tbl = readTable(table);
        List<string> commands = _cast<List<string>>(tbl["commands"]);
        List<int> mins = _cast<List<int>>(tbl["mins"]);
        List<string> words = fields(sentence);
        List<string> results = validate(commands, mins, words);
        string out1 = "user words:";
        int k = 0;
        while (k < words.Count)
        {
            out1 = string.Concat(out1, " ");
            if (k < (words.Count - 1))
            {
                out1 = (out1 + padRight(words[(int)k], results[(int)k].Length));
            }
            else
            {
                out1 = (out1 + words[(int)k]);
            }
            k = (k + 1);
        }
        Console.WriteLine(out1);
        Console.WriteLine(("full words: " + join(results, " ")));
    }

    static void Main()
    {
        main();
    }
    public class Digit
    {
        public int _0;
        public int _1;
        public int _2;
        public int _3;
        public int _4;
        public int _5;
        public int _6;
        public int _7;
        public int _8;
        public int _9;
    }


    public class Item
    {
        public List<string> commands;
        public List<int> mins;
    }


    static dynamic _indexList(dynamic l, long i)
    {
        var list = l as System.Collections.IList;
        if (list == null) throw new Exception("index() expects list");
        if (i < 0) i += list.Count;
        if (i < 0 || i >= list.Count) throw new Exception("index out of range");
        return list[(int)i];
    }

    static T _cast<T>(dynamic v)
    {
        if (v is T tv) return tv;
        if (typeof(T) == typeof(long))
        {
            if (v is long) return (T)v;
            if (v is int) return (T)(object)(long)(int)v;
            if (v is double) return (T)(object)(long)(double)v;
            if (v is float) return (T)(object)(long)(float)v;
            if (v is string) return (T)(object)long.Parse((string)v);
        }
        if (typeof(T) == typeof(int))
        {
            if (v is int) return (T)v;
            if (v is long) return (T)(object)(int)(long)v;
            if (v is double) return (T)(object)(int)(double)v;
            if (v is float) return (T)(object)(int)(float)v;
            if (v is string) return (T)(object)int.Parse((string)v);
        }
        if (typeof(T) == typeof(double))
        {
            if (v is int) return (T)(object)(double)(int)v;
            if (v is double) return (T)v;
            if (v is float) return (T)(object)(double)(float)v;
            if (v is string) return (T)(object)double.Parse((string)v);
        }
        if (typeof(T) == typeof(float))
        {
            if (v is int) return (T)(object)(float)(int)v;
            if (v is double) return (T)(object)(float)(double)v;
            if (v is float) return (T)v;
            if (v is string) return (T)(object)float.Parse((string)v);
        }
        if (typeof(T).IsGenericType && typeof(T).GetGenericTypeDefinition() == typeof(Dictionary<,>) && v is System.Collections.IDictionary d)
        {
            var args = typeof(T).GetGenericArguments();
            var res = (System.Collections.IDictionary)Activator.CreateInstance(typeof(Dictionary<,>).MakeGenericType(args));
            var mCast = typeof(Program).GetMethod("_cast");
            foreach (System.Collections.DictionaryEntry kv in d)
            {
                var k = mCast.MakeGenericMethod(args[0]).Invoke(null, new object[] { kv.Key });
                var val = mCast.MakeGenericMethod(args[1]).Invoke(null, new object[] { kv.Value });
                res.Add(k, val);
            }
            return (T)res;
        }
        if (v is System.Collections.Generic.IDictionary<object, object> dm)
        {
            var m = new Dictionary<string, object>();
            foreach (var kv in dm) m[Convert.ToString(kv.Key)] = kv.Value;
            v = m;
        }
        var json = JsonSerializer.Serialize(v, new JsonSerializerOptions { IncludeFields = true });
        return JsonSerializer.Deserialize<T>(json, new JsonSerializerOptions { IncludeFields = true });
    }

}
