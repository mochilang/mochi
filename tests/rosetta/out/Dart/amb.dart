// Generated by Mochi compiler v0.10.28 on 2025-07-18T09:33:44Z
bool amb(List<List<String>> wordsets, List<String> res, int idx) {
  if (idx == wordsets.length) {
    return true;
  }
  var prev = '';
  if (idx > 0) {
    prev = res[idx - 1];
  }
  num i = 0;
  while ((i as num) < wordsets[idx].length) {
    var w = wordsets[idx][i];
    if (idx == 0 || prev.toString().substring(prev.length - 1, prev.length) == w.toString().substring(0, 1)) {
      res[idx] = w;
      if (amb(wordsets, res, idx + 1)) {
        return true;
      }
    }
    i = (i as num) + 1;
  }
  return false;
}

void _main() {
  var wordset = [
    ['the', 'that', 'a'],
    ['frog', 'elephant', 'thing'],
    ['walked', 'treaded', 'grows'],
    ['slowly', 'quickly'],
  ];
  List<String> res = [];
  num i = 0;
  while ((i as num) < wordset.length) {
    res = List.from(res)..add('');
    i = (i as num) + 1;
  }
  if (amb(wordset, res, 0)) {
    var out = '[' + res[0];
    var j = 1;
    while ((j as num) < res.length) {
      out = out + ' ' + res[j];
      j = (j as num) + 1;
    }
    out = out + ']';
    print(out);
  }
  else {
    print('No amb found');
  }
}

void main() {
  _main();
}
