// Generated by Mochi compiler v0.10.28 on 2025-07-18T09:34:15Z
double qsel(List<double> a, int k) {
  var arr = a;
  while (arr.length > 1) {
    var px = DateTime.now().microsecondsSinceEpoch % arr.length;
    var pv = arr[px];
    var last = arr.length - 1;
    var tmp = arr[px];
    arr[px] = arr[last];
    arr[last] = tmp;
    px = 0;
    num i = 0;
    while ((i as num) < (last as num)) {
      var v = arr[i];
      if ((v as num) < (pv as num)) {
        var tmp2 = arr[px];
        arr[px] = arr[i];
        arr[i] = tmp2;
        px = (px as num) + 1;
      }
      i = (i as num) + 1;
    }
    if (px == k) {
      return pv;
    }
    if (k < (px as num)) {
      arr = ((arr is String) ? arr.substring(0, px) : (arr as List).sublist(0, px));
    }
    else {
      var tmp2 = arr[px];
      arr[px] = pv;
      arr[last] = tmp2;
      arr = ((arr is String) ? arr.substring(((px as num) + 1), arr.length) : (arr as List).sublist(((px as num) + 1), arr.length));
      k = k - (((px as num) + 1) as num);
    }
  }
  return arr[0];
}

double median(List<double> list) {
  var arr = list;
  var half = int.parse((arr.length ~/ 2));
  var med = qsel(arr, half);
  if (arr.length % 2 == 0) {
    return (((med as num) + qsel(arr, (half as num) - 1)) as num) / 2;
  }
  return med;
}

void main() {
  print(median([
    3,
    1,
    4,
    1,
  ]).toString());
  print(median([
    3,
    1,
    4,
    1,
    5,
  ]).toString());
}
