// Generated by Mochi compiler v0.10.28 on 2025-07-18T09:35:00Z
String listStr(List<int> xs) {
  var s = '[';
  num i = 0;
  while ((i as num) < xs.length) {
    s = s + xs[i].toString();
    if ((i as num) < xs.length - 1) {
      s = s + ' ';
    }
    i = (i as num) + 1;
  }
  s = s + ']';
  return s;
}

String llStr(List<List<int>> lst) {
  var s = '[';
  num i = 0;
  while ((i as num) < lst.length) {
    s = s + listStr(lst[i]);
    if ((i as num) < lst.length - 1) {
      s = s + ' ';
    }
    i = (i as num) + 1;
  }
  s = s + ']';
  return s;
}

List<List<int>> cartN(any lists) {
  if (lists == null) {
    return [];
  }
  var a = (lists as List<List<int>>);
  if (a.length == 0) {
    return [
      [],
    ];
  }
  var c = 1;
  var _iter0 = a;
  for (var xs in (_iter0 is Map ? (_iter0 as Map).keys : _iter0) as Iterable) {
    c = (c as num) * xs.length;
  }
  if (c == 0) {
    return [];
  }
  List<List<int>> res = [];
  List<int> idx = [];
  var _iter1 = a;
  for (var _ in (_iter1 is Map ? (_iter1 as Map).keys : _iter1) as Iterable) {
    idx = List.from(idx)..add(0);
  }
  var n = a.length;
  num count = 0;
  while ((count as num) < (c as num)) {
    List<int> row = [];
    num j = 0;
    while ((j as num) < (n as num)) {
      row = List.from(row)..add(a[j][idx[j]]);
      j = (j as num) + 1;
    }
    res = List.from(res)..add(row);
    var k = (n as num) - 1;
    while ((k as num) >= 0) {
      idx[k] = (idx[k] as num) + 1;
      if ((idx[k] as num) < a[k].length) {
        break;
      }
      idx[k] = 0;
      k = (k as num) - 1;
    }
    count = (count as num) + 1;
  }
  return res;
}

void _main() {
  print(llStr(cartN([
    [1, 2],
    [3, 4],
  ])));
  print(llStr(cartN([
    [3, 4],
    [1, 2],
  ])));
  print(llStr(cartN([
    [1, 2],
    [],
  ])));
  print(llStr(cartN([
    [],
    [1, 2],
  ])));
  print('');
  print('[');
  for (var p in cartN([
    [1776, 1789],
    [7, 12],
    [4, 14, 23],
    [0, 1],
  ])) {
    print(' ' + listStr(p));
  }
  print(']');
  print(llStr(cartN([
    [1, 2, 3],
    [30],
    [500, 100],
  ])));
  print(llStr(cartN([
    [1, 2, 3],
    [],
    [500, 100],
  ])));
  print('');
  print(llStr(cartN(null)));
  print(llStr(cartN([])));
}

void main() {
  _main();
}
