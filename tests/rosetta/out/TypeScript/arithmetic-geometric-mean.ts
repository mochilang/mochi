// Generated by Mochi compiler v0.10.26 on 2025-07-16T09:12:33Z
// Source: /workspace/mochi/tests/rosetta/x/Mochi/arithmetic-geometric-mean.mochi

function abs(x: number): number {
  if ((x < 0)) {
    return (-x);
  }
  return x;
}

function sqrtApprox(x: number): number {
  var guess = x;
  var i = 0;
  while ((i < 20)) {
    guess = (guess + (x / guess)) / 2;
    i = i + 1;
  }
  return guess;
}

function agm(a: number, g: number): number {
  let eps = 1e-14;
  while ((abs(a - g) > (abs(a) * eps))) {
    let newA = (a + g) / 2;
    let newG = sqrtApprox(a * g);
    a = newA;
    g = newG;
  }
  return a;
}

function main(): void {
  return console.log(String(agm(1, 1 / sqrtApprox(2))));
}

function main(): void {
  main();
}
main();
