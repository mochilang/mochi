// Generated by Mochi compiler v0.10.26 on 2025-07-16T09:12:36Z
// Source: /workspace/mochi/tests/rosetta/x/Mochi/averages-median-3.mochi

function qsel(a: number[], k: number): number {
  var arr = a;
  while ((arr.length > 1)) {
    var px = performance.now() * 1000000 % arr.length;
    var pv = arr[px];
    let last = arr.length - 1;
    let tmp = arr[px];
    arr[px] = arr[last];
    arr[last] = tmp;
    px = 0;
    var i = 0;
    while ((i < last)) {
      let v = arr[i];
      if ((v < pv)) {
        let tmp2 = arr[px];
        arr[px] = arr[i];
        arr[i] = tmp2;
        px = px + 1;
      }
      i = i + 1;
    }
    if ((px == k)) {
      return pv;
    }
    if ((k < px)) {
      arr = arr.slice(0, px);
    } else {
      let tmp2 = arr[px];
      arr[px] = pv;
      arr[last] = tmp2;
      arr = arr.slice(px + 1, arr.length);
      k = k - (px + 1);
    }
  }
  return arr[0];
}

function median(list: number[]): number {
  var arr = list;
  let half = Math.trunc(arr.length / 2);
  let med = qsel(arr, half);
  if (((arr.length % 2) == 0)) {
    return ((med + qsel(arr, half - 1)) / 2);
  }
  return med;
}

function main(): void {
  console.log(String(median([
    3,
    1,
    4,
    1,
  ])));
  console.log(String(median([
    3,
    1,
    4,
    1,
    5,
  ])));
}
main();
