// Generated by Mochi compiler v0.10.26 on 2025-07-16T09:12:30Z
// Source: /workspace/mochi/tests/rosetta/x/Mochi/amb.mochi

function amb(wordsets: string[][], res: string[], idx: number): boolean {
  if ((idx == wordsets.length)) {
    return true;
  }
  var prev = "";
  if ((idx > 0)) {
    prev = res[idx - 1];
  }
  var i = 0;
  while ((i < wordsets[idx].length)) {
    let w = wordsets[idx][i];
    if (
      ((idx == 0) ||
        (prev.substring(prev.length - 1, (prev.length - 1) + (prev.length)) ==
          w.substring(0, (0) + (1))))
    ) {
      res[idx] = w;
      if (amb(wordsets, res, idx + 1)) {
        return true;
      }
    }
    i = i + 1;
  }
  return false;
}

function main(): void {
  let wordset = [
    [
      "the",
      "that",
      "a",
    ],
    [
      "frog",
      "elephant",
      "thing",
    ],
    [
      "walked",
      "treaded",
      "grows",
    ],
    [
      "slowly",
      "quickly",
    ],
  ];
  var res: string[] = [];
  var i = 0;
  while ((i < wordset.length)) {
    res = [...res, ""];
    i = i + 1;
  }
  if (amb(wordset, res, 0)) {
    var out = `[${res[0]}`;
    var j = 1;
    while ((j < res.length)) {
      out = `${out} ${res[j]}`;
      j = j + 1;
    }
    out = `${out}]`;
    console.log(out);
  } else {
    console.log("No amb found");
  }
}

function main(): void {
  main();
}
main();
