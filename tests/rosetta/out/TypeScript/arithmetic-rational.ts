// Generated by Mochi compiler v0.10.26 on 2025-07-16T09:12:34Z
// Source: /workspace/mochi/tests/rosetta/x/Mochi/arithmetic-rational.mochi

function intSqrt(x: number): number {
  if ((x < 2)) {
    return x;
  }
  var left = 1;
  var right = Math.trunc(x / 2);
  var ans = 0;
  while ((left <= right)) {
    let mid = left + Math.trunc((right - left) / 2);
    let sq = mid * mid;
    if ((sq == x)) {
      return mid;
    }
    if ((sq < x)) {
      left = mid + 1;
      ans = mid;
    } else {
      right = mid - 1;
    }
  }
  return ans;
}

function sumRecip(n: number): number {
  var s = 1;
  let limit = intSqrt(n);
  var f = 2;
  while ((f <= limit)) {
    if (((n % f) == 0)) {
      s = s + Math.trunc(n / f);
      let f2 = Math.trunc(n / f);
      if ((f2 != f)) {
        s = s + f;
      }
    }
    f = f + 1;
  }
  return s;
}

function main(): void {
  let nums = [
    6,
    28,
    120,
    496,
    672,
    8128,
    30240,
    32760,
    523776,
  ];
  for (const n of nums) {
    let s = sumRecip(n);
    if (((s % n) == 0)) {
      let val = Math.trunc(s / n);
      var perfect = "";
      if ((val == 1)) {
        perfect = "perfect!";
      }
      console.log(
        `Sum of recipr. factors of ${String(n)} = ${
          String(val)
        } exactly ${perfect}`,
      );
    }
  }
}

function main(): void {
  main();
}
main();
