# Generated by Mochi compiler v0.10.26 on 2025-07-16T12:22:03Z
def _sliceString(s, i, j)
  start = i
  finish = j
  chars = s.chars
  n = chars.length
  start += n if start < 0
  finish += n if finish < 0
  start = 0 if start < 0
  finish = n if finish > n
  finish = start if finish < start
  chars[start...finish].join
end

def amb(wordsets, res, idx)
	if (idx == (wordsets).length)
		return true
	end
	prev = ""
	if (idx > 0)
		prev = res[(idx - 1)]
	end
	i = 0
	while (i < (wordsets[idx]).length)
		w = wordsets[idx][i]
		if ((idx == 0) || (_sliceString(prev, ((prev).length - 1), (prev).length) == _sliceString(w, 0, 1)))
			res[idx] = w
			if amb(wordsets, res, (idx + 1))
				return true
			end
		end
		i = (i + 1)
	end
	return false
end

def main()
	wordset = [["the", "that", "a"], ["frog", "elephant", "thing"], ["walked", "treaded", "grows"], ["slowly", "quickly"]]
	res = []
	i = 0
	while (i < (wordset).length)
		res = (res + [""])
		i = (i + 1)
	end
	if amb(wordset, res, 0)
		out = ("[" + res[0])
		j = 1
		while (j < (res).length)
			out = ((out + " ") + res[j])
			j = (j + 1)
		end
		out = (out + "]")
		puts(out)
	else
		puts("No amb found")
	end
end

main()
