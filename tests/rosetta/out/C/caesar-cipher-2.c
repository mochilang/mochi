// Generated by Mochi compiler v0.10.26 on 2025-07-16T12:35:56Z
// Generated by Mochi compiler v0.10.26 on 2025-07-16T12:35:56Z
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct {
  int len;
  int *data;
} list_int;
static list_int list_int_create(int len) {
  list_int l;
  l.len = len;
  l.data = calloc(len, sizeof(int));
  if (!l.data && len > 0) {
    fprintf(stderr, "alloc failed\n");
    exit(1);
  }
  return l;
}
static char *concat_string(char *a, char *b) {
  size_t len1 = strlen(a);
  size_t len2 = strlen(b);
  char *buf = (char *)malloc(len1 + len2 + 1);
  memcpy(buf, a, len1);
  memcpy(buf + len1, b, len2);
  buf[len1 + len2] = '\0';
  return buf;
}
static char *_str(int v) {
  char *buf = (char *)malloc(32);
  sprintf(buf, "%d", v);
  return buf;
}
static int index_of_string(char *s, char *sub) {
  char *pos = strstr(s, sub);
  if (!pos)
    return -1;
  return pos - s;
}
static char *slice_string(char *s, int start, int end) {
  int len = strlen(s);
  if (start < 0)
    start += len;
  if (end < 0)
    end += len;
  if (start < 0)
    start = 0;
  if (end > len)
    end = len;
  if (start > end)
    start = end;
  char *buf = (char *)malloc(end - start + 1);
  memcpy(buf, s + start, end - start);
  buf[end - start] = '\0';
  return buf;
}
int indexOf(char *s, char *ch) {
  int i = 0;
  while (i < strlen(s)) {
    if (slice_string(s, i, i + 1) == ch) {
      return i;
    }
    i = i + 1;
  }
  return (-1);
}

int ord(char *ch) {
  const char *upper = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  const char *lower = "abcdefghijklmnopqrstuvwxyz";
  int idx = index_of_string(upper, ch);
  if ((idx >= 0)) {
    return 65 + idx;
  }
  idx = index_of_string(lower, ch);
  if ((idx >= 0)) {
    return 97 + idx;
  }
  return 0;
}

const char *chr(int n) {
  const char *upper = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  const char *lower = "abcdefghijklmnopqrstuvwxyz";
  if (n >= 65 && n < 91) {
    char *tmp1 = slice_string(upper, n - 65, n - 64);
    return tmp1;
  }
  if (n >= 97 && n < 123) {
    char *tmp2 = slice_string(lower, n - 97, n - 96);
    return tmp2;
  }
  return "?";
}

const char *shiftRune(char *r, int k) {
  if ((strcmp(r, "a") >= 0) && r <= "z") {
    return chr(((ord(r) - 97 + k) % 26) + 97);
  }
  if ((strcmp(r, "A") >= 0) && r <= "Z") {
    return chr(((ord(r) - 65 + k) % 26) + 65);
  }
  return r;
}

const char *encipher(char *s, int k) {
  const char *out = "";
  int i = 0;
  while (i < strlen(s)) {
    char *tmp3 = slice_string(s, i, i + 1);
    out = out + shiftRune(tmp3, k);
    i = i + 1;
  }
  return out;
}

const char *decipher(char *s, int k) { return encipher(s, (26 - k % 26) % 26); }

int main() {
  const char *pt = "The five boxing wizards jump quickly";
  char *tmp4 = concat_string("Plaintext: ", pt);
  printf("%s\n", tmp4);
  list_int tmp5 = list_int_create(5);
  tmp5.data[0] = 0;
  tmp5.data[1] = 1;
  tmp5.data[2] = 7;
  tmp5.data[3] = 25;
  tmp5.data[4] = 26;
  for (int tmp6 = 0; tmp6 < 5; tmp6++) {
    int key = tmp5[tmp6];
    if (key < 1 || key > 25) {
      char *tmp7 = _str(key);
      char *tmp8 = concat_string("Key ", tmp7);
      char *tmp9 = concat_string(tmp8, " invalid");
      printf("%s\n", tmp9);
      continue;
    }
    const char *ct = encipher(pt, key);
    char *tmp10 = _str(key);
    char *tmp11 = concat_string("Key ", tmp10);
    printf("%s\n", tmp11);
    char *tmp12 = concat_string("  Enciphered: ", ct);
    printf("%s\n", tmp12);
    printf("%s\n", "  Deciphered: " + decipher(ct, key));
  }
}

int main() {
  main();
  return 0;
}
