// Generated by Mochi compiler v0.10.30 on 2025-07-18T12:56:10Z
// Generated by Mochi compiler v0.10.30 on 2025-07-18T12:56:10Z
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct {
  int len;
  char **data;
} list_string;
static list_string list_string_create(int len) {
  list_string l;
  l.len = len;
  l.data = calloc(len, sizeof(char *));
  if (!l.data && len > 0) {
    fprintf(stderr, "alloc failed\n");
    exit(1);
  }
  return l;
}
static list_string concat_list_string(list_string a, list_string b) {
  list_string r = list_string_create(a.len + b.len);
  for (int i = 0; i < a.len; i++)
    r.data[i] = a.data[i];
  for (int i = 0; i < b.len; i++)
    r.data[a.len + i] = b.data[i];
  return r;
}
static char *concat_string(char *a, char *b) {
  size_t len1 = strlen(a);
  size_t len2 = strlen(b);
  char *buf = (char *)malloc(len1 + len2 + 1);
  memcpy(buf, a, len1);
  memcpy(buf + len1, b, len2);
  buf[len1 + len2] = '\0';
  return buf;
}
static char *slice_string(char *s, int start, int end) {
  int len = strlen(s);
  if (start < 0)
    start += len;
  if (end < 0)
    end += len;
  if (start < 0)
    start = 0;
  if (end > len)
    end = len;
  if (start > end)
    start = end;
  char *buf = (char *)malloc(end - start + 1);
  memcpy(buf, s + start, end - start);
  buf[end - start] = '\0';
  return buf;
}
list_string fields(char *s) {
  list_string words = list_string_create(0);
  __auto_type cur = "";
  __auto_type i = 0;
  while (i < strlen(s)) {
    __auto_type ch = slice_string(s, i, i + 1);
    if ((strcmp(ch, " ") == 0) || ch == "\n" || ch == "\t") {
      if (strlen(cur) > 0) {
        list_string tmp1 = list_string_create(1);
        tmp1.data[0] = cur;
        list_string tmp2 = concat_list_string(words, tmp1);
        words = tmp2;
        cur = "";
      }
    } else {
      char *tmp3 = concat_string(cur, ch);
      cur = tmp3;
    }
    i = i + 1;
  }
  if (strlen(cur) > 0) {
    list_string tmp4 = list_string_create(1);
    tmp4.data[0] = cur;
    list_string tmp5 = concat_list_string(words, tmp4);
    words = tmp5;
  }
  return words;
}

char *join(list_string xs, char *sep) {
  __auto_type res = "";
  __auto_type i = 0;
  while (i < xs.len) {
    if (i > 0) {
      char *tmp6 = concat_string(res, sep);
      res = tmp6;
    }
    char *tmp7 = concat_string(res, xs.data[i]);
    res = tmp7;
    i = i + 1;
  }
  return res;
}

char *numberName(int n) {
  list_string small = list_string_create(20);
  small.data[0] = "no";
  small.data[1] = "one";
  small.data[2] = "two";
  small.data[3] = "three";
  small.data[4] = "four";
  small.data[5] = "five";
  small.data[6] = "six";
  small.data[7] = "seven";
  small.data[8] = "eight";
  small.data[9] = "nine";
  small.data[10] = "ten";
  small.data[11] = "eleven";
  small.data[12] = "twelve";
  small.data[13] = "thirteen";
  small.data[14] = "fourteen";
  small.data[15] = "fifteen";
  small.data[16] = "sixteen";
  small.data[17] = "seventeen";
  small.data[18] = "eighteen";
  small.data[19] = "nineteen";
  list_string tens = list_string_create(10);
  tens.data[0] = "ones";
  tens.data[1] = "ten";
  tens.data[2] = "twenty";
  tens.data[3] = "thirty";
  tens.data[4] = "forty";
  tens.data[5] = "fifty";
  tens.data[6] = "sixty";
  tens.data[7] = "seventy";
  tens.data[8] = "eighty";
  tens.data[9] = "ninety";
  if (n < 0) {
    return "";
  }
  if (n < 20) {
    return small.data[n];
  }
  if (n < 100) {
    __auto_type t = tens.data[(int)((((double)n) / ((double)10)))];
    __auto_type s = n % 10;
    if (s > 0) {
      char *tmp8 = concat_string(t, " ");
      char *tmp9 = concat_string(tmp8, small.data[s]);
      t = tmp9;
    }
    return t;
  }
  return "";
}

char *pluralizeFirst(char *s, int n) {
  if (n == 1) {
    return s;
  }
  __auto_type w = fields(s);
  if (w.len > 0) {
    char *tmp10 = concat_string(w.data[0], "s");
    char *tmp11 = concat_string(w.data[0], "s");
    w.data[0] = tmp11;
  }
  return join(w, " ");
}

int randInt(int seed, int n) {
  __auto_type next = (seed * 1664525 + 1013904223) % 2147483647;
  return next % n;
}

char *slur(char *p, int d) {
  if (strlen(p) <= 2) {
    return p;
  }
  list_string a = list_string_create(0);
  __auto_type i = 1;
  while (i < strlen(p) - 1) {
    list_string tmp12 = list_string_create(1);
    tmp12.data[0] = slice_string(p, i, i + 1);
    list_string tmp13 = concat_list_string(a, tmp12);
    a = tmp13;
    i = i + 1;
  }
  __auto_type idx = a.len - 1;
  __auto_type seed = d;
  while (idx >= 1) {
    seed = (seed * 1664525 + 1013904223) % 2147483647;
    if (seed % 100 >= d) {
      __auto_type j = seed % (idx + 1);
      __auto_type tmp = a.data[idx];
      a.data[idx] = a.data[j];
      a.data[j] = tmp;
    }
    idx = idx - 1;
  }
  __auto_type s = slice_string(p, 0, 1);
  __auto_type k = 0;
  while (k < a.len) {
    char *tmp14 = concat_string(s, a.data[k]);
    s = tmp14;
    k = k + 1;
  }
  char *tmp15 = concat_string(s, slice_string(p, strlen(p) - 1, strlen(p)));
  s = tmp15;
  __auto_type w = fields(s);
  return join(w, " ");
}

int mochi_main() {
  __auto_type i = 99;
  while (i > 0) {
    char *tmp16 = concat_string(slur(numberName(i), i), " ");
    char *tmp17 = concat_string(tmp16, pluralizeFirst(slur("bottle of", i), i));
    char *tmp18 = concat_string(tmp17, " ");
    char *tmp19 = concat_string(tmp18, slur("beer on the wall", i));
    printf("%s\n", tmp19);
    char *tmp20 = concat_string(slur(numberName(i), i), " ");
    char *tmp21 = concat_string(tmp20, pluralizeFirst(slur("bottle of", i), i));
    char *tmp22 = concat_string(tmp21, " ");
    char *tmp23 = concat_string(tmp22, slur("beer", i));
    printf("%s\n", tmp23);
    char *tmp24 = concat_string(slur("take one", i), " ");
    char *tmp25 = concat_string(tmp24, slur("down", i));
    char *tmp26 = concat_string(tmp25, " ");
    char *tmp27 = concat_string(tmp26, slur("pass it around", i));
    printf("%s\n", tmp27);
    char *tmp28 = concat_string(slur(numberName(i - 1), i), " ");
    char *tmp29 =
        concat_string(tmp28, pluralizeFirst(slur("bottle of", i), i - 1));
    char *tmp30 = concat_string(tmp29, " ");
    char *tmp31 = concat_string(tmp30, slur("beer on the wall", i));
    printf("%s\n", tmp31);
    i = i - 1;
  }
}

int _mochi_main() {
  mochi_main();
  return 0;
}
int main() { return _mochi_main(); }
