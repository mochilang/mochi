// Generated by Mochi compiler v0.10.30 on 2025-07-18T17:11:43Z
// Generated by Mochi compiler v0.10.30 on 2025-07-18T17:11:43Z
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

static char *concat_string(char *a, char *b) {
  size_t len1 = strlen(a);
  size_t len2 = strlen(b);
  char *buf = (char *)malloc(len1 + len2 + 1);
  memcpy(buf, a, len1);
  memcpy(buf + len1, b, len2);
  buf[len1 + len2] = '\0';
  return buf;
}
static char *_str(int v) {
  char *buf = (char *)malloc(32);
  sprintf(buf, "%d", v);
  return buf;
}
static char *slice_string(char *s, int start, int end) {
  int len = strlen(s);
  if (start < 0)
    start += len;
  if (end < 0)
    end += len;
  if (start < 0)
    start = 0;
  if (end > len)
    end = len;
  if (start > end)
    start = end;
  char *buf = (char *)malloc(end - start + 1);
  memcpy(buf, s + start, end - start);
  buf[end - start] = '\0';
  return buf;
}
static char *err = "";

int pow_big(int base, int exp) {
  int result = 1;
  int b = base;
  __auto_type e = exp;
  while (e > 0) {
    if (e % 2 == 1) {
      result = result * b;
    }
    b = b * b;
    e = (int)((((double)e) / ((double)2)));
  }
  return result;
}

int bit_len(int x) {
  int n = x;
  __auto_type c = 0;
  while ((n > 0)) {
    n = n / 2;
    c = c + 1;
  }
  return c;
}

int ackermann2(int m, int n) {
  if ((strcmp(err, "") != 0)) {
    return (int)(0);
  }
  if ((m <= 3)) {
    __auto_type mi = atoi(m);
    if (mi == 0) {
      return n + 1;
    }
    if (mi == 1) {
      return n + 2;
    }
    if (mi == 2) {
      return 2 * n + 3;
    }
    if (mi == 3) {
      __auto_type nb = bit_len(n);
      if (nb > 64) {
        char *tmp1 = _str(nb);
        char *tmp2 = concat_string("A(m,n) had n of ", tmp1);
        char *tmp3 = concat_string(tmp2, " bits; too large");
        err = tmp3;
        return (int)(0);
      }
      __auto_type r = pow_big((int)(2), atoi(n));
      return 8 * r - 3;
    }
  }
  if (bit_len(n) == 0) {
    return ackermann2(m - ((int)(1)), (int)(1));
  }
  return ackermann2(m - ((int)(1)), ackermann2(m, n - ((int)(1))));
}

int show(int m, int n) {
  err = "";
  __auto_type res = ackermann2((int)(m), (int)(n));
  if ((strcmp(err, "") != 0)) {
    char *tmp4 = _str(m);
    char *tmp5 = concat_string("A(", tmp4);
    char *tmp6 = concat_string(tmp5, ", ");
    char *tmp7 = _str(n);
    char *tmp8 = concat_string(tmp6, tmp7);
    char *tmp9 = concat_string(tmp8, ") = Error: ");
    char *tmp10 = concat_string(tmp9, err);
    printf("%s\n", tmp10);
    return;
  }
  if (bit_len(res) <= 256) {
    char *tmp11 = _str(m);
    char *tmp12 = concat_string("A(", tmp11);
    char *tmp13 = concat_string(tmp12, ", ");
    char *tmp14 = _str(n);
    char *tmp15 = concat_string(tmp13, tmp14);
    char *tmp16 = concat_string(tmp15, ") = ");
    char *tmp17 = _str(res);
    char *tmp18 = concat_string(tmp16, tmp17);
    printf("%s\n", tmp18);
  } else {
    char *tmp19 = _str(res);
    __auto_type s = tmp19;
    __auto_type pre = slice_string(s, 0, 20);
    __auto_type suf = slice_string(s, strlen(s) - 20, strlen(s));
    char *tmp20 = _str(m);
    char *tmp21 = concat_string("A(", tmp20);
    char *tmp22 = concat_string(tmp21, ", ");
    char *tmp23 = _str(n);
    char *tmp24 = concat_string(tmp22, tmp23);
    char *tmp25 = concat_string(tmp24, ") = ");
    char *tmp26 = _str(strlen(s));
    char *tmp27 = concat_string(tmp25, tmp26);
    char *tmp28 = concat_string(tmp27, " digits starting/ending with: ");
    char *tmp29 = concat_string(tmp28, pre);
    char *tmp30 = concat_string(tmp29, "...");
    char *tmp31 = concat_string(tmp30, suf);
    printf("%s\n", tmp31);
  }
}

int mochi_main() {
  show(0, 0);
  show(1, 2);
  show(2, 4);
  show(3, 100);
  show(3, 1000000);
  show(4, 1);
  show(4, 2);
  show(4, 3);
}

int _mochi_main() {
  mochi_main();
  return 0;
}
int main() { return _mochi_main(); }
