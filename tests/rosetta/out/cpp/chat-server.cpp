// Generated by Mochi compiler v0.10.26 on 2025-07-16T09:21:13Z
#include <iostream>
#include <string>
#include <vector>

auto removeName(auto names, std::string name) {
  auto out = std::vector<int>{};
  for (auto n : names) {
    if ((n != name)) {
      out.push_back(n);
    }
  }
  return out;
}

auto main() {
  auto clients = std::vector<int>{};
  auto broadcast = [=](std::string msg) { std::cout << msg << std::endl; };
  auto add = [=](std::string name) {
    clients.push_back(name);
    broadcast(
        ((std::string("+++ \"") + name) + std::string("\" connected +++\n")));
  };
  auto send = [=](std::string name, std::string msg) {
    broadcast((((name + std::string("> ")) + msg) + std::string("\n")));
  };
  auto remove = [=](std::string name) {
    clients = removeName(clients, name);
    broadcast(((std::string("--- \"") + name) +
               std::string("\" disconnected ---\n")));
  };
  add(std::string("Alice"));
  add(std::string("Bob"));
  send(std::string("Alice"), std::string("Hello Bob!"));
  send(std::string("Bob"), std::string("Hi Alice!"));
  remove(std::string("Bob"));
  remove(std::string("Alice"));
  broadcast(std::string("Server stopping!\n"));
}

int main() {
  main();
  return 0;
}
