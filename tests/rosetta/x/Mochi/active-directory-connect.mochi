// Mochi implementation of Rosetta "Active Directory Connect" task

fun connect(client: map<string, any>): bool {
  return client["Host"] != ""
}

fun main() {
  let client = {
    "Base": "dc=example,dc=com",
    "Host": "ldap.example.com",
    "Port": 389,
    "UseSSL": false,
    "BindDN": "uid=readonlyuser,ou=People,dc=example,dc=com",
    "BindPassword": "readonlypassword",
    "UserFilter": "(uid=%s)",
    "GroupFilter": "(memberUid=%s)",
    "Attributes": ["givenName", "sn", "mail", "uid"],
  }
  if connect(client) {
    print("Connected to " + client["Host"])
  } else {
    print("Failed to connect")
  }
}

main()
