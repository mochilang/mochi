# Code generated by Mochi transpiler.
# Version 0.10.40, generated on 2025-07-25 17:48 +0700
import json
import os
import resource
import time

import sys
sys.set_int_max_str_digits(0)


_now_seed = 0
_now_seeded = False
s = os.getenv("MOCHI_NOW_SEED")
if s and s != "":
    try:
        _now_seed = int(s)
        _now_seeded = True
    except Exception:
        pass

def _now():
    global _now_seed
    if _now_seeded:
        _now_seed = (_now_seed * 1664525 + 1013904223) % 2147483647
        return _now_seed
    return int(time.time_ns())

def nextRand(seed):
    return (seed * 1664525 + 1013904223) % 2147483647
def shuffleChars(s, seed):
    chars = []
    i = 0
    while i < len(s):
        chars = chars + [s[i:i + 1]]
        i = i + 1
    sd = seed
    idx = len(chars) - 1
    while idx > 0:
        sd = nextRand(sd)
        j = sd % (idx + 1)
        tmp = chars[idx]
        chars[idx] = chars[j]
        chars[j] = tmp
        idx = idx - 1
    res = ""
    i = 0
    while i < len(chars):
        res = res + chars[i]
        i = i + 1
    return [res, sd]
def bestShuffle(s, seed):
    r = shuffleChars(s, seed)
    t = r[0]
    sd = r[1]
    arr = []
    i = 0
    while i < len(t):
        arr = arr + [t[i:i + 1]]
        i = i + 1
    i = 0
    while i < len(arr):
        j = 0
        while j < len(arr):
            if i != j and arr[i] != s[j:j + 1] and arr[j] != s[i:i + 1]:
                tmp = arr[i]
                arr[i] = arr[j]
                arr[j] = tmp
                break
            j = j + 1
        i = i + 1
    count = 0
    i = 0
    while i < len(arr):
        if arr[i] == s[i:i + 1]:
            count = count + 1
        i = i + 1
    out = ""
    i = 0
    while i < len(arr):
        out = out + arr[i]
        i = i + 1
    return [out, sd, count]
def main():
    _bench_mem_start = resource.getrusage(resource.RUSAGE_SELF).ru_maxrss
    _bench_start = _now()
    ts = ["abracadabra", "seesaw", "elk", "grrrrrr", "up", "a"]
    seed = 1
    i = 0
    while i < len(ts):
        r = bestShuffle(ts[i], seed)
        shuf = r[0]
        seed = r[1]
        cnt = r[2]
        print(ts[i] + " -> " + shuf + " (" + str(cnt) + ")")
        i = i + 1
    _bench_end = _now()
    _bench_mem_end = resource.getrusage(resource.RUSAGE_SELF).ru_maxrss
    print(json.dumps({"duration_us": (_bench_end - _bench_start)//1000, "memory_bytes": _bench_mem_end*1024, "name": "main"}, indent=2))
main()
