-- Generated by Mochi v0.10.41 on 2025-07-27 15:57 GMT+7
function input()
  return io.read('*l')
end
local _nil = {}
function isPrime(n)
  if (n < 2) then
    return false
  end
  if ((n % 2) == 0) then
    return (n == 2)
  end
  local d = 3
  while ((d * d) <= n) do
    if ((n % d) == 0) then
      return false
    end
    d = (d + 2)
  end
  return true
end;

function revInt(n)
  local r = 0
  local t = n
  while (t > 0) do
    r = ((r * 10) + (t % 10))
    t = math.floor((t // 10))
  end
  return r
end;

function main()
  local emirps = {}
  local n = 2
  while ((function(v)
  if type(v) == 'table' and v.items ~= nil then
    return #v.items
  elseif type(v) == 'table' and (v[1] == nil) then
      local c = 0
      for _ in pairs(v) do c = c + 1 end
      return c
    elseif type(v) == 'string' or type(v) == 'table' then
        return #v
      else
        return 0
      end
    end)(emirps) < 10000) do
      if isPrime(n) then
        local r = revInt(n)
        if ((r ~= n) and isPrime(r)) then
          emirps = (function(lst, item)
          local res = {table.unpack(lst)}
          table.insert(res, item)
          return res
        end)(emirps, n)
      end
    end
    n = (n + 1)
  end
  local line = "   ["
  local i = 0
  while (i < 20) do
    line = (line .. tostring(emirps[i + 1]))
    if (i < 19) then
      line = (line .. ", ")
    end
    i = (i + 1)
  end
  line = (line .. "]")
  print("First 20:")
  print(line)
  line = "  ["
  for _, e in ipairs(emirps) do
    if (e >= 8000) then
      break
    end
    if (e >= 7700) then
      line = ((line .. tostring(e)) .. ", ")
    end
  end
  line = (line .. "]")
  print("Between 7700 and 8000:")
  print(line)
  print("10000th:")
  print((("   [" .. tostring(emirps[9999 + 1])) .. "]"))
end;

main();
