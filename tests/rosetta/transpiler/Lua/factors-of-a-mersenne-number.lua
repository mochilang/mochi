-- Generated by Mochi v0.10.42 on 2025-07-27 17:23 GMT+7
function input()
  return io.read('*l')
end
local _nil = {}
function powf(base, exp)
  local result = 1
  local i = 0
  while (i < exp) do
    result = (result * base)
    i = (i + 1)
  end
  return result
end;

function sqrtApprox(x)
  if (x <= 0) then
    return 0
  end
  local g = x
  local i = 0
  while (i < 20) do
    g = ((g + (x / g)) / 2)
    i = (i + 1)
  end
  return g
end;

function modPow(base, exp, mod)
  local result = (1 % mod)
  local b = (base % mod)
  local e = exp
  while (e > 0) do
    if ((e % 2) == 1) then
      result = ((result * b) % mod)
    end
    b = ((b * b) % mod)
    e = (e // 2)
  end
  return result
end;

function mtest(m)
  if (m < 4) then
    print((((tostring(m) .. " < 4.  M") .. tostring(m)) .. " not tested."))
    return
  end
  local flimit = sqrtApprox((powf(2, m) - 1))
  local qlast = 0
  if (flimit < qlimit) then
    qlast = math.floor(flimit)
  else
    qlast = qlimit
  end
  local composite = {}
  local i = 0
  while (i <= qlast) do
    composite = (function(lst, item)
    local res = {table.unpack(lst)}
    table.insert(res, item)
    return res
  end)(composite, false)
  i = (i + 1)
end
local sq = math.floor(sqrtApprox(qlast))
local q = 3
while true do
  if (q <= sq) then
    local j = (q * q)
    while (j <= qlast) do
      composite[j + 1] = true
      j = (j + q)
    end
  end
  local q8 = (q % 8)
  if (((q8 == 1) or (q8 == 7)) and (modPow(2, m, q) == 1)) then
    print(((("M" .. tostring(m)) .. " has factor ") .. tostring(q)))
    return
  end
  while true do
    q = (q + 2)
    if (q > qlast) then
      print((("No factors of M" .. tostring(m)) .. " found."))
      return
    end
    if (not composite[q + 1]) then
      break
    end
  end
end
end;

function main()
  mtest(31)
  mtest(67)
end;

qlimit = 50000;

main();
