-- Generated by Mochi v0.10.41 on 2025-07-26 19:01 GMT+7
function input()
  return io.read('*l')
end
local _nil = {}
function operation(d)
  if (function(lst,v) for _,x in ipairs(lst) do if x==v then return true end end return false end)(d.delegate, "thing") then
    return d.delegate.thing()
  end
  return "default implementation"
end;

function newDelegate()
  local m = {}
  m.thing = function()
  return "delegate implementation"
end
return m
end;

a = {delegate = {}};

print(operation(a));

a.delegate = {};

print(operation(a));

a.delegate = newDelegate();

print(operation(a));
