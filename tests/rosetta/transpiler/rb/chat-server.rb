# Generated by Mochi transpiler v0.10.39 on 2025-07-24 20:52 +0700

def _add(a, b)
  if a.is_a?(Array) && b.is_a?(String)
    a.join + b
  elsif a.is_a?(String) && b.is_a?(Array)
    a + b.join
  else
    a + b
  end
end


def _padStart(s, len, ch)
  s.rjust(len, ch)
end

def removeName(names, name)
  out = []
  names.each do |n|
    if n != name
      out = out + [n]
    end
  end
  return out
end
def main()
  clients = []
  broadcast = ->(msg) {
    puts(msg)
  }
  add = ->(name) {
    clients = clients + [name]
    broadcast.call(_add(_add("+++ \"", name), "\" connected +++\n"))
  }
  send = ->(name, msg) {
    broadcast.call(_add(_add(_add(name, "> "), msg), "\n"))
  }
  remove = ->(name) {
    clients = removeName(clients, name)
    broadcast.call(_add(_add("--- \"", name), "\" disconnected ---\n"))
  }
  add.call("Alice")
  add.call("Bob")
  send.call("Alice", "Hello Bob!")
  send.call("Bob", "Hi Alice!")
  remove.call("Bob")
  remove.call("Alice")
  broadcast.call("Server stopping!\n")
end
main()
