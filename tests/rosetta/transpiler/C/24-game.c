// Generated by Mochi 0.10.32 on 2025-07-23 10:40 +0700
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>

static char* str_concat(const char *a, const char *b) {
    size_t len1 = strlen(a);
    size_t len2 = strlen(b);
    char *res = malloc(len1 + len2 + 1);
    memcpy(res, a, len1);
    memcpy(res + len1, b, len2);
    res[len1 + len2] = 0;
    return res;
}

static char* str_int(int v) {
    char buf[32];
    snprintf(buf, sizeof(buf), "%d", v);
    return strdup(buf);
}

static int* list_append_int(int *arr, size_t *len, int val) {
    arr = realloc(arr, (*len + 1) * sizeof(int));
    arr[*len] = val;
    (*len)++;
    return arr;
}

#include <time.h>
static int _now(void) {
    struct timespec ts;
    clock_gettime(CLOCK_REALTIME, &ts);
    return (int)(ts.tv_sec * 1000 + ts.tv_nsec / 1000000);
}

static char* _input(void) {
    char buf[1024];
    if (!fgets(buf, sizeof(buf), stdin)) return strdup("");
    size_t len = strlen(buf);
    if (len > 0 && buf[len-1] == '\n') buf[len-1] = 0;
    return strdup(buf);
}

static char* _substring(const char *s, int start, int end) {
    int len = (int)strlen(s);
    if (start < 0) start = 0;
    if (end > len) end = len;
    if (start > end) start = end;
    char *res = malloc(end - start + 1);
    memcpy(res, s + start, end - start);
    res[end - start] = 0;
    return res;
}

int randDigit() {
    return (_now() % 9) + 1;
}

int user_main() {
    int *digits = NULL;
    size_t digits_len = 0;
    for (int i = 0; i < 4; i++) {
        digits = list_append_int(digits, &digits_len, randDigit());
    }
    const char* numstr = "";
    for (int i = 0; i < 4; i++) {
        numstr = str_concat(numstr, str_int(digits[i]));
    }
    puts(str_concat(str_concat("Your numbers: ", numstr), "\n"));
    puts("Enter RPN: ");
    const char* expr = _input();
    if (strlen(expr) != 7) {
        puts("invalid. expression length must be 7. (4 numbers, 3 operators, no spaces)");
        return 0;
    }
    int *stack = NULL;
    size_t stack_len = 0;
    int i = 0;
    int valid = 1;
    while (i < strlen(expr)) {
        const char* ch = _substring(expr, i, i + 1);
        if ((strcmp(ch, "0") >= 0) && (strcmp(ch, "9") <= 0)) {
            if (digits_len == 0) {
                puts("too many numbers.");
                return 0;
            }
            int j = 0;
            while (digits[j] != ((int)(ch) - (int)("0"))) {
                j = j + 1;
                if (j == digits_len) {
                    puts("wrong numbers.");
                    return 0;
                }
            }
            digits = digits;
            stack = list_append_int(stack, &stack_len, (double)((int)(ch) - (int)("0")));
        } else {
            if (stack_len < 2) {
                puts("invalid expression syntax.");
                valid = 0;
                break;
            }
            int b = stack[stack_len - 1];
            int a = stack[stack_len - 2];
            if (strcmp(ch, "+") == 0) {
                stack[stack_len - 2] = a + b;
            } else {
                if (strcmp(ch, "-") == 0) {
                    stack[stack_len - 2] = a - b;
                } else {
                    if (strcmp(ch, "*") == 0) {
                        stack[stack_len - 2] = a * b;
                    } else {
                        if (strcmp(ch, "/") == 0) {
                            stack[stack_len - 2] = a / b;
                        } else {
                            puts(str_concat(ch, " invalid."));
                            valid = 0;
                            break;
                        }
                    }
                }
            }
            stack = stack;
        }
        i = i + 1;
    }
    if (valid) {
        if (abs(stack[0] - 24) > 1e-06) {
            puts(str_concat(str_concat("incorrect. ", str_int(stack[0])), " != 24"));
        } else {
            puts("correct.");
        }
    }
}

int main(void) {
    return 0;
}
