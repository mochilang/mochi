compile failed: exit status 1: /tmp/ctranspile3701776101/canny-edge-detector.mochi.c: In function ‘_mem’:
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:102:12: warning: ‘mallinfo’ is deprecated [-Wdeprecated-declarations]
  102 |     struct mallinfo mi = mallinfo();
      |            ^~~~~~~~
In file included from /tmp/ctranspile3701776101/canny-edge-detector.mochi.c:5:
/usr/include/malloc.h:114:24: note: declared here
  114 | extern struct mallinfo mallinfo (void) __THROW __MALLOC_DEPRECATED;
      |                        ^~~~~~~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c: In function ‘gradient’:
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:167:52: warning: passing argument 3 of ‘list_append_int’ makes integer from pointer without a cast [-Wint-conversion]
  167 |     hx = list_append_int(hx, &hx_len, (long long[]){ -(1.0), 0.0, 1.0 });
      |                                                    ^~~~~~~~~~~~~~~~~~~~
      |                                                    |
      |                                                    long long int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:31:56: note: expected ‘int’ but argument is of type ‘long long int *’
   31 | static int* list_append_int(int *arr, size_t *len, int val) {
      |                                                    ~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:168:49: warning: passing argument 3 of ‘list_append_int’ makes integer from pointer without a cast [-Wint-conversion]
  168 |     hx = list_append_int(hx, &hx_len, (double[]){ -(2.0), 0.0, 2.0 });
      |                                                 ^~~~~~~~~~~~~~~~~~~~
      |                                                 |
      |                                                 double *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:31:56: note: expected ‘int’ but argument is of type ‘double *’
   31 | static int* list_append_int(int *arr, size_t *len, int val) {
      |                                                    ~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:169:52: warning: passing argument 3 of ‘list_append_int’ makes integer from pointer without a cast [-Wint-conversion]
  169 |     hx = list_append_int(hx, &hx_len, (long long[]){ -(1.0), 0.0, 1.0 });
      |                                                    ^~~~~~~~~~~~~~~~~~~~
      |                                                    |
      |                                                    long long int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:31:56: note: expected ‘int’ but argument is of type ‘long long int *’
   31 | static int* list_append_int(int *arr, size_t *len, int val) {
      |                                                    ~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:172:52: warning: passing argument 3 of ‘list_append_int’ makes integer from pointer without a cast [-Wint-conversion]
  172 |     hy = list_append_int(hy, &hy_len, (long long[]){ 1.0, 2.0, 1.0 });
      |                                                    ^~~~~~~~~~~~~~~~~
      |                                                    |
      |                                                    long long int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:31:56: note: expected ‘int’ but argument is of type ‘long long int *’
   31 | static int* list_append_int(int *arr, size_t *len, int val) {
      |                                                    ~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:173:52: warning: passing argument 3 of ‘list_append_int’ makes integer from pointer without a cast [-Wint-conversion]
  173 |     hy = list_append_int(hy, &hy_len, (long long[]){ 0.0, 0.0, 0.0 });
      |                                                    ^~~~~~~~~~~~~~~~~
      |                                                    |
      |                                                    long long int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:31:56: note: expected ‘int’ but argument is of type ‘long long int *’
   31 | static int* list_append_int(int *arr, size_t *len, int val) {
      |                                                    ~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:174:52: warning: passing argument 3 of ‘list_append_int’ makes integer from pointer without a cast [-Wint-conversion]
  174 |     hy = list_append_int(hy, &hy_len, (long long[]){ -(1.0), -(2.0), -(1.0) });
      |                                                    ^~~~~~~~~~~~~~~~~~~~~~~~~~
      |                                                    |
      |                                                    long long int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:31:56: note: expected ‘int’ but argument is of type ‘long long int *’
   31 | static int* list_append_int(int *arr, size_t *len, int val) {
      |                                                    ~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:175:71: error: ‘hx_lens’ undeclared (first use in this function); did you mean ‘hx_len’?
  175 |     double **gx = conv2d(img, img_len, img_lens, img_len, hx, hx_len, hx_lens, hx_len);
      |                                                                       ^~~~~~~
      |                                                                       hx_len
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:175:71: note: each undeclared identifier is reported only once for each function it appears in
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:175:59: warning: passing argument 5 of ‘conv2d’ from incompatible pointer type [-Wincompatible-pointer-types]
  175 |     double **gx = conv2d(img, img_len, img_lens, img_len, hx, hx_len, hx_lens, hx_len);
      |                                                           ^~
      |                                                           |
      |                                                           int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:115:101: note: expected ‘double **’ but argument is of type ‘int *’
  115 | double * * conv2d(double * * img, size_t img_len, size_t* img_lens, size_t img_lens_len, double * * k, size_t k_len, size_t* k_lens, size_t k_lens_len) {
      |                                                                                          ~~~~~~~~~~~^
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:179:71: error: ‘hy_lens’ undeclared (first use in this function); did you mean ‘hy_len’?
  179 |     double **gy = conv2d(img, img_len, img_lens, img_len, hy, hy_len, hy_lens, hy_len);
      |                                                                       ^~~~~~~
      |                                                                       hy_len
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:179:59: warning: passing argument 5 of ‘conv2d’ from incompatible pointer type [-Wincompatible-pointer-types]
  179 |     double **gy = conv2d(img, img_len, img_lens, img_len, hy, hy_len, hy_lens, hy_len);
      |                                                           ^~
      |                                                           |
      |                                                           int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:115:101: note: expected ‘double **’ but argument is of type ‘int *’
  115 | double * * conv2d(double * * img, size_t img_len, size_t* img_lens, size_t img_lens_len, double * * k, size_t k_len, size_t* k_lens, size_t k_lens_len) {
      |                                                                                          ~~~~~~~~~~~^
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c: In function ‘threshold’:
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:220:59: warning: passing argument 1 of ‘list_append_int_new’ from incompatible pointer type [-Wincompatible-pointer-types]
  220 |                                 row = list_append_int_new(row, row_len, 1LL);
      |                                                           ^~~
      |                                                           |
      |                                                           long long int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:38:44: note: expected ‘const int *’ but argument is of type ‘long long int *’
   38 | static int* list_append_int_new(const int *arr, size_t len, int val) {
      |                                 ~~~~~~~~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:220:37: warning: assignment to ‘long long int *’ from incompatible pointer type ‘int *’ [-Wincompatible-pointer-types]
  220 |                                 row = list_append_int_new(row, row_len, 1LL);
      |                                     ^
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:222:59: warning: passing argument 1 of ‘list_append_int_new’ from incompatible pointer type [-Wincompatible-pointer-types]
  222 |                                 row = list_append_int_new(row, row_len, 0LL);
      |                                                           ^~~
      |                                                           |
      |                                                           long long int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:38:44: note: expected ‘const int *’ but argument is of type ‘long long int *’
   38 | static int* list_append_int_new(const int *arr, size_t len, int val) {
      |                                 ~~~~~~~~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:222:37: warning: assignment to ‘long long int *’ from incompatible pointer type ‘int *’ [-Wincompatible-pointer-types]
  222 |                                 row = list_append_int_new(row, row_len, 0LL);
      |                                     ^
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:226:34: warning: passing argument 1 of ‘list_append_strptr’ from incompatible pointer type [-Wincompatible-pointer-types]
  226 |         out = list_append_strptr(out, &out_len, row);
      |                                  ^~~
      |                                  |
      |                                  long long int **
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:66:55: note: expected ‘const char ***’ but argument is of type ‘long long int **’
   66 | static const char*** list_append_strptr(const char ***arr, size_t *len, const char **val) {
      |                                         ~~~~~~~~~~~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:226:49: warning: passing argument 3 of ‘list_append_strptr’ from incompatible pointer type [-Wincompatible-pointer-types]
  226 |         out = list_append_strptr(out, &out_len, row);
      |                                                 ^~~
      |                                                 |
      |                                                 long long int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:66:86: note: expected ‘const char **’ but argument is of type ‘long long int *’
   66 | static const char*** list_append_strptr(const char ***arr, size_t *len, const char **val) {
      |                                                                         ~~~~~~~~~~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:226:13: warning: assignment to ‘long long int **’ from incompatible pointer type ‘const char ***’ [-Wincompatible-pointer-types]
  226 |         out = list_append_strptr(out, &out_len, row);
      |             ^
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c: In function ‘user_main’:
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:253:55: warning: passing argument 3 of ‘list_append_int’ makes integer from pointer without a cast [-Wint-conversion]
  253 |     img = list_append_int(img, &img_len, (long long[]){ 0.0, 0.0, 0.0, 0.0, 0.0 });
      |                                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~
      |                                                       |
      |                                                       long long int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:31:56: note: expected ‘int’ but argument is of type ‘long long int *’
   31 | static int* list_append_int(int *arr, size_t *len, int val) {
      |                                                    ~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:254:55: warning: passing argument 3 of ‘list_append_int’ makes integer from pointer without a cast [-Wint-conversion]
  254 |     img = list_append_int(img, &img_len, (long long[]){ 0.0, 255.0, 255.0, 255.0, 0.0 });
      |                                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      |                                                       |
      |                                                       long long int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:31:56: note: expected ‘int’ but argument is of type ‘long long int *’
   31 | static int* list_append_int(int *arr, size_t *len, int val) {
      |                                                    ~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:255:55: warning: passing argument 3 of ‘list_append_int’ makes integer from pointer without a cast [-Wint-conversion]
  255 |     img = list_append_int(img, &img_len, (long long[]){ 0.0, 255.0, 255.0, 255.0, 0.0 });
      |                                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      |                                                       |
      |                                                       long long int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:31:56: note: expected ‘int’ but argument is of type ‘long long int *’
   31 | static int* list_append_int(int *arr, size_t *len, int val) {
      |                                                    ~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:256:55: warning: passing argument 3 of ‘list_append_int’ makes integer from pointer without a cast [-Wint-conversion]
  256 |     img = list_append_int(img, &img_len, (long long[]){ 0.0, 255.0, 255.0, 255.0, 0.0 });
      |                                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      |                                                       |
      |                                                       long long int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:31:56: note: expected ‘int’ but argument is of type ‘long long int *’
   31 | static int* list_append_int(int *arr, size_t *len, int val) {
      |                                                    ~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:257:55: warning: passing argument 3 of ‘list_append_int’ makes integer from pointer without a cast [-Wint-conversion]
  257 |     img = list_append_int(img, &img_len, (long long[]){ 0.0, 0.0, 0.0, 0.0, 0.0 });
      |                                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~
      |                                                       |
      |                                                       long long int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:31:56: note: expected ‘int’ but argument is of type ‘long long int *’
   31 | static int* list_append_int(int *arr, size_t *len, int val) {
      |                                                    ~~~~^~~
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:258:41: error: ‘img_lens’ undeclared (first use in this function); did you mean ‘img_len’?
  258 |     double **g = gradient(img, img_len, img_lens, img_len);
      |                                         ^~~~~~~~
      |                                         img_len
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:258:27: warning: passing argument 1 of ‘gradient’ from incompatible pointer type [-Wincompatible-pointer-types]
  258 |     double **g = gradient(img, img_len, img_lens, img_len);
      |                           ^~~
      |                           |
      |                           int *
/tmp/ctranspile3701776101/canny-edge-detector.mochi.c:164:32: note: expected ‘double **’ but argument is of type ‘int *’
  164 | double * * gradient(double * * img, size_t img_len, size_t* img_lens, size_t img_lens_len) {
      |                     ~~~~~~~~~~~^~~

