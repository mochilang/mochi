// Generated by Mochi 0.10.32 on 2025-07-31 12:13 +0700
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <malloc.h>


static int* list_append_int(int *arr, size_t *len, int val) {
    arr = realloc(arr, (*len + 1) * sizeof(int));
    arr[*len] = val;
    (*len)++;
    return arr;
}

static int** list_append_intptr(int **arr, size_t *len, int *val) {
    arr = realloc(arr, (*len + 1) * sizeof(int*));
    arr[*len] = val;
    (*len)++;
    return arr;
}

static size_t* list_append_szt(size_t *arr, size_t *len, size_t val) {
    arr = realloc(arr, (*len + 1) * sizeof(size_t));
    arr[*len] = val;
    (*len)++;
    return arr;
}

#include <time.h>
#include <stdlib.h>
static int seeded_now = 0;
static long long now_seed = 0;
static long long _now(void) {
    if (!seeded_now) {
        const char *s = getenv("MOCHI_NOW_SEED");
        if (s && *s) {
            now_seed = atoll(s);
            seeded_now = 1;
        }
    }
    if (seeded_now) {
        now_seed = (now_seed * 1664525 + 1013904223) % 2147483647;
        return now_seed;
    }
    struct timespec ts;
    clock_gettime(CLOCK_REALTIME, &ts);
    return (long long)(ts.tv_sec * 1000000000LL + ts.tv_nsec);
}

static long long _mem(void) {
    struct mallinfo mi = mallinfo();
    return (long long)mi.uordblks;
}

int w = 400LL;
int h = 300LL;
int n = 15000LL;
int frost = 255LL;
int **grid = NULL;
size_t grid_len = 0;
size_t *grid_lens = NULL;
size_t grid_lens_len = 0;
int y = 0LL;
int a = 0LL;

int inBounds(int x, int y);
int hasNeighbor(int x, int y);
int main(void);

int inBounds(int x, int y) {
    return (((x >= 0LL) && (x < w)) && (y >= 0LL)) && (y < h);
}

int hasNeighbor(int x, int y) {
    int dy = -1LL;
    while (dy <= 1LL) {
        int dx = -1LL;
        while (dx <= 1LL) {
            if (!((dx == 0LL) && (dy == 0LL))) {
                int nx = x + dx;
                int ny = y + dy;
                if (inBounds(nx, ny) && (grid[(int)(ny)][(int)(nx)] == frost)) {
                    return 1LL;
                }
            }
            dx = dx + 1LL;
        }
        dy = dy + 1LL;
    }
    return 0LL;
}

int main(void) {
    {
        long long __start = _now();
        long long __mem_start = _mem();
        while (y < h) {
            int *row = NULL;
            size_t row_len = 0;
            int x = 0LL;
            while (x < w) {
                row = list_append_int(row, &row_len, 0LL);
                x = x + 1LL;
            }
            grid = list_append_intptr(grid, &grid_len, row);
            grid_lens = list_append_szt(grid_lens, &grid_lens_len, row_len);
            y = y + 1LL;
        }
        grid[(int)(h / 3LL)][(int)(w / 3LL)] = frost;
        while (a < n) {
            int px = _now() % w;
            int py = _now() % h;
            if (grid[(int)(py)][(int)(px)] == frost) {
                int lost = 0LL;
                while (1LL) {
                    px = (px + (_now() % 3LL)) - 1LL;
                    py = (py + (_now() % 3LL)) - 1LL;
                    if (!(inBounds(px, py))) {
                        lost = 1LL;
                        break;
                    }
                    if (grid[(int)(py)][(int)(px)] != frost) {
                        break;
                    }
                }
                if (lost) {
                    continue;
                }
            } else {
                int lost = 0LL;
                while (!(hasNeighbor(px, py))) {
                    px = (px + (_now() % 3LL)) - 1LL;
                    py = (py + (_now() % 3LL)) - 1LL;
                    if (!(inBounds(px, py))) {
                        lost = 1LL;
                        break;
                    }
                }
                if (lost) {
                    continue;
                }
            }
            grid[(int)(py)][(int)(px)] = frost;
            a = a + 1LL;
        }
        long long __end = _now();
        long long __mem_end = _mem();
        long long __dur_us = (__end - __start) / 1000;
        long long __mem_bytes = __mem_end - __mem_start;
        printf("{\n  \"duration_us\": %-lld,\n  \"memory_bytes\": %-lld,\n  \"name\": \"main\"\n}\n", __dur_us, __mem_bytes);
    }
    return 0;
}
