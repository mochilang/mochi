// Generated by Mochi 0.10.32 on 2025-08-05 01:08 +0000
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <malloc.h>
#include <math.h>

size_t replaceCol_len;
size_t *replaceCol_lens;

static char* str_concat(const char *a, const char *b) {
    size_t len1 = strlen(a);
    size_t len2 = strlen(b);
    char *res = malloc(len1 + len2 + 1);
    memcpy(res, a, len1);
    memcpy(res + len1, b, len2);
    res[len1 + len2] = 0;
    return res;
}

static char* str_float(double v) {
    char buf[64];
    snprintf(buf, sizeof(buf), "%g", v);
    return strdup(buf);
}

static double* list_append_double(double *arr, size_t *len, double val) {
    arr = realloc(arr, (*len + 1) * sizeof(double));
    arr[*len] = val;
    (*len)++;
    return arr;
}

static int** list_append_intptr(int **arr, size_t *len, int *val) {
    arr = realloc(arr, (*len + 1) * sizeof(int*));
    arr[*len] = val;
    (*len)++;
    return arr;
}

static double** list_append_doubleptr(double **arr, size_t *len, double *val) {
    arr = realloc(arr, (*len + 1) * sizeof(double*));
    arr[*len] = val;
    (*len)++;
    return arr;
}

static size_t* list_append_szt(size_t *arr, size_t *len, size_t val) {
    arr = realloc(arr, (*len + 1) * sizeof(size_t));
    arr[*len] = val;
    (*len)++;
    return arr;
}

#include <time.h>
#include <stdlib.h>
static int seeded_now = 0;
static long long now_seed = 0;
static long long _now(void) {
    if (!seeded_now) {
        const char *s = getenv("MOCHI_NOW_SEED");
        if (s && *s) {
            now_seed = atoll(s);
            seeded_now = 1;
        }
    }
    if (seeded_now) {
        now_seed = (now_seed * 1664525 + 1013904223) % 2147483647;
        return now_seed;
    }
    struct timespec ts;
    clock_gettime(CLOCK_REALTIME, &ts);
    return (long long)(ts.tv_sec * 1000000000LL + ts.tv_nsec);
}

static long long _mem(void) {
    long long size = 0, rss = 0;
    FILE *f = fopen("/proc/self/statm", "r");
    if (f) {
        if (fscanf(f, "%lld %lld", &size, &rss) != 2) rss = 0;
        fclose(f);
    }
    return rss * (long long)sysconf(_SC_PAGESIZE);
}

double m_0[4] = {2.0, -(1.0), 5.0, 1.0};
double m_1[4] = {3.0, 2.0, 2.0, -(6.0)};
double m_2[4] = {1.0, 3.0, 3.0, -(1.0)};
double m_3[4] = {5.0, -(2.0), -(3.0), 3.0};
double *m_init[4] = {m_0, m_1, m_2, m_3};
double **m = m_init;
size_t m_len = 4;
size_t m_lens_init[4] = {4, 4, 4, 4};
size_t *m_lens = m_lens_init;
size_t m_lens_len = 4;
double v_init[4] = {-(3.0), -(32.0), -(47.0), 49.0};
double *v = v_init;
size_t v_len = 4;
double d = 0;
double *x = NULL;
size_t x_len = 0;
long long i = 0LL;
const char* s = "[";
long long j = 0LL;

double det(double * * m, size_t m_len, size_t* m_lens, size_t m_lens_len);
double * * replaceCol(double * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long col, double * v, size_t v_len);
int main(void);

double det(double * * m, size_t m_len, size_t* m_lens, size_t m_lens_len) {
    size_t n = m_len;
    if (n == 1LL) {
        return m[(int)(0LL)][(int)(0LL)];
    }
    double total = 0.0;
    double sign = 1.0;
    long long c = 0LL;
    while (c < n) {
        double **sub = NULL;
        size_t sub_len = 0;
        size_t *sub_lens = NULL;
        size_t sub_lens_len = 0;
        long long r = 1LL;
        while (r < n) {
            double *row = NULL;
            size_t row_len = 0;
            long long cc = 0LL;
            while (cc < n) {
                if (cc != c) {
                    row = list_append_double(row, &row_len, m[(int)(r)][(int)(cc)]);
                }
                cc = cc + 1LL;
            }
            sub = list_append_doubleptr(sub, &sub_len, row);
            sub_lens = list_append_szt(sub_lens, &sub_lens_len, row_len);
            r = r + 1LL;
        }
        total = total + ((sign * m[(int)(0LL)][(int)(c)]) * det(sub, sub_len, sub_lens, sub_len));
        sign = sign * -(1.0);
        c = c + 1LL;
    }
    return total;
}

double * * replaceCol(double * * m, size_t m_len, size_t* m_lens, size_t m_lens_len, long long col, double * v, size_t v_len) {
    double **res = NULL;
    size_t res_len = 0;
    size_t *res_lens = NULL;
    size_t res_lens_len = 0;
    long long r = 0LL;
    while (r < m_len) {
        double *row = NULL;
        size_t row_len = 0;
        long long c = 0LL;
        while (c < m_lens[r]) {
            if (c == col) {
                row = list_append_double(row, &row_len, v[(int)(r)]);
            } else {
                row = list_append_double(row, &row_len, m[(int)(r)][(int)(c)]);
            }
            c = c + 1LL;
        }
        res = list_append_doubleptr(res, &res_len, row);
        res_lens = list_append_szt(res_lens, &res_lens_len, row_len);
        r = r + 1LL;
    }
    return replaceCol_lens = res_lens, replaceCol_len = res_len, res;
}

int main(void) {
    {
        long long __start = _now();
        d = det(m, m_len, m_lens, m_len);
        while (i < 4LL) {
            double **mc = replaceCol(m, m_len, m_lens, m_len, i, v, v_len);
            size_t mc_len = replaceCol_len;
            size_t *mc_lens = replaceCol_lens;
            size_t mc_lens_len = replaceCol_len;
            x = list_append_double(x, &x_len, det(mc, mc_len, mc_lens, mc_len) / d);
            i = i + 1LL;
        }
        while (j < x_len) {
            s = str_concat(s, str_float(x[(int)(j)]));
            if (j < (x_len - 1LL)) {
                s = str_concat(s, " ");
            }
            j = j + 1LL;
        }
        s = str_concat(s, "]");
        puts(s);
        long long __end = _now();
        long long __dur_us = (__end - __start) / 1000;
        long long __mem_bytes = _mem();
        printf("{\n  \"duration_us\": %-lld,\n  \"memory_bytes\": %-lld,\n  \"name\": \"main\"\n}\n", __dur_us, __mem_bytes);
    }
    return 0;
}
