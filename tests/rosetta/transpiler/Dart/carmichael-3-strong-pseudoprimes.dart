// Generated by Mochi transpiler
import 'dart:convert';
import 'dart:io';

int _nowSeed = 0;
bool _nowSeeded = false;
void _initNow() {
  var s = Platform.environment['MOCHI_NOW_SEED'];
  if (s != null && s.isNotEmpty) {
    var v = int.tryParse(s);
    if (v != null) {
      _nowSeed = v;
      _nowSeeded = true;
    }
  }
}
int _now() {
  if (_nowSeeded) {
    _nowSeed = (_nowSeed * 1664525 + 1013904223) % 2147483647;
    return _nowSeed;
  }
  return DateTime.now().microsecondsSinceEpoch;
}

String _substr(String s, int start, int end) {
  var n = s.length;
  if (start < 0) start += n;
  if (end < 0) end += n;
  if (start < 0) start = 0;
  if (start > n) start = n;
  if (end < 0) end = 0;
  if (end > n) end = n;
  if (start > end) start = end;
  return s.substring(start, end);
}

int mod(int n, int m) {
  return (n % m + m) % m;
}

bool isPrime(int n) {
  if (n < 2) {
    return false;
  }
  if (n % 2 == 0) {
    return n == 2;
  }
  if (n % 3 == 0) {
    return n == 3;
  }
  int d = 5;
  while (d * d <= n) {
    if (n % d == 0) {
    return false;
  }
    d = d + 2;
    if (n % d == 0) {
    return false;
  }
    d = d + 4;
  }
  return true;
}

String pad(int n, int width) {
  String s = (n).toString();
  while (s.length < width) {
    s = " " + s;
  }
  return s;
}

void carmichael(int p1) {
  for (int h3 = 2; h3 < p1; h3++) {
    for (int d = 1; d < h3 + p1; d++) {
    if ((h3 + p1) * (p1 - 1) % d == 0 && mod(-p1 * p1, h3) == d % h3) {
    num p2 = 1 + (p1 - 1) * (h3 + p1) ~/ d;
    if (!isPrime((p2).toInt())) {
    continue;
  };
    num p3 = 1 + p1 * p2 / h3;
    if (!isPrime((p3).toInt())) {
    continue;
  };
    if (p2 * p3 % (p1 - 1) != 1) {
    continue;
  };
    num c = p1 * p2 * p3;
    print(pad(p1, 2) + "   " + pad((p2).toInt(), 4) + "   " + pad((p3).toInt(), 5) + "     " + (c).toString());
  }
  }
  }
}

void main() {
  var _benchMem0 = ProcessInfo.currentRss;
  var _benchSw = Stopwatch()..start();
  _initNow();
  {
  var _benchMem0 = ProcessInfo.currentRss;
  var _benchSw = Stopwatch()..start();
  print("The following are Carmichael munbers for p1 <= 61:\n");
  print("p1     p2      p3     product");
  print("==     ==      ==     =======");
  for (int p1 = 2; p1 < 62; p1++) {
    if (isPrime(p1)) {
    carmichael(p1);
  }
  }
  _benchSw.stop();
  var _benchMem1 = ProcessInfo.currentRss;
  print(jsonEncode({"duration_us": _benchSw.elapsedMicroseconds, "memory_bytes": (_benchMem1 - _benchMem0).abs(), "name": "main"}));
}
  _benchSw.stop();
  var _benchMem1 = ProcessInfo.currentRss;
  print(jsonEncode({"duration_us": _benchSw.elapsedMicroseconds, "memory_bytes": (_benchMem1 - _benchMem0).abs(), "name": "main"}));
}
