// Generated by Mochi transpiler
import 'dart:convert';
import 'dart:io';

int _nowSeed = 0;
bool _nowSeeded = false;
void _initNow() {
  var s = Platform.environment['MOCHI_NOW_SEED'];
  if (s != null && s.isNotEmpty) {
    var v = int.tryParse(s);
    if (v != null) {
      _nowSeed = v;
      _nowSeeded = true;
    }
  }
}
int _now() {
  if (_nowSeeded) {
    _nowSeed = (_nowSeed * 1664525 + 1013904223) % 2147483647;
    return _nowSeed;
  }
  return DateTime.now().microsecondsSinceEpoch;
}

String _substr(String s, int start, int end) {
  var n = s.length;
  if (start < 0) start += n;
  if (end < 0) end += n;
  if (start < 0) start = 0;
  if (start > n) start = n;
  if (end < 0) end = 0;
  if (end > n) end = n;
  if (start > end) start = end;
  return s.substring(start, end);
}

num xMin = -2.182;
num xMax = 2.6558;
num yMin = 0.0;
num yMax = 9.9983;
int width = 60;
int nIter = 10000;
num dx = xMax - xMin;
num dy = yMax - yMin;
int height = (width * dy / dx).toInt();
List<List<String>> grid = <List<String>>[];
int row = 0;
int seed = 1;
List<int> randInt(int s, int n) {
  int next = (s * 1664525 + 1013904223) % 2147483647;
  return [next, next % n];
}

num x = 0.0;
num y = 0.0;
int ix = (((width).toDouble()) * (x - xMin) / dx).toInt();
int iy = (((height).toDouble()) * (yMax - y) / dy).toInt();
int i = 0;
void main() {
  var _benchMem0 = ProcessInfo.currentRss;
  var _benchSw = Stopwatch()..start();
  _initNow();
  {
  var _benchMem0 = ProcessInfo.currentRss;
  var _benchSw = Stopwatch()..start();
  while (row < height) {
    List<String> line = <String>[];
    int col = 0;
    while (col < width) {
    line = [...line, " "];
    col = col + 1;
  }
    grid = ([...grid, line] as List).map((e) => List<String>.from(e)).toList();
    row = row + 1;
  }
  if (ix >= 0 && ix < width && iy >= 0 && iy < height) {
    grid[iy]![ix] = "*";
  }
  while (i < nIter) {
    List<int> res = randInt(seed, 100);
    seed = res[0];
    dynamic r = res[1];
    if (r.compareTo(85) < 0) {
    dynamic nx = 0.85 * x + 0.04 * y;
    dynamic ny = -0.04 * x + 0.85 * y + 1.6;
    x = nx;
    y = ny;
  } else {
    if (r.compareTo(92) < 0) {
    dynamic nx = 0.2 * x - 0.26 * y;
    dynamic ny = 0.23 * x + 0.22 * y + 1.6;
    x = nx;
    y = ny;
  } else {
    if (r.compareTo(99) < 0) {
    dynamic nx = -0.15 * x + 0.28 * y;
    dynamic ny = 0.26 * x + 0.24 * y + 0.44;
    x = nx;
    y = ny;
  } else {
    x = 0.0;
    y = 0.16 * y;
  };
  };
  }
    ix = (((width).toDouble()) * (x - xMin) / dx).toInt();
    iy = (((height).toDouble()) * (yMax - y) / dy).toInt();
    if (ix >= 0 && ix < width && iy >= 0 && iy < height) {
    grid[iy]![ix] = "*";
  }
    i = i + 1;
  }
  row = 0;
  while (row < height) {
    String line = "";
    int col = 0;
    while (col < width) {
    line = line + grid[row][col];
    col = col + 1;
  }
    print(line);
    row = row + 1;
  }
  _benchSw.stop();
  var _benchMem1 = ProcessInfo.currentRss;
  print(jsonEncode({"duration_us": _benchSw.elapsedMicroseconds, "memory_bytes": (_benchMem1 - _benchMem0).abs(), "name": "main"}));
}
  _benchSw.stop();
  var _benchMem1 = ProcessInfo.currentRss;
  print(jsonEncode({"duration_us": _benchSw.elapsedMicroseconds, "memory_bytes": (_benchMem1 - _benchMem0).abs(), "name": "main"}));
}
