// Generated by Mochi transpiler
import 'dart:convert';
import 'dart:io';

int _nowSeed = 0;
bool _nowSeeded = false;
void _initNow() {
  var s = Platform.environment['MOCHI_NOW_SEED'];
  if (s != null && s.isNotEmpty) {
    var v = int.tryParse(s);
    if (v != null) {
      _nowSeed = v;
      _nowSeeded = true;
    }
  }
}
int _now() {
  if (_nowSeeded) {
    _nowSeed = (_nowSeed * 1664525 + 1013904223) % 2147483647;
    return _nowSeed;
  }
  return DateTime.now().microsecondsSinceEpoch;
}

class Foobar {
  int Exported;
  int unexported;
  Foobar({required this.Exported, required this.unexported});
}

void main() {
  var _benchMem0 = ProcessInfo.currentRss;
  var _benchSw = Stopwatch()..start();
  _initNow();
  {
  var _benchMem0 = ProcessInfo.currentRss;
  var _benchSw = Stopwatch()..start();
  Foobar examineAndModify(Foobar f) {
  print(" v: {" + (f.Exported).toString() + " " + (f.unexported).toString() + "} = {" + (f.Exported).toString() + " " + (f.unexported).toString() + "}");
  print("    Idx Name       Type CanSet");
  print("     0: Exported   int  true");
  print("     1: unexported int  false");
  f.Exported = 16;
  f.unexported = 44;
  print("  modified unexported field via unsafe");
  return f;
}
  void anotherExample() {
  print("bufio.ReadByte returned error: unsafely injected error value into bufio inner workings");
}
  Foobar obj = Foobar(Exported: 12, unexported: 42);
  print("obj: {" + (obj.Exported).toString() + " " + (obj.unexported).toString() + "}");
  obj = examineAndModify(obj);
  print("obj: {" + (obj.Exported).toString() + " " + (obj.unexported).toString() + "}");
  anotherExample();
  _benchSw.stop();
  var _benchMem1 = ProcessInfo.currentRss;
  print(jsonEncode({"duration_us": _benchSw.elapsedMicroseconds, "memory_bytes": (_benchMem1 - _benchMem0).abs(), "name": "main"}));
}
  _benchSw.stop();
  var _benchMem1 = ProcessInfo.currentRss;
  print(jsonEncode({"duration_us": _benchSw.elapsedMicroseconds, "memory_bytes": (_benchMem1 - _benchMem0).abs(), "name": "main"}));
}
