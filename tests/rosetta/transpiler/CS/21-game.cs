// Generated by Mochi 0.10.37 on 2025-07-23 13:55 +0700
using System;
using System.Collections.Generic;
using System.IO;

class Program {
    static bool seededNow = false;
    static int nowSeed = 0;
    static int _now() {
        if (!seededNow) {
            var s = Environment.GetEnvironmentVariable("MOCHI_NOW_SEED");
            if (int.TryParse(s, out var v)) {
                nowSeed = v;
                seededNow = true;
            }
        }
        if (seededNow) {
            nowSeed = (nowSeed*1664525 + 1013904223) % 2147483647;
            return nowSeed;
        }
        return (int)(DateTimeOffset.UtcNow.ToUnixTimeMilliseconds() % int.MaxValue);
    }
    static string[] inputLines;
    static int inputIndex = 0;
    static string _input() {
        if (inputLines == null) {
            var path = Environment.GetEnvironmentVariable("MOCHI_INPUT_FILE");
            if (!string.IsNullOrEmpty(path) && File.Exists(path)) {
                inputLines = File.ReadAllLines(path);
            } else {
                inputLines = new string[]{};
            }
        }
        if (inputIndex < inputLines.Length) {
            return inputLines[inputIndex++];
        }
        return Console.ReadLine();
    }
    static int parseIntStr(string str) {
        int i = 0;
        bool neg = false;
        if (((str.Length > 0) && (str.Substring(0, (1 - 0)) == "-"))) {
            neg = true;
            i = 1;
        };
        int n = 0;
        Dictionary<string, int> digits = new Dictionary<string, int>{{"0", 0}, {"1", 1}, {"2", 2}, {"3", 3}, {"4", 4}, {"5", 5}, {"6", 6}, {"7", 7}, {"8", 8}, {"9", 9}};
        while ((i < str.Length)) {
            n = ((n * 10) + digits[str.Substring(i, ((i + 1) - i))]);
            i = (i + 1);
        };
        if (neg) {
            n = -n;
        };
        return n;
    }

    static void main() {
        int total = 0;
        bool computer = ((_now() % 2) == 0);
        Console.WriteLine("Enter q to quit at any time\n");
        if (computer) {
            Console.WriteLine("The computer will choose first");
        } else {
            Console.WriteLine("You will choose first");
        };
        Console.WriteLine("\n\nRunning total is now 0\n\n");
        int round = 1;
        bool done = false;
        while ((!done)) {
            Console.WriteLine((("ROUND " + round.ToString()) + ":\n\n"));
            int i = 0;
            while (((i < 2) && (!done))) {
                if (computer) {
                    int choice = 0;
                    if ((total < 18)) {
                        choice = ((_now() % 3) + 1);
                    } else {
                        choice = (21 - total);
                    }
                    total = (total + choice);
                    Console.WriteLine(("The computer chooses " + choice.ToString()));
                    Console.WriteLine(("Running total is now " + total.ToString()));
                    if ((total == 21)) {
                        Console.WriteLine("\nSo, commiserations, the computer has won!");
                        done = true;
                    }
                } else {
                    while (true) {
                        Console.WriteLine("Your choice 1 to 3 : ");
                        string line = _input();
                        if (((line == "q") || (line == "Q"))) {
                            Console.WriteLine("OK, quitting the game");
                            done = true;
                            break;
                        }
                        int num = parseIntStr(line);
                        if (((num < 1) || (num > 3))) {
                            if (((total + num) > 21)) {
                                Console.WriteLine("Too big, try again");
                            } else {
                                Console.WriteLine("Out of range, try again");
                            }
                            continue;
                        }
                        if (((total + num) > 21)) {
                            Console.WriteLine("Too big, try again");
                            continue;
                        }
                        total = (total + num);
                        Console.WriteLine(("Running total is now " + total.ToString()));
                        break;
                    }
                    if ((total == 21)) {
                        Console.WriteLine("\nSo, congratulations, you've won!");
                        done = true;
                    }
                }
                Console.WriteLine("\n");
                computer = (!computer);
                i = (i + 1);
            }
            round = (round + 1);
        };
    }

    static void Main() {
        main();
    }
}
