# Generated by Mochi Python compiler
from __future__ import annotations

import dataclasses
import typing

def max(a: int, b: int) -> int:
	if (a > b):
		return a
	else:
		return b

def abs(x: int) -> int:
	if (x < 0):
		return (-x)
	else:
		return x

def height(t: Tree) -> int:
	return (lambda _t=t: 0 if isinstance(_t, Leaf) else (lambda l, _, r: (max(height(l), height(r)) + 1))(_t.left, _t.value, _t.right) if isinstance(_t, Node) else None)()

def balanced(t: Tree) -> bool:
	return (lambda _t=t: True if isinstance(_t, Leaf) else (lambda l, _, r: ((balanced(l) and balanced(r)) and (abs((height(l) - height(r))) <= 1)))(_t.left, _t.value, _t.right) if isinstance(_t, Node) else None)()

def isBalanced(root: Tree) -> bool:
	return balanced(root)

class Tree:
	pass
@dataclasses.dataclass
class Leaf(Tree):
	pass
@dataclasses.dataclass
class Node(Tree):
	left: typing.Any
	value: int
	right: typing.Any

@dataclasses.dataclass
class Info:
	height: int
	balanced: bool

def example_1():
	tree = Node(left=Node(left=Leaf(), value=9, right=Leaf()), value=3, right=Node(left=Node(left=Leaf(), value=15, right=Leaf()), value=20, right=Node(left=Leaf(), value=7, right=Leaf())))
	assert (isBalanced(tree) == True)

def example_2():
	tree = Node(left=Node(left=Node(left=Node(left=Leaf(), value=4, right=Leaf()), value=3, right=Node(left=Leaf(), value=4, right=Leaf())), value=2, right=Node(left=Leaf(), value=3, right=Leaf())), value=1, right=Node(left=Leaf(), value=2, right=Leaf()))
	assert (isBalanced(tree) == False)

def single_node():
	assert (isBalanced(Node(left=Leaf(), value=1, right=Leaf())) == True)

def empty():
	assert (isBalanced(Leaf()) == True)

def main():
	example_1()
	example_2()
	single_node()
	empty()

if __name__ == "__main__":
	main()
