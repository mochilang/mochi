# Generated by Mochi Python compiler
from __future__ import annotations

import dataclasses
import typing

def isSameTree(p: Tree, q: Tree) -> bool:
	return (lambda _t=p: (lambda _t=q: True if isinstance(_t, Leaf) else False)() if isinstance(_t, Leaf) else (lambda pl, pv, pr: (lambda _t=q: (lambda ql, qv, qr: (((pv == qv) and isSameTree(pl, ql)) and isSameTree(pr, qr)))(_t.left, _t.value, _t.right) if isinstance(_t, Node) else False)())(_t.left, _t.value, _t.right) if isinstance(_t, Node) else None)()

class Tree:
	pass
@dataclasses.dataclass
class Leaf(Tree):
	pass
@dataclasses.dataclass
class Node(Tree):
	left: typing.Any
	value: int
	right: typing.Any

def example_1():
	p = Node(left=Node(left=Leaf(), value=2, right=Leaf()), value=1, right=Node(left=Leaf(), value=3, right=Leaf()))
	q = Node(left=Node(left=Leaf(), value=2, right=Leaf()), value=1, right=Node(left=Leaf(), value=3, right=Leaf()))
	assert (isSameTree(p, q) == True)

def example_2():
	p = Node(left=Node(left=Leaf(), value=2, right=Leaf()), value=1, right=Leaf())
	q = Node(left=Leaf(), value=1, right=Node(left=Leaf(), value=2, right=Leaf()))
	assert (isSameTree(p, q) == False)

def example_3():
	p = Node(left=Node(left=Leaf(), value=2, right=Leaf()), value=1, right=Node(left=Leaf(), value=1, right=Leaf()))
	q = Node(left=Node(left=Leaf(), value=1, right=Leaf()), value=1, right=Node(left=Leaf(), value=2, right=Leaf()))
	assert (isSameTree(p, q) == False)

def both_empty():
	assert (isSameTree(Leaf(), Leaf()) == True)

def main():
	example_1()
	example_2()
	example_3()
	both_empty()

if __name__ == "__main__":
	main()
