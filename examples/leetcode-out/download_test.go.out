package main

func expect(cond bool) {
	if !cond { panic("expect failed") }
}

func remove_html_tags(text string) string {
	var i int = 0
	_ = i
	var output string = ""
	_ = output
	for (i < len(text)) {
		if (_indexString(text, i) == "<") {
			var j int = (i + 1)
			_ = j
			for ((j < len(text)) && (_indexString(text, j) != ">")) {
				j = (j + 1)
			}
			if (j < len(text)) {
				i = (j + 1)
			} else {
				i = (i + 1)
			}
		} else {
			output = output + _indexString(text, i)
			i = (i + 1)
		}
	}
	return output
}

func remove_simple_tags() {
	expect((remove_html_tags("<p>hello</p>") == "hello"))
}

func no_tags() {
	expect((remove_html_tags("just text") == "just text"))
}

func nested_tags() {
	expect((remove_html_tags("<div><span>hi</span></div>") == "hi"))
}

func main() {
	remove_simple_tags()
	no_tags()
	nested_tags()
}

func _indexString(s string, i int) string {
    runes := []rune(s)
    if i < 0 {
        i += len(runes)
    }
    if i < 0 || i >= len(runes) {
        panic("index out of range")
    }
    return string(runes[i])
}

