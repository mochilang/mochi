# Generated by Mochi Python compiler
from __future__ import annotations

import typing

def maxCoins(nums: list[int]) -> int:
	arr = [1]
	arr = (arr + nums)
	arr = (arr + [1])
	n = len(arr)
	dp = []
	i = 0
	while (i < n):
		row = []
		j = 0
		while (j < n):
			row = (row + [0])
			j = (j + 1)
		dp = (dp + [row])
		i = (i + 1)
	length = 2
	while (length < n):
		left = 0
		while ((left + length) < n):
			right = (left + length)
			k = (left + 1)
			while (k < right):
				coins = ((((arr[left] * arr[k]) * arr[right]) + dp[left][k]) + dp[k][right])
				if (coins > dp[left][right]):
					dp[left][right] = coins
				k = (k + 1)
			left = (left + 1)
		length = (length + 1)
	return dp[0][(n - 1)]

def example_1():
	assert (maxCoins([3, 1, 5, 8]) == 167)

def example_2():
	assert (maxCoins([1, 5]) == 10)

def main():
	example_1()
	example_2()

if __name__ == "__main__":
	main()
