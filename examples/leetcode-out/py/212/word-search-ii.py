# Generated by Mochi Python compiler
from __future__ import annotations

import typing

def exist(board: list[list[str]], word: str) -> bool:
	m = len(board)
	if (m == 0):
		return False
	n = len(board[0])
	visited = []
	r = 0
	while (r < m):
		row = []
		c = 0
		while (c < n):
			row = (row + [False])
			c = (c + 1)
		visited = (visited + [row])
		r = (r + 1)
	def dfs(r: int, c: int, idx: int) -> bool:
		nonlocal visited
		if (idx == len(word)):
			return True
		if ((((r < 0) or (r >= m)) or (c < 0)) or (c >= n)):
			return False
		if visited[r][c]:
			return False
		if (board[r][c] != word[idx]):
			return False
		visited[r][c] = True
		if (((dfs((r + 1), c, (idx + 1)) or dfs((r - 1), c, (idx + 1))) or dfs(r, (c + 1), (idx + 1))) or dfs(r, (c - 1), (idx + 1))):
			visited[r][c] = False
			return True
		visited[r][c] = False
		return False
	for i in range(0, m):
		for j in range(0, n):
			if dfs(i, j, 0):
				return True
	return False

def findWords(board: list[list[str]], words: list[str]) -> list[str]:
	found = []
	for w in words:
		if exist(board, w):
			found = (found + [w])
	return found

board = [["o", "a", "a", "n"], ["e", "t", "a", "e"], ["i", "h", "k", "r"], ["i", "f", "l", "v"]]
words = ["oath", "pea", "eat", "rain"]

def example():
	result = [ w for w in sorted([ w for w in findWords(board, words) ], key=lambda w: w) ]
	assert (result == ["eat", "oath"])

def main():
	board = [["o", "a", "a", "n"], ["e", "t", "a", "e"], ["i", "h", "k", "r"], ["i", "f", "l", "v"]]
	words = ["oath", "pea", "eat", "rain"]
	example()

if __name__ == "__main__":
	main()
