// Code generated by ccgo from chibicc sources; DO NOT EDIT.

package main

import (
	"unsafe"
	"modernc.org/libc"
)

func strarray_push(tls *libc.TLS, arr uintptr, s uintptr) { /* strings.c:3:6: */
	if !(int32((*StringArray)(unsafe.Pointer(arr)).data) != 0) {
		(*StringArray)(unsafe.Pointer(arr)).data = libc.Xcalloc(tls, uint64(8), uint64(unsafe.Sizeof(uintptr(0))))
		(*StringArray)(unsafe.Pointer(arr)).capacity = 8
	}

	if (*StringArray)(unsafe.Pointer(arr)).capacity == (*StringArray)(unsafe.Pointer(arr)).len {
		(*StringArray)(unsafe.Pointer(arr)).data = libc.Xrealloc(tls, (*StringArray)(unsafe.Pointer(arr)).data, uint64(unsafe.Sizeof(uintptr(0)))*uint64((*StringArray)(unsafe.Pointer(arr)).capacity)*uint64(2))
		*(*int32)(unsafe.Pointer(arr + 8)) *= 2
		{
			var i int32 = (*StringArray)(unsafe.Pointer(arr)).len
			for ; i < (*StringArray)(unsafe.Pointer(arr)).capacity; i++ {
				*(*uintptr)(unsafe.Pointer((*StringArray)(unsafe.Pointer(arr)).data + uintptr(i)*8)) = uintptr(0)
			}
		}
	}

	*(*uintptr)(unsafe.Pointer((*StringArray)(unsafe.Pointer(arr)).data + uintptr(libc.PostIncInt32(&(*StringArray)(unsafe.Pointer(arr)).len, 1))*8)) = s
}

// Takes a printf-style format string and returns a formatted string.
func format(tls *libc.TLS, fmt uintptr, va uintptr) uintptr { /* strings.c:20:6: */
	var ap va_list
	_ = ap
	ap = va
	var len int32 = libc.Xvsnprintf(tls, uintptr(0), uint64(0), fmt, ap)
	_ = ap

	var buf uintptr = libc.Xcalloc(tls, uint64(1), uint64(len+1))

	ap = va
	libc.Xvsnprintf(tls, buf, uint64(len+1), fmt, ap)
	_ = ap
	return buf
}

// Input file
