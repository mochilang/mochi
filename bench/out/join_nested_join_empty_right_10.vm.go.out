package main
import (
	"encoding/json"
	"os"
	"mochi/runtime/vm"
)
var progData = []byte(`{"Funcs":[{"Code":[{"Op":0,"A":0,"B":0,"C":0,"D":0,"Val":{"Tag":5,"Int":0,"Float":0,"Str":"","Bool":false,"List":[],"Map":null,"Func":null},"Line":1},{"Op":1,"A":1,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":1},{"Op":0,"A":2,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":2},{"Op":0,"A":3,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":10,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":2},{"Op":1,"A":4,"B":2,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":2},{"Op":9,"A":5,"B":4,"C":3,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":2},{"Op":13,"A":5,"B":16,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":2},{"Op":0,"A":6,"B":0,"C":0,"D":0,"Val":{"Tag":3,"Int":0,"Float":0,"Str":"id","Bool":false,"List":null,"Map":null,"Func":null},"Line":3},{"Op":0,"A":7,"B":0,"C":0,"D":0,"Val":{"Tag":3,"Int":0,"Float":0,"Str":"val","Bool":false,"List":null,"Map":null,"Func":null},"Line":3},{"Op":1,"A":8,"B":4,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":3},{"Op":1,"A":9,"B":4,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":3},{"Op":19,"A":10,"B":2,"C":6,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":3},{"Op":31,"A":1,"B":1,"C":10,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":3},{"Op":0,"A":12,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":1,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":2},{"Op":2,"A":4,"B":4,"C":12,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":2},{"Op":12,"A":5,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":2},{"Op":0,"A":15,"B":0,"C":0,"D":0,"Val":{"Tag":5,"Int":0,"Float":0,"Str":"","Bool":false,"List":[],"Map":null,"Func":null},"Line":5},{"Op":0,"A":16,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":100,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":6},{"Op":1,"A":17,"B":2,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":7},{"Op":29,"A":18,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":8},{"Op":1,"A":4,"B":2,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":9},{"Op":9,"A":19,"B":4,"C":16,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":9},{"Op":13,"A":19,"B":55,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":9},{"Op":0,"A":20,"B":0,"C":0,"D":0,"Val":{"Tag":5,"Int":0,"Float":0,"Str":"","Bool":false,"List":[],"Map":null,"Func":null},"Line":10},{"Op":42,"A":21,"B":1,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":10},{"Op":14,"A":22,"B":21,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":10},{"Op":42,"A":23,"B":15,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":14,"A":24,"B":23,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":0,"A":25,"B":0,"C":0,"D":0,"Val":{"Tag":3,"Int":0,"Float":0,"Str":"id","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":0,"A":26,"B":0,"C":0,"D":0,"Val":{"Tag":3,"Int":0,"Float":0,"Str":"val","Bool":false,"List":null,"Map":null,"Func":null},"Line":12},{"Op":0,"A":27,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":10},{"Op":60,"A":28,"B":27,"C":22,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":10},{"Op":13,"A":28,"B":51,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":10},{"Op":15,"A":30,"B":21,"C":27,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":10},{"Op":0,"A":31,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":60,"A":32,"B":31,"C":24,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":13,"A":32,"B":49,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":15,"A":34,"B":23,"C":31,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":15,"A":35,"B":30,"C":25,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":15,"A":36,"B":34,"C":25,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":7,"A":38,"B":35,"C":36,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":13,"A":38,"B":43,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":0,"A":38,"B":0,"C":0,"D":0,"Val":{"Tag":4,"Int":0,"Float":0,"Str":"","Bool":true,"List":null,"Map":null,"Func":null},"Line":11},{"Op":13,"A":38,"B":46,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":15,"A":40,"B":30,"C":26,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":12},{"Op":31,"A":20,"B":20,"C":40,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":10},{"Op":0,"A":42,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":1,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":48,"A":31,"B":31,"C":42,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":12,"A":35,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":48,"A":27,"B":27,"C":42,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":10},{"Op":12,"A":31,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":10},{"Op":14,"A":17,"B":20,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":13},{"Op":0,"A":44,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":1,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":9},{"Op":2,"A":4,"B":4,"C":44,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":9},{"Op":12,"A":21,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":9},{"Op":29,"A":46,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":15},{"Op":50,"A":47,"B":46,"C":18,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":15},{"Op":0,"A":48,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":1000,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":15},{"Op":54,"A":49,"B":47,"C":48,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":15},{"Op":0,"A":50,"B":0,"C":0,"D":0,"Val":{"Tag":3,"Int":0,"Float":0,"Str":"duration_us","Bool":false,"List":null,"Map":null,"Func":null},"Line":17},{"Op":0,"A":51,"B":0,"C":0,"D":0,"Val":{"Tag":3,"Int":0,"Float":0,"Str":"output","Bool":false,"List":null,"Map":null,"Func":null},"Line":18},{"Op":1,"A":52,"B":49,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":17},{"Op":1,"A":53,"B":17,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":18},{"Op":19,"A":54,"B":2,"C":50,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":16},{"Op":30,"A":54,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":16},{"Op":26,"A":0,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":0}],"NumRegs":55,"NumParams":0,"Name":"main","Line":0}],"Types":null,"file":"bench/out/tmp.mochi","source":["var left = []","for i in 0..10 {","  left = append(left, { id: i, val: i })","}","var right = []","let repeat = 100","var last = 0","let start = now()","for i in 0..repeat {","  let res = from l in left","            join r in right on (l.id == r.id \u0026\u0026 true)","            select l.val","  last = len(res)","}","let duration = (now() - start) / 1000","json({","  \"duration_us\": duration,","  \"output\": last,","})",""]}`)
func main() {
	var p vm.Program
	if err := json.Unmarshal(progData, &p); err != nil { panic(err) }
	m := vm.New(&p, os.Stdout)
	if err := m.Run(); err != nil { panic(err) }
}
