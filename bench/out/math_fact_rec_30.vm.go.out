package main
import (
	"encoding/json"
	"os"
	"mochi/runtime/vm"
)
var progData = []byte(`{"Funcs":[{"Code":[{"Op":0,"A":5,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":30,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":9},{"Op":1,"A":0,"B":5,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":9},{"Op":56,"A":0,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":9},{"Op":0,"A":6,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":1000,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":10},{"Op":1,"A":1,"B":6,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":10},{"Op":56,"A":1,"B":1,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":10},{"Op":0,"A":7,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":1,"A":2,"B":7,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":56,"A":2,"B":2,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":11},{"Op":29,"A":8,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":13},{"Op":1,"A":3,"B":8,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":13},{"Op":56,"A":3,"B":3,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":13},{"Op":0,"A":7,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":14},{"Op":1,"A":9,"B":7,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":14},{"Op":71,"A":10,"B":9,"C":1,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":14},{"Op":13,"A":10,"B":24,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":14},{"Op":1,"A":11,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":15},{"Op":24,"A":12,"B":1,"C":1,"D":11,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":15},{"Op":1,"A":2,"B":12,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":15},{"Op":56,"A":2,"B":2,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":15},{"Op":0,"A":13,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":1,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":14},{"Op":58,"A":14,"B":9,"C":13,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":14},{"Op":1,"A":9,"B":14,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":14},{"Op":12,"A":14,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":14},{"Op":29,"A":15,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":17},{"Op":60,"A":16,"B":15,"C":3,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":17},{"Op":0,"A":6,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":1000,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":17},{"Op":64,"A":17,"B":16,"C":6,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":17},{"Op":49,"A":18,"B":17,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":17},{"Op":1,"A":4,"B":18,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":17},{"Op":56,"A":4,"B":4,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":17},{"Op":0,"A":19,"B":0,"C":0,"D":0,"Val":{"Tag":5,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"duration_us","Bool":false,"List":null,"Map":null,"Func":null},"Line":20},{"Op":0,"A":20,"B":0,"C":0,"D":0,"Val":{"Tag":5,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"output","Bool":false,"List":null,"Map":null,"Func":null},"Line":21},{"Op":1,"A":21,"B":19,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":20},{"Op":1,"A":22,"B":4,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":20},{"Op":1,"A":23,"B":20,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":21},{"Op":1,"A":24,"B":2,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":21},{"Op":19,"A":25,"B":2,"C":21,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":19},{"Op":32,"A":25,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":19},{"Op":26,"A":0,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":0}],"NumRegs":26,"NumParams":0,"Name":"__main","Line":0},{"Code":[{"Op":0,"A":6,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":2},{"Op":7,"A":7,"B":5,"C":6,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":2},{"Op":13,"A":7,"B":5,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":2},{"Op":0,"A":8,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":1,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":3},{"Op":26,"A":8,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":3},{"Op":0,"A":8,"B":0,"C":0,"D":0,"Val":{"Tag":1,"Int":1,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":5},{"Op":3,"A":10,"B":5,"C":8,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":5},{"Op":1,"A":9,"B":10,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":5},{"Op":24,"A":11,"B":1,"C":1,"D":9,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":5},{"Op":4,"A":12,"B":5,"C":11,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":5},{"Op":26,"A":12,"B":0,"C":0,"D":0,"Val":{"Tag":0,"Int":0,"BigInt":null,"BigRat":null,"Float":0,"Str":"","Bool":false,"List":null,"Map":null,"Func":null},"Line":5}],"NumRegs":13,"NumParams":1,"Name":"fact_rec","Line":1}],"Types":[{}],"file":"bench/out/tmp.mochi","source":["fun fact_rec(n: int): int {","  if n == 0 {","    return 1","  }","  return n * fact_rec(n - 1)","}","","// let n = 4","let n = 30","let repeat = 1000","var last = 0","","let start = now()","for i in 0..repeat {","  last = fact_rec(n)","}","let duration = (now() - start) / 1000","","json({","  \"duration_us\": duration,","  \"output\": last,","})",""],"num_globals":5}`)
func main() {
	var p vm.Program
	if err := json.Unmarshal(progData, &p); err != nil { panic(err) }
	m := vm.New(&p, os.Stdout)
	if err := m.Run(); err != nil { panic(err) }
}
